# 衍射

|  |
| --- |
| Wwise Unreal Integration Documentation |

衍射

在发声体和听者之间的视线被障碍物阻挡时，Spatial Audio 会围绕该物体创建衍射路径并对行为进行逼真的模拟。Depending on the angle of the path around an edge, the sound will be attenuated.

|  |  |
| --- | --- |
|  | **注記：** 在开始学习本教程前，请务必先完成 [Spatial Audio 教程准备工作](sa_setup.html) 。最重要的是，必须完成以下两项操作。  - 在 Wwise 中，选中要衍射的声音并转到与之对应的 Positioning 选项卡，然后启用 **Diffraction and Transmission**。 - In Unreal, set the **Refresh Interval** of `AkAmbientSound` to 0. This tutorial only uses the Spatial Audio diffraction and transmission loss system. |

按照以下步骤来在地图中设置 Spatial Audio 衍射。

1. 在 Unreal 中执行以下操作（如尚未执行）：
   1. 在建筑周围添加 [AkSpatialAudioVolume](pg_features_spatialaudio.html#features_objects_akspatialaudiovolume) 对象。
      1. 确保启用 **Enable Surface Reflectors**。
      2. 在 Geometry Settings 分区中，确保启用 **Diffraction**。
   2. 将 [AkGeometryComponent](pg_features_spatialaudio.html#features_objects_akgeometrycomponent) 组件添加到外部障碍物 Static Mesh。
      1. 在 Geometry 分区的 Diffraction 下，确保启用 **Diffraction**。
2. 播放声音并连接到 Wwise。
   1. 您应当能够在启用了衍射的几何构造上看到衍射边缘，并在播放启用了衍射的声音且发声体和听者之间有障碍物阻挡时看到衍射路径。

在 Demo Game 内提供的 SpatialAudioTutorialMap 中，可看到播放 Outside 发声体时由外部障碍物生成的衍射路径。

![](../../../../images/SATutorialGameObject3DViewerDiffraction.png)

这时 Diffraction 会使用声音的 Attenuation ShareSet 中的 Diffraction 曲线对声音实施衰减。When the curves are set to **Use Project Diffraction**, they use the Diffraction curves in the Environmental Curves tab of the Project Settings in the Authoring application.

![](../../../../images/SATutorialDiffractionTransmissionCurves.png)

![](../../../../images/SATutorialProjectSettingsDiffractionVolume.png)

参见
:   - [Spatial Audio 衍射](https://www.audiokinetic.com/library/edge/?source=SDK&id=spatial_audio_concepts.html#spatial_audio_concepts_diffraction)
    - [使用 Geometry API 模拟衍射](https://www.audiokinetic.com/library/edge/?source=SDK&id=spatial_audio_apigeometry_diffract.html)