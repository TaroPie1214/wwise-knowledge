# 重要迁移说明 2019.2.1.7250.1621

|  |
| --- |
| Wwise Unreal Integration Documentation |

重要迁移说明 2019.2.1.7250.1621

# 新增功能：Event-Based Packaging

Unreal Integration 2019.2 中针对素材管理实施了一些重大改进，包括新增了 Event-Based Packaging 工作流程。现在无需手动将 Wwise Event 导入到 Content Browser 中，也不必通过手动创建的 SoundBank Unreal 素材来管理引用。

这一新的工作流程会自动创建工程所需的全部素材：Event、Auxiliary Bus、Media、Init Bank、RTPC (Game Parameter)、Switch Value、State Value、Trigger 和 Acoustic Texture。在构建 Sound Data 时，所有 Event 和 Auxiliary Bus 素材都会包含不带媒体的 SoundBank。媒体素材现在被封装到了专门的 Unreal 素材中，而每个 Event 都对应有一系列所需媒体。不再需要手动加载 SoundBank；若地图中引用了 Event 或 Aux Bus，则会将必要的 SoundBank 数据和相关媒体自动加载到内存中。

在使用 Audiokinetic Launcher 将 Wwise 集成到 Unreal 工程中之后，会默认启用新的工作流程，并自动对 Wwise 工程实施所有必要更改。同时还会启用 WAAPI 连接，以此大幅提升 Sound Data 生成性能，并激活 Integration 内的其他功能。有关详细信息，请参阅 [对 Wwise 工程的更改](install_changes_wproj.html) 章节。

|  |  |
| --- | --- |
|  | **注記：** 为了在 Event-Based Packaging 工作流程当中尽可能地优化 IO 挂钩，在把 Wwise 连接到编辑器或游戏时，将在 Advanced Profiler 的 Loaded Media 选项卡中显示 MediaID 而非文件名称。 |

对于使用现有 Wwise Integration 的工程，需要将现有 Unreal 素材迁移到新的工作流程。若工程较大，则强烈建议通过 “GenerateSoundBanks” Commandlet 来执行此迁移操作：在通过 Audiokinetic Launcher 更新 Wwise Unreal 集成后使用 -Migration 开关（详见 [Generating SoundBanks with the GenerateSoundBanks Commandlet](using_features_generatecommandlet.html) 章节）。注意，此迁移操作比较耗时。若工程较小，则在通过 Audiokinetic Launcher 更新 Wwise Unreal 集成后首次在 Unreal Editor 中打开 Unreal 工程时便可触发迁移流程。这时对话框会询问是否需要使用新的工作流程。如需启动迁移流程，请单击 Yes。

![](../../../../images/MigrationPrompt.png)

迁移流程会对 Unreal 工程实施以下更改：

- 默认在 Content/WwiseAudio 文件夹中自动创建用于代表 Wwise 工程内各个 Wwise 对象所需的全部 Unreal 素材（Event、State、Switch、Trigger、Auxiliary Bus 和 Acoustic Texture）。
  - 把使用旧版 Wwise Unreal 集成手动创建的现有素材全部合并到新建的素材中。
- 生成 Sound Data。
  - 由 Wwise 生成 SoundBank，并在对应 Unreal 素材中进行序列化处理。
  - 在对应 Wwise Media Unreal 素材中封装媒体文件。
  - 在 Event/Auxiliary Bus 和 Media 之间建立依赖关系。
  - 在必要时，将更改提交到版本控制系统。

若决定停用 Event-Based Packaging，则将对 Unreal 和 Wwise 工程实施以下更改。

- 创建仅用来存储插件列表的 InitBank 素材。
- 在 Wwise Project Settings 中激活 **Generate Metadata File\*\*、\*\*Generate XML Metadata\*\*、\*\*Generate JSON Metadata\*\*、\*\*Generate Per Bank Metadata File\*\*、\*\*Include GUID\*\*、\*\*Max Attenuation** 和 \*\*Estimated Duration\*\*。