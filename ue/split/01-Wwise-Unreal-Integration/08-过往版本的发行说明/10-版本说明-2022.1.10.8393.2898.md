# 版本说明 2022.1.10.8393.2898

|  |
| --- |
| Wwise Unreal Integration Documentation |

版本说明 2022.1.10.8393.2898

此 Integration 的各个版本分别与特定的 Unreal Engine 版本对应。以下是 Integration 2022.1.10.8393.2898 版本中所作的更改（除升级到新的 Unreal 版本外）。

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 版本不支持实验性的 Unreal Engine 功能。 |

|  |  |
| --- | --- |
|  | **注記：**  - 此 Integration 针对 Unreal Engine 4.27、5.1、5.2 和 5.3 编译，并且针对 Unreal Engine 5.3 进行了测试。暂不支持比上述更高的 Unreal Engine 大版本，但后续补丁版本中会提供相应支持。 - **弃用说明**：未来的小版本将取消对 Unreal Engine 4.27 的支持。建议使用 Unreal Engine 5.1 或更高版本。 |

有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。

- [新增功能](releasenotes_2022_1_10_2898.html#generic_feature_changes_2022_1_10)
- [行为改进](releasenotes_2022_1_10_2898.html#generic_behavior_changes_2022_1_10)
- [性能改进](releasenotes_2022_1_10_2898.html#generic_perf_changes_2022_1_10)
- [其他改进](releasenotes_2022_1_10_2898.html#generic_misc_2022_1_10)
- [漏洞修复](releasenotes_2022_1_10_2898.html#generic_bugs_2022_1_10)
- [社区报告的漏洞修复](releasenotes_2022_1_10_2898.html#generic_community_bugs_2022_1_10)

# 新增功能

- **WG-64386** 添加了对 Unreal 的 Niagara 系统的支持。有关详细信息，请参阅 [使用 Wwise Unreal Niagara Integration](using_features_niagara.html) 章节。
- **WG-69380** 在 Windows 上添加了对 Debug SoundEngine 和 StaticCRT 目标配置的支持。
- **WG-69485** 日志消息现在会指示当前执行的二进制文件所用的 Wwise 配置（Debug、Profile、Release 或 StaticCRT）。

# 行为改进

- **WG-69137** 在将 0 传给 `SetExternalSourceMedia` 作为 Media ID 时，现在会将对应的 Cookie 重置为未设置的值。

# 性能改进

- **WG-61471** 更新了 Wwise Runtime 所用的内存分配挂钩。最主要的是，通过直接使用 `FMemory::Malloc` 来预留新的内存块，对于所有二进制配置和大部分平台，所有非设备内存分配的分配挂钩现在具有一致的行为。除此之外，Low-Level-Memory Tracker 现在还会在 LLM 标记 "Wwise/SoundEngineMalloc" 下追踪非设备内存分配。在使用 2022.1.10、2023.1.1 或更高版本中的 Wwise SDK 时，还添加了对 "Span Count" 内存设置的支持并将值设为了 AkSpanCount\_Small。这样应可显著降低 Wwise 为所有非媒体分配预留的内存量。

# 其他改进

- **WG-69377** 从 AnimNotify\_AkEvent 中移除了之前弃用的操作。
- **WG-69378** 现在会将声学 Portal 状态显示为 Disabled 和 Enabled 而非 Closed 和 Open 以反映 Wwise 2023.1 中显示的内容。

# 漏洞修复

- **WG-68675** 已修复：在 Wwise Browser 中调和 Orphaned Asset 时，Unreal Editor 发生崩溃。
- **WG-68742** 已修复：在使用 Audiokinetic Launcher 将 Wwise 集成到 Unreal 工程中时把 Android SDK 库放在了错误的位置。
- **WG-68850** 已修复：在工程中的 `.cpp` 文件中，在 `Logger.h` 之后包含 `ShaderPreprocessTypes.h` 时出现构建错误。
- **WG-68948** 已修复：“撤销”操作对 Unreal Editor 中的有些组件和用户界面元素不起作用。
- **WG-69004** 已修复：无法在 Content Browser 中发送通过 Reconcile 创建的 Event UAsset。
- **WG-69053** 已修复：在连同 GroupValue 一起从 Event 的 Switch Controller Leaf 卸载 ExternalSource 时可能会死机。
- **WG-69066** 已修复：在将 **Root Output Path Override** 设为与 Wwise 和 Unreal 工程的安装位置不同的驱动器时无法生成 SoundBank。
- **WG-69131** 已修复：(Spatial Audio) 在使用带有 "Sphere Collision" Primitive 的 AkGeometry Component 时，由于存在多余的顶点导致发送到 Wwise 的 Mesh 具有边界衍射边缘。
- **WG-69140** 已修复：在运行自动测试时，声音引擎匮乏触发了警告。严重性应降为日志。
- **WG-69143** 已修复：过于频繁地尝试卸载仍在使用的媒体。
- **WG-69147** 已修复：内存中从不清理 SwitchContainerLeaf 和 GroupValue。
- **WG-69379** 已修复：在删除关卡中引用的环境声素材并进入 Play in Editor 模式时发生崩溃。
- **WG-69782** 已修复：在多个并行线程中使用时没有锁定 External Source PlayinIdToMediaId。

# 社区报告的漏洞修复

- **WG-63676** 已修复：在构建时，Visual Studio 出现 "error C4103: alignment changed after including header" 错误。
- **WG-64700** 已修复：在 Unreal Engine 输出 PostLoad 时分派 Blueprint 事件回调会触发断言。
- **WG-66538** 已修复：Niagara 无法针对 Linux 进行编译。
- **WG-68378** 已修复：NULL 指针使用不当导致 VisualCPP 检查失败。
- **WG-68439** 已修复：在 Master Audio Bus 上添加 Recorder 效果器插件并将 Unreal Audio Routing 设为 **Route through AKAudioMixer** 时发生崩溃。
- **WG-69148** 已修复：在多次卸载媒体流的情况下销毁 FWwiseFileCacheHandle 时可能会因资源争用而导致出现卡顿。为此，通过使用 AsyncRead 而非 FArchive 反序列化提升了加载非流媒体素材时的性能。
- **WG-69166** 已修复：离线渲染无法加载流播放文件。仅 Wwise 2022.1.x 中发现了该问题。
- **WG-69415** 已修复：在 Event Action 中使用 Set Effect 时出现 "ActionSetFX is not a recognized json field" 错误。
- **WG-69728** 已修复：在引用媒体的 Event 处在不同的 SoundBank 时，有时无法加载媒体。对于 Audio Bus 效果器插件，如果初始化时所需的媒体保存在 SoundBank 中，还会出现 "plug-in media unavailable" 错误。
- **WG-69740** 已修复：Wwise 模块 getter 的性能不佳。