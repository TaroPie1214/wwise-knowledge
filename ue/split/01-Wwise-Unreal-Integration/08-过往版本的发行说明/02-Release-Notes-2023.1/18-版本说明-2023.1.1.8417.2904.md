# 版本说明 2023.1.1.8417.2904

|  |
| --- |
| Wwise Unreal Integration Documentation |

版本说明 2023.1.1.8417.2904

此 Integration 的各个版本分别与特定的 Unreal Engine 版本对应。以下是 Integration 2023.1.1.8417.2904 版本中所作的更改（除升级到新的 Unreal 版本外）。

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 版本不支持实验性的 Unreal Engine 功能。 |

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 针对 Unreal Engine 5.2 和 5.3 编译，并且针对 Unreal Engine 5.3 进行了测试。暂不支持比上述更高的 Unreal Engine 大版本，但后续补丁版本中会提供相应支持。 |

有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。

- [新增功能](releasenotes_2023_1_1_2904.html#generic_feature_changes_2023_1_1)
- [行为改进](releasenotes_2023_1_1_2904.html#generic_behavior_changes_2023_1_1)
- [性能改进](releasenotes_2023_1_1_2904.html#generic_perf_changes_2023_1_1)
- [其他改进](releasenotes_2023_1_1_2904.html#generic_misc_2023_1_1)
- [漏洞修复](releasenotes_2023_1_1_2904.html#generic_bugs_2023_1_1)
- [社区报告的漏洞修复](releasenotes_2023_1_1_2904.html#generic_community_bugs_2023_1_1)

# 新增功能

- **WG-64386** 添加了对 Unreal 的 Niagara 系统的支持。有关详细信息，请参阅 [使用 Wwise Unreal Niagara Integration](using_features_niagara.html) 章节。
- **WG-68800** 在 Wwise Demo Game 中添加了 Niagara 演示。

# 行为改进

- **WG-69137** 在将 0 传给 `SetExternalSourceMedia` 作为 Media ID 时，现在会将对应的 Cookie 重置为未设置的值。
- **WG-69231** 现在可在任意 Room 组件的 Details 面板中设置 Reverb Zone。
- **WG-69690** 不管 Room 是不是动态的，现在都会在游戏中更新 Reverb Zone。在游戏中启用和禁用 Room 时，还会在 Spatial Audio 中添加/移除非动态 Room。

# 性能改进

- **WG-61471** 更新了 Wwise Runtime 所用的内存分配挂钩。最主要的是，通过直接使用 `FMemory::Malloc` 来预留新的内存块，对于所有二进制配置和大部分平台，所有非设备内存分配的分配挂钩现在具有一致的行为。除此之外，Low-Level-Memory Tracker 现在还会在 LLM 标记 "Wwise/SoundEngineMalloc" 下追踪非设备内存分配。在使用 2022.1.10、2023.1.1 或更高版本中的 Wwise SDK 时，还添加了对 "Span Count" 内存设置的支持并将值设为了 AkSpanCount\_Small。这样应可显著降低 Wwise 为所有非媒体分配预留的内存量。

# 其他改进

- **WG-68202** 将 Reverb Zone 的 Transition Region 的默认值改为了非零值。

# 漏洞修复

- **WG-63322** 已修复：缺少关于未指派 Late Reverb Aux Bus 的警告。
- **WG-63515** 已修复：在更改 AkGeometry 组件的 Acoustic Texture 后没有更新混响估值属性。
- **WG-64664** 已修复：在修改 AkSpatialAudioVolume 的 Late Reverb 树视图组件时没有刷新其余的 UI。
- **WG-67386** 已修复：在地图包含不带 UPrimitiveComponent 父对象的 AkRoomComponent 时 PIE 发生崩溃。
- **WG-68348** 已修复：(Spatial Audio) 在停止播放时，AkLateReverbComponent 析构函数导致 Unreal 发生崩溃。
- **WG-68361** 已修复：在运行 Reconcile 后，Wwise Browser 中没有更新落单素材。
- **WG-68496** 已修复：移除了 Unreal Server 启动当中的 "No Resource Loader" 错误。
- **WG-68620** 已修复：在生成 SoundBank 后，Assert Registry 触发断言。
- **WG-68675** 已修复：在 Wwise Browser 中调和 Orphaned Asset 时，Unreal Editor 发生崩溃。
- **WG-68702** 已修复：报告媒体和 SoundBank 加载情况的 Verbose LogWwiseFileHandler 日志条目很难解释，且其没有包含正确的内存位置。
- **WG-68716** 已修复：(Spatial Audio)连接同级 Reverb Zone 的 Portal 无效时，没有显示为红色。
- **WG-68742** 已修复：在使用 Audiokinetic Launcher 将 Wwise 集成到 Unreal 工程中时把 Android SDK 库放在了错误的位置。
- **WG-68850** 已修复：在工程中的 `.cpp` 文件中，在 `Logger.h` 之后包含 `ShaderPreprocessTypes.h` 时出现构建错误。
- **WG-68948** 已修复：“撤销”操作对 Unreal Editor 中的有些组件和用户界面元素不起作用。
- **WG-68955** 已修复：在没有提供 AkEvent 时，"PostEventAtLocation" Blueprint 节点引发崩溃。
- **WG-68980** 已修复：(Spatial Audio) 在 Front Room 和 Back Room 保持不变的情况下移动了 Portal 但没有予以更新。
- **WG-68991** 已修复：Wwise 插件的 `ThirdParty` 文件夹中存在重复的 Wwise SDK 文件。
- **WG-69053** 已修复：在连同 GroupValue 一起从 Event 的 Switch Controller Leaf 卸载 ExternalSource 时可能会死机。
- **WG-69066** 已修复：在将 **Root Output Path Override** 设为与 Wwise 和 Unreal 工程的安装位置不同的驱动器时无法生成 SoundBank。
- **WG-69131** 已修复：(Spatial Audio) 在使用带有 "Sphere Collision" Primitive 的 AkGeometry Component 时，由于存在多余的顶点导致发送到 Wwise 的 Mesh 具有边界衍射边缘。
- **WG-69140** 已修复：在运行自动测试时，声音引擎匮乏触发了警告。严重性应降为日志。
- **WG-69143** 已修复：过于频繁地尝试卸载仍在使用的媒体。
- **WG-69147** 已修复：内存中从不清理 SwitchContainerLeaf 和 GroupValue。
- **WG-69239** 已修复：(Spatial Audio) 在使用无效的参数调用 `UAkPortalComponent::SetPortalOcclusion` 时发生崩溃。
- **WG-69369** 已修复：在 Wwise 2023.1 中，UE 4.27.2 出现编译问题。Wwise 2023.1 版本会尽可能长时间地保留对 UE 4.27.2 的非官方支持。使用 Wwise 2022.1 获取对 UE 4.27.2 的官方支持。
- **WG-69626** 已修复：在指派不恰当的 Reverb Zone 父对象时没有显示错误消息。
- **WG-69782** 已修复：在多个并行线程中使用时没有锁定 External Source PlayinIdToMediaId。

# 社区报告的漏洞修复

- **WG-63676** 已修复：在构建时，Visual Studio 出现 "error C4103: alignment changed after including header" 错误。
- **WG-64326** 已修复：销毁后还能调用 AkComponentCallback。
- **WG-66538** 已修复：Niagara 无法针对 Linux 进行编译。
- **WG-66623** 已修复：AkComponent 代码中的发声体-听者关系使用了原始指针而非弱指针。
- **WG-67444** 已修复：Test 配置下可能会出现内存不足的情况。
- **WG-67518** 已修复：在使用 UE 5.3 时，Test 配置加载通信库。
- **WG-67704** 已修复：`AkGameplayStatics.cpp` 中存在枚举操作问题。
- **WG-68089** 已修复：在 Blueprint 中将 AkSpatialAudioVolume 用作 ChildActor 时发生崩溃。
- **WG-68123** 已修复：在 UE 5.3 中构建特定平台或构建多个目标时，UBT 报告 LNK1181 错误。
- **WG-68365** 已修复：在启用 Multi-Core Rendering 的情况下针对 iOS 进行构建时，UE4.27 Integration 发生崩溃。
- **WG-68377** 已修复：Wwise Browser 没有使用用户指定的 Root Output Path。
- **WG-68536** 已修复：延迟卸载仍在使用的素材可能会导致死机。
- **WG-68832** 已修复：在切换零延迟流播放 PCM 媒体时发生崩溃。
- **WG-68846** 已修复：User-defined SoundBank 流媒体预取数据被加载了两次。
- **WG-68964** 已修复： `.uplugin` 中缺少 Module。
- **WG-69037** 已修复：在 Room 内变换空间时，若 AkComponent 保持不变，则可能会发生崩溃。
- **WG-69148** 已修复：在多次卸载媒体流的情况下销毁 FWwiseFileCacheHandle 时可能会因资源争用而导致出现卡顿。为此，通过使用 AsyncRead 而非 FArchive 反序列化提升了加载非流媒体素材时的性能。
- **WG-69166** 已修复：离线渲染无法加载流播放文件。仅 Wwise 2022.1.x 中发现了该问题。
- **WG-69404** 已修复：从代码中移除了不恰当的断言。
- **WG-69415** 已修复：在 Event Action 中使用 Set Effect 时出现 "ActionSetFX is not a recognized json field" 错误。
- **WG-69494** 已修复：Wwise 2023.1 的 Migration 对话框指向并链接到了 Upgrading Projects to Wwise 2022.1 页面。
- **WG-69591** 已修复：对 LIKELY 的检查应改为对 UNLIKELY 的检查。
- **WG-69728** 已修复：在引用媒体的 Event 处在不同的 SoundBank 时，有时无法加载媒体。对于 Audio Bus 效果器插件，如果初始化时所需的媒体保存在 SoundBank 中，还会出现 "plug-in media unavailable" 错误。
- **WG-69740** 已修复：Wwise 模块 getter 的性能不佳。