# 版本说明 2023.1.0.8367.2849

|  |
| --- |
| Wwise Unreal Integration Documentation |

版本说明 2023.1.0.8367.2849

此 Integration 的各个版本分别与特定的 Unreal Engine 版本对应。以下是 Integration 2023.1.0.8367.2849 版本中所作的更改（除升级到新的 Unreal 版本外）。

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 版本不支持实验性的 Unreal Engine 功能。 |

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 针对 Unreal Engine 5.2 和 5.3 编译，并且针对 Unreal Engine 5.3 进行了测试。暂不支持比上述更高的 Unreal Engine 大版本，但后续补丁版本中会提供相应支持。 |

有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。

- [新增功能](releasenotes_2023_1_0_2849.html#generic_feature_changes_2023_1)
- [API 改进](releasenotes_2023_1_0_2849.html#generic_api_changes_2023_1)
- [行为改进](releasenotes_2023_1_0_2849.html#generic_behavior_changes_2023_1)
- [性能改进](releasenotes_2023_1_0_2849.html#generic_perf_changes_2023_1)
- [其他改进](releasenotes_2023_1_0_2849.html#generic_misc_2023_1)
- [漏洞修复](releasenotes_2023_1_0_2849.html#generic_bugs_2023_1)
- [社区报告的漏洞修复](releasenotes_2023_1_0_2849.html#generic_community_bugs_2023_1)
- [文档改进](releasenotes_2023_1_0_2849.html#generic_documentation_improvements_2023_1)

# 新增功能

- **WG-53296** Integration 现在支持在 Debug 和 DebugGame Unreal 配置下使用 Wwise Debug SoundEngine。
- **WG-58405** (Spatial Audio) 添加了 Reverb Zone。藉此，可对具有不同混响效果器的 Room 内的区域进行建模，但不需要将 Portal 连接到相邻 Room。Reverb Zone 适合对开放空间（如遮盖区域、立交桥、露台等）进行建模。
- **WG-62866** 添加了 Wwise Reconcile Commandlet 以便在 Unreal 和 Generated SoundBank 之间同步素材。
- **WG-63596** 2023.1 的 Wwise Integration 向下兼容 Wwise SoundEngine 2022.1。
- **WG-65226** 在 3D 查看器中添加了用于显示过渡区的选项。
- **WG-66632** 现在默认使用 Wwise SoundEngine 的 StaticCRT Windows 构建。
- **WG-68016** 添加了 WwiseResourceLoader 单元测试。
- **WG-68279** 添加了相应函数以确认正在特定 ExecutionQueue 中执行代码。

# API 改进

- **WG-64048** (Spatial Audio) 添加了 `AkSpatialAudioInitSettings::uMaxEmitterRoomAuxSends` 来限制单个发声体可生成的 Game-defined Auxiliary Sends 的最大数量。
- **WG-65130** (Spatial Audio) 移除了 `AkGeometryParams::EnableTriangles`，将其替换为了 `AkGeometryInstanceParams::UseForReflectionAndDiffraction`。
- **WG-66244** (Spatial Audio) 弃用了 `AkGeometryInstanceParams::RoomID`。在未来版本中会移除该参数。建议不要使用 RoomID，最好保留为默认值 (-1)。

# 行为改进

- **WG-61307** Unreal Obstruction/Occlusion 服务现在支持 `AK::SpatialAudio::SetGameObjectToPortalObstruction` 和 `AK::SpatialAudio::SetPortalToPortalObstruction` API 函数。在“发声体”和“听者”游戏对象处在不同 Spatial Audio Room 时，会在同一 Room 内的发声体和 Portal 之间、同一 Room 内的听者和 Portal 之间以及同一 Room 内的 Portal 之间执行声障/声笼检查。向 Unreal Portal 组件添加了名为 Portal Occlusion 的新参数。该参数通过 `AK::SpatialAudio::SetPortalObstructionAndOcclusion` 函数将声笼值应用于 Portal。藉此，针对开门或关门操作对声音进行调节。Unreal Obstruction/Occlusion 服务已移到名为 WwiseObstructionOcclusion 的单独模块。这样用户就可在必要时将该服务切换为自己的服务。

# 性能改进

- **WG-67286** 在 Unreal 5.2 及更高版本上，Integration 现在使用 TTask 和基础 Unreal 线程处理大多数的任务。

# 其他改进

- **WG-62759** 现在将 Rooms and Portals Visualization 切换设置设在了 User Settings 下。
- **WG-65309** 对 Spatial Audio Unreal 用户界面和工具提示做了改进。
- **WG-66557** 不再支持 Unreal Engine 4.27。请使用 Unreal Engine 5.2 或更高版本。

# 漏洞修复

- **WG-63820** 已修复：在关卡流播放期间调用打开/关闭的 Portal 时，UpdateConnectedRooms 当中 Unreal 发生崩溃。
- **WG-64283** 已修复：Reverb Estimation 服务的 `EstimateHFDamping()` 函数给出的值不正确，跟 HF Damping 的定义不一致。
- **WG-64362** 已修复：在 Spatial Audio Volume 名称发生更改时，没有更新相连 Portal 的 Back Room 和 Front Room 的名称。
- **WG-64529** 已修复：Refresh Interval 有可能被设为负值。
- **WG-65139** 已修复：Spatial Audio API 函数 `SetDiffractionOrder`、`SetMaxEmitterRoomAuxSends`、`SetNumberOfPrimaryRays` 和 `SetLoadBalancingSpread` 没有暴露给 Unreal Blueprint。
- **WG-66779** 已修复：在构建好的游戏中计算带有 Auto Assign Aux Bus 的 AkLateReverbComponent 的 T60 Decay 时，FAkReverbDescriptor 触发断言。
- **WG-67317** 已修复：在不带 Ak Event 的 Room 上执行 Post Associated AkEvent 时，Unreal 的指针为 NULL，进而引发崩溃。
- **WG-67343** 已修复：Wwise Browser 和 Reconcile 对话框一次仅列出一个落单素材。
- **WG-67418** 已修复：在将某一关卡添加到另一关卡后执行“撤消”操作时，Unreal 发生崩溃。
- **WG-67848** 已修复：Fit To Geometry 没有根据所撞表面的 Physical Material 来修改 Spatial Audio Volume 的几何构造属性。
- **WG-68315** 已修复：无法在 Server 模式下构建 Wwise Unreal 插件。
- **WG-68516** 已修复：Wwise Browser 中重复显示重命名的条目。
- **WG-68554** 已修复：在没有生成 SoundBank 的情况下连接 WAAPI 并多次生成 SoundBank 时发生崩溃。
- **WG-69004** 已修复：无法在 Content Browser 中发送通过 Reconcile 创建的 Event UAsset。

# 社区报告的漏洞修复

- **WG-60975** 已修复：(Spatial Audio) 在进入具有多个 Portal 的 Room 时，声像摆位突然发生变化。
- **WG-61552** 已修复：`DefaultGame.ini` 被用作 Spatial Audio 素材的数据库。
- **WG-63321** 已修复：构建 Unreal 服务器会导致日志错误并阻止打包。
- **WG-64700** 已修复：在 Unreal Engine 输出 PostLoad 时分派 Blueprint 事件回调会触发断言。
- **WG-65717** 已修复：在射线投射未返回值时，`UAkSurfaceReflectorSetComponent::AssignAcousticTexturesFromSamples()` 没有指派默认值。
- **WG-66785** 已修复：无法在打包好的 Unreal 游戏中更新动态 Room 和 Portal 变换。
- **WG-67619** 已修复：由于 Resource Loader 出现争用问题导致发生崩溃。
- **WG-67950** 已修复：由于在 Portal 组件中使用了原始指针导致发生崩溃。
- **WG-68029** 已修复：在有些情况下，在 `FWwiseExecutionQueue` 中使用 `std::atomic` 会导致发生死锁。
- **WG-68102** 已修复：UE 4.27 因资源加载和卸载而发生崩溃。
- **WG-68115** 已修复：在快速重新打开流播放文件时发生 "Could not open file for asset loading" 错误。
- **WG-68216** 已修复：由于 Switch Container Leaf 重新加载和卸载情况导致发生崩溃。
- **WG-68380** 已修复：在特定单元测试当中，VisualCPP 生成错误的警告。

# 文档改进

- **WG-66140** 向 [Testing with Multiple Play In Editor and Wwise Instances](features_editor_multiplayer.html) 添加了性能分析相关信息。
- **WG-67709** 向 [Combining Unreal and Wwise Audio with AudioLink](using_audio_link.html) 添加了有关如何设置默认 AudioLink 属性并覆盖各个 Unreal 音频素材上的属性的信息。