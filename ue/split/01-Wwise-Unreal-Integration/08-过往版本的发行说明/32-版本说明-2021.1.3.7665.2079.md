# 版本说明 2021.1.3.7665.2079

|  |
| --- |
| Wwise Unreal Integration Documentation |

版本说明 2021.1.3.7665.2079

此 Integration 的各个版本分别与特定的 Unreal Engine 4 版本对应。以下是 Integration 2021.1.3.7665.2079 版本中所作的更改（除升级到新的 Unreal 版本外）。

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 版本不支持实验性的 Unreal Engine 4 功能。 |

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 针对 Unreal Engine 4.23 及更高版本编译，但只针对 Unreal Engine 4.26 进行了测试。 |

有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。

- [新增功能](releasenotes_2021_1_3_2079.html#generic_feature_changes_2021_1_3)
- [API 改进](releasenotes_2021_1_3_2079.html#generic_api_changes_2021_1_3)
- [行为改进](releasenotes_2021_1_3_2079.html#generic_behavior_changes_2021_1_3)
- [其他改进](releasenotes_2021_1_3_2079.html#generic_misc_2021_1_3)
- [漏洞修复](releasenotes_2021_1_3_2079.html#generic_bugs_2021_1_3)
- [社区报告的漏洞修复](releasenotes_2021_1_3_2079.html#generic_community_bugs_2021_1_3)

# 新增功能

- **WG-52844** 为了允许监控 Audio Device 电平表，向 Unreal 暴露了 `{{AK::SoundEngine::RegisterOutputDeviceMeteringCallback`}}。
- **WG-52873** 新的 Blueprint 函数现在使用以下 Spatial Audio API 函数：`SetPortalObstructionAndOcclusion`、`SetGameObjectToPortalObstruction` 和 `SetPortalToPortalObstruction`。
- **WG-53713** 现在支持 Unreal IO Store 打包选项。

# API 改进

- **WG-53512** 向 `AkAudioDevice` 暴露了 `SetRTPCValueByPlayingID`。
- **WG-53543** 以 Short ID 形式向 `FAkAudioDevice` 暴露了 `GetRTPCValue`、`SetRTPCValue`、`SetState` 和 `SetSwitch`。

# 行为改进

- **WG-54766** 现在在卸载媒体素材时会先停止播放媒体，然后等到不用了再卸载，而不是强制卸载。
- **WG-55592** 添加了关闭声音引擎时对 `StopAll` 的调用。

# 其他改进

- **WG-55062** 已修复：Wwise Demo Game 中圆顶建筑的 Reverb Volume 缺少 RoomVerb 引用。

# 漏洞修复

- **WG-54232** 已修复：在 Clear Sound Data 中选择相应选项后无法正常清理落单媒体。
- **WG-54273** 已修复：在结合 External Source 使用异步 PostEvent 调用时，会在发送 Event 之前清理内存中的 External Source 文件名。
- **WG-54493** 已修复：在执行 Clear Sound Data 操作时总是将条目标记为未同步状态。
- **WG-54950** 已修复：在使用 Event-Based Packaging 并将 Event 分组存放到 SoundBank 中时，Unreal Editor 在生成 Sound Data 的过程中发生崩溃。
- **WG-54998** 已修复：GenerateSoundbanksCommandlet 试图签入其无法签出的文件。
- **WG-55086** 已修复：在生成 SoundBank 的过程中解析与 Music Container 通用路径关联的媒体时发生崩溃。
- **WG-55097** 已修复：无法迁移到 Event-Based Packaging。现在通过确保将 InitBank 素材移到相应文件夹解决了这一问题。
- **WG-55201** 已修复：在启用 **Split Switch Container Media** 后，没有加载与 Music Switch Container 的 Generic Path 关联的媒体。现在会自动加载所述媒体以及引用它们的 Event。
- **WG-55229** 已修复：在 Unreal Editor 中删除 Switch Container 所引用的媒体素材时，Editor 发生崩溃。
- **WG-55318** 已修复：在打包构建版本时，WAAPI Picker 可能会引发崩溃。
- **WG-55336** 已修复：在 Undo 后针对 "AkSpatialAudioVolume" Actor 显示了错误 Volume 和 Area 的值。
- **WG-55460** 已修复：在销毁垃圾回收的 Latent Action 后执行与之交互的回调可能会引发崩溃。
- **WG-55591** 已修复：在卸载 Switch Value 素材时无法正常卸载与其关联的媒体。

# 社区报告的漏洞修复

- **WG-51927** 已修复：在验证 DirectoriesToAlwaysCook 时若其包含根文件夹条目就会发生崩溃。
- **WG-53436** 已修复：UAkInputComponent 在一段时间（几秒到几分钟）后意外停止。
- **WG-54287** 已修复：解析程序出现问题，导致无法正确设置 Init Bank 素材的 DefaultLanguage。
- **WG-54729** 已修复：在非 Event Based Packaging 工作流中生成 Sound Data 的过程中解析 SoundBank 信息时，Wwise Unreal 素材被不必要地标记为未同步状态。
- **WG-54843** 已修复：在过早卸载关卡时错误地取消了异步加载请求。
- **WG-54947** 已修复：倘若在处理过程中保存得太早，会无法将素材添加到 GenerateSoundBanksCommandlet 更改列表。
- **WG-55002** 已修复：在异步发送时没有自动清理启用了 Auto Destroy 的 AkComponent。
- **WG-55006** 已修复：在通过卸载关卡将 "FWaitEndOfEventAction" Latent Action 销毁后若仍要对其进行调用就会发生崩溃。
- **WG-55081** 已修复：有时不会为 State 值重新生成 Clear data in assets 所清理的 Wwise UAsset Short ID。现在会在 Unreal Log 中以警告形式报告错误的 Short ID。
- **WG-55107** 已修复：既没有在 AkComponent 的 "PostAkEventAndWaitForEnd" Blueprint 函数中正确设置返回的 Playing ID，也没有在 AkComponent 的 "PostAkEventAndWaitForEndAsync" Blueprint 函数中创建 Latent Action 并发送 Event。
- **WG-55464** 已修复：即便定位无误，AkAcousticPortal 也会返回无效的 Room ID。
- **WG-55578** 将 Wwise 初始化设置中 MONITOR\_QUEUE\_DEFAULT\_SIZE 的默认值更新为了 1 MB。