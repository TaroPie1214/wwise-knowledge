# 版本说明 2022.1.0.8070.2495

|  |
| --- |
| Wwise Unreal Integration Documentation |

版本说明 2022.1.0.8070.2495

此 Integration 的各个版本分别与特定的 Unreal Engine 版本对应。以下是 Integration 2022.1.0.8070.2495 版本中所作的更改（除升级到新的 Unreal 版本外）。 如需查看详细的迁移说明，请参阅 [将工程升级到 Wwise 2022.1](pg_important_migration_notes_2022_1_0.html) 章节。

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 版本不支持实验性的 Unreal Engine 功能。 |

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 针对 Unreal Engine 4.27 和 5.0 编译，并且针对 Unreal Engine 5.0 进行了测试。暂不支持比上述更高的 Unreal Engine 大版本，但后续补丁版本中会提供相应支持。 |

有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。

- [新增功能](releasenotes_2022_1_0_2495.html#generic_feature_changes_2022_1)
- [API 改进](releasenotes_2022_1_0_2495.html#generic_api_changes_2022_1)
- [行为改进](releasenotes_2022_1_0_2495.html#generic_behavior_changes_2022_1)
- [性能改进](releasenotes_2022_1_0_2495.html#generic_perf_changes_2022_1)
- [其他改进](releasenotes_2022_1_0_2495.html#generic_misc_2022_1)
- [漏洞修复](releasenotes_2022_1_0_2495.html#generic_bugs_2022_1)
- [社区报告的漏洞修复](releasenotes_2022_1_0_2495.html#generic_community_bugs_2022_1)

# 新增功能

- **WG-49047** 向 Unreal Level Editor Viewport 添加了相应选项以切换 VisualizeRoomsAndFeatures 的状态。
- **WG-54310** 添加了一个 Auto-defined SoundBank 选项。若启用，Wwise 会在可能的情况下针对每个 Event 和 Aux Bus 自动定义 SoundBank。有关更多详细信息，请参阅[自动定义 SoundBank](https://www.audiokinetic.com/library/edge/?source=Help&id=auto_defining_soundbank)。

用户可通过 SoundBank Settings 启用 Auto-defined SoundBank。有关更多详细信息，请参阅 [SoundBank Settings](https://www.audiokinetic.com/library/edge/?source=Help&id=project_settings_soundbanks_tab)。

- **WG-54325** 向 AkSettings 添加了 ShowReverbInfo 属性。借助该新增属性，可在视口中显示或隐藏有关 AkLateReverbComponent 的信息。
- **WG-54368** Event-Based Packaging 和 Asset Synchronization 现在仅通过 Generated SoundBanks 文件夹来实现。这也称为 Single Source Of Truth (SSOT) 工作流程。
- **WG-56798** 向 Portal 添加了文本以在 Unreal Level Editor 中显示相连 Room 的名称。
- **WG-57544** 添加了 AkEffectShareSet 素材。

添加了相应 Blueprint 函数以在 Bus、Output Device 和 Actor-Mixer 上设置 Effect ShareSet。

- **WG-57973** 现在可通过 "AkMigration" Commandlet 来完成工程迁移。
- **WG-59194** 为了调节 XML 和 WAAPI 的超时时间，针对新的错误消息转换器添加了两项新的 Wwise User Settings。这些设置可在新的 Error Message Translator 分区下找到。
- **WG-60953** 现在会将展示 Wwise 中不同执行段的 Timer Scope 记录到 Unreal 的 CPU 性能分析器中并显示在 Timing Insights 中，以便更好地了解 Wwise CPU 时间都花在了什么地方。另外，与 Voice Starvation 相关的事件还会作为书签记录在 Timing Insights 中。
- **WG-61215** 添加了完全异步的素材加载和卸载。

# API 改进

- **WG-55810** 现在通过 WwiseExternalSourceManager 接口管理对外部源（External Source）的处理，其提供用于加载媒体的默认功能和类，但必须由用户加以扩展才能完全发挥作用。
- **WG-55811** 添加了对 WwiseExternalSourceManager 的最小实现 WwiseSimpleExternalSourceManager 并用在了 Wwise Demo Game 中。
- **WG-56507** TryUnsetMedia 现在会发布异步停止命令并将媒体标记为不可用，以确保最终能够成功实现对 TryUnsetMedia 的重复调用。
- **WG-57220** 向 FAkAudioDevice 类添加了 Obstruction 和 Occlusion 调用。
- **WG-59008** 底层声音引擎现在被放在了 WwiseSoundEngine 模块中。
- **WG-60672** AkAudioDevice 中的 PostEvent 函数现在具有更加明晰的名称，并且仅接收 UAkAudioEvent 对象或 ShortId 作为参数来指定 Event。
- **WG-61185** 将 `FAkAudioDevice::SetOcclusionAndObstruction` 重命名为了 `FAkAudioDevice::SetObjectObstructionAndOcclusion` 以与 Wwise SDK API 保持一致。
- **WG-61754** Blueprint 中的 PostEvent 调用不再支持 External Source。弃用了以 Event ShortID 或 Event Name 作为参数的 PostEvent 调用。弃用了异步 PostEvent 调用。

# 行为改进

- **WG-56246** 现在可使用 Blueprint 或 C++ 来在运行时更改 Mastering Suite ShareSet。
- **WG-57541** 移除了 Automatic Asset Synchronization。
- **WG-57543** 现在禁止通过 WAAPI 自动同步 Unreal 素材。
- **WG-57545** 添加了相应菜单项以从 Wwise Picker 或 WAAPI Picker 导入 Wwise 素材。
- **WG-57546** 现在可直接将素材从 Wwise Picker 和 WAAPI Picker 拖到 Blueprint、对象属性和 Content Browser 中。
- **WG-58218** 现在可同时使用 Wwise Picker 和 WAAPI Picker。
- **WG-60762** (Spatial Audio) 使用 `AK::SpatialAudio::SetEarlyReflectionsVolume` 的早期反射音量设置现在适用于使用 `AK::SpatialAudio::SetImageSource` 的镜像声源以及通过几何构造计算的反射。
- **WG-60907** 针对所有平台将 "Samples Per Frame" 初始化设置的默认值改为了 512。这样会略微增加 Wwise 中的即时可用 CPU 用量，但可以大幅缩短声音引擎中的总计音频延迟。为了实现游戏的总计音频延迟和可用计算资源之间的平衡，仍建议对 "Samples Per Frame" 和 "Number of Refills In Voice" 进行适当调节。
- **WG-60985** Time To First Reflection 变量的单位由秒改为了毫秒。之前映射到此变量的 Game Parameter 现在必须以毫秒而非秒为单位。
- **WG-61088** 现在不再默认加载 WwiseAudioMixer。
- **WG-61630** DefaultGame.ini 配置文件中定义的所有平台特定 AkAudio.AkInitializationSettings 现在都存储在其平台特定 Game.ini 文件中（如适用）。DefaultGame.ini 中的现有设置仍然正常加载，但所作修改将自动保存到平台特定 Game.ini。
- **WG-61703** 现在会将 Wwise 声音引擎监控器消息写入 LogWwiseMonitor 类别。
- **WG-61968** 移除了 Clear Wwise Cache 选项。在必要时，可使用 Wwise 设计工具来清理缓存。

# 性能改进

- **WG-60585** 现在对流播放媒体使用异步文件操作。

# 其他改进

- **WG-49994** 更新了 "AkAcousticPortal" 和 "AkSpatialAudioVolume" Actor 中的 CollisionChannel 属性以及 AkComponent 中的 OcclusionCollisionChannel 属性。这些属性现在设有 Use Integration Settings Default 选项，其将使用 Wwise Integration Settings 中定义的值。
- **WG-57979** 更新了 AkAcousticPortal 组件，以免对 OpenPortal 和 ClosePortal 的调用发生堆叠。
- **WG-58066** 移除了已被弃用的 AkFolder 素材。
- **WG-60370**: Added support for Visual Studio 2022
- **WG-60852** 将 Wwise Demo Game 的 Wwise 工程从 "UnrealWwiseDemo" 文件夹移到了 "Wwise Project" 文件夹。
- **WG-61144** 降低了关于 Portal 的 Front Room 与 Back Room 相同的 AkAcousticPortal 消息的严重性。现在将其归为日志而非警告。
- **WG-61216** Wwise 模块不再使用 Subsystem。
- **WG-61500** 现在 Havok 和其他物理引擎可使用 Wwise Unreal 集成。

# 漏洞修复

- **WG-54552** 已修复：(Spatial Audio) 穿过 Portal 的路径不精确；直线路径有时会出现非零衍射或路径与 Portal 完全错开。
- **WG-57304** 已修复：在使用较大值来定位 Surface Reflector 组件时，在 Brush Editing 模式下选中单个表面后无法对其进行编辑。
- **WG-57354** 已修复：在发送到 Wwise 时没有正确转换平面几何构造，导致 Game Object 3D Viewer 中的几何构造出现问题。
- **WG-60315** 已修复：在将素材从 Wwise Picker 拖到已存在该素材的 Content Browser 中时发生崩溃。
- **WG-61042** 已修复："SetOcclusionScalingFactor" 和 "GetOcclusionScalingFactor" Blueprint 函数不起作用。
- **WG-61121** 已修复：Clear Sound Data 对话框具有无用的选项和误导性的名称。该对话框现已改名为 Clear Wwise Cache。
- **WG-61125** 已修复：Server 和 Client Unreal 构建无法找到正确的平台。
- **WG-61129** 已修复：在 Standalone Game 模式下听不到声音。
- **WG-61242** 已修复：同步执行了与 External Source 相关的更改。
- **WG-61266** 已修复：在通过从 Wwise Picker 拖动来创建素材时可能会发生崩溃。
- **WG-61518** 已修复：Spatial Audio Tutorial 的 Blueprint Building 中的 Room 比其 Geometry 还大，且无法与对应 Geometry Component 关联以估算 HF Damping。
- **WG-61525** 已修复：FAkSurfaceReflectorSetDetailsCustomization 的析构函数发生崩溃。
- **WG-61658** 已修复：Switch Container 中的插件媒体和 External Source 没有被 WwiseProjectDatabase 正确解析。

# 社区报告的漏洞修复

- **WG-60332** 已修复：用来设置 Wwise Project Path 的对话框考虑 Wwise 工程文件夹而非 GeneratedSoundBanks 文件夹。
- **WG-60969** 已修复：(Spatial Audio) 在听者位置与 Portal 重叠时，使用衍射的发声体可能会变得不可闻。
- **WG-61202** 已修复：在停止 Play in Editor 会话时会停止 AkAudioMixer。
- **WG-61226** 已修复：在暂停 Play in Editor 会话时不会暂停声音。
- **WG-61291** 已修复：在 Editor 启动时更新了 DefaultGame.ini。
- **WG-61334** 已修复：在移动表面时重置了 AkSpatialAudioVolume 的对应表面特定声学信息。
- **WG-61790** 已修复：在计算 Static Mesh 的情况下向较为复杂的 Mesh 添加 AkGeometry 会导致 Unreal 卡顿。
- **WG-61953** 已修复：在构建过程中遇到空的素材时显示错误而非警告。