# 版本说明 2021.1.8.7831.2285

|  |
| --- |
| Wwise Unreal Integration Documentation |

版本说明 2021.1.8.7831.2285

此 Integration 的各个版本分别与特定的 Unreal Engine 4 版本对应。以下是 Integration 2021.1.8.7831.2285 版本中所作的更改（此外还升级到了新的 Unreal 版本）。 [重要迁移说明 2021.1.8.7831.2285](pg_important_migration_notes_2021_1_8.html)

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 版本不支持实验性的 Unreal Engine 4 功能。 |

|  |  |
| --- | --- |
|  | **注記：** 此 Integration 针对 Unreal Engine 4.26、4.27 和 5.0 编译，并且针对 Unreal Engine 4.27.2 和 5.0.1 进行了测试。暂不支持比上述更高的 Unreal Engine 大版本，但后续补丁版本中会提供相应支持。 |

有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。

- [新增功能](releasenotes_2021_1_8_2285.html#generic_feature_changes_2021_1_8)
- [行为改进](releasenotes_2021_1_8_2285.html#generic_behavior_changes_2021_1_8)
- [其他改进](releasenotes_2021_1_8_2285.html#generic_misc_2021_1_8)
- [漏洞修复](releasenotes_2021_1_8_2285.html#generic_bugs_2021_1_8)
- [社区报告的漏洞修复](releasenotes_2021_1_8_2285.html#generic_community_bugs_2021_1_8)

# 新增功能

- **WG-54828** 现在可在 Unreal Content Browser 中使用新的选项来清除各个 Wwise 素材的 Sound Data。这样方便在将 Sound Voice 改为 Sound SFX（反之亦然）后执行必要的 Sound Data 清除操作。
- **WG-59571** 添加了对 Unreal 5.0.1 的支持。

# 行为改进

- **WG-58889** 现在会在结束 Play in Editor 会话时停止播放所有声音。
- **WG-59966** Integration 不再在加载时自动更正素材中的 ShortID。若在 Output log 中看到 Invalid ShortID 警告，请重新生成 Sound Data 并保存修改的所有素材。

# 其他改进

在本地输出中提前报告 Wwise 初始化错误。

- **WG-56843** 现在默认对 `UPROPERTY` 进行初始化。

# 漏洞修复

- **WG-54251** 已修复："Clear Sound Data" 工具没有移除本地化 Unreal 素材数据。
- **WG-59502** 已修复：同一媒体可能多次调用 SetMedia，导致发生内存泄漏。
- **WG-59589** 已修复：Unreal 中未被任何素材引用的 SoundBank 素材将所有 Event 添加到其 Linked Events 列表（这一问题不会影响 SoundBank 行为，但会对 Editor 的性能造成负面影响）。
- **WG-60163** 已修复：在 Wwise 中重新导入音频源并重新生成 Sound Data 后没有在Unreal Editor 中更新内存中的媒体。
- **WG-60218** 已修复：在未使用 Event-Based Packaging 时发生打包错误。
- **WG-60252** 已修复：在 Sound Voice 上添加 Convolution Reverb 时显示“无法设置自动加载”错误。
- **WG-60254** 已修复：本地化媒体发生 `AkMediaMemoryManager::ReleaseMediaMemory`: Negative RefCount 错误。
- **WG-60263** 已修复：在游戏启动时触发 RecursionNotAllowed 断言。

# 社区报告的漏洞修复

- **WG-50111** 已修复：在将本地化 Event 分组存放到 SoundBank 中时更改语言会导致错误。
- **WG-50220** 已修复：在通过 "Set Current Audio Culture" Blueprint 更改 Audio Culture 时发生崩溃。
- **WG-51577** 已修复：在加载关卡后马上更改本地化可能会引发崩溃。
- **WG-53151** 已修复：对于加载关卡（比如从 Level Sequence 时间线）后立即发送的 Event，本地化媒体数据加载得太晚了。
- **WG-55967** 已修复：在从 Content Browser 预览时无法播放本地化 Event。
- **WG-56459** 已修复：在两个地图之间切换而两者播放引用同一媒体的 Event 时会发生崩溃。
- **WG-56793** 已修复：对 Switch Container 中的本地化语音进行流播放有时会导致其无法播放。
- **WG-56935** 已修复：在地图过渡过程中若在播放 Event 会发生崩溃。
- **WG-57378** 已修复：向 Unreal DirectoryWatcher API 传递了错误的标记。
- **WG-57751** 已修复：无法正常加载启用了 Split Switch Container Media 的 Switch Container 中的本地化媒体。报告在 Sound Data 生成期间媒体被同时解析为流播放和非流播放，导致出现播放问题。
- **WG-58000** 已修复：没有很好地优化 `UAkSettings::OnAssetAdded`。
- **WG-58616** 已修复：缺少本地化媒体，导致无法切换到新的区域设置。
- **WG-58659** 已修复：在使用原有 SoundBank 时地图加载时间较长。
- **WG-59006** 已修复：在转换改变时没有更新 Unreal Spatial Audio Portal。
- **WG-59266** 已修复：没有迁移 AkPoly 和 AkEdgeInfo（在 2021.1.4 中分别重命名为了 AkSurfacePoly 和 AkSurfaceEdgeInfo）。
- **WG-59294** 已修复：在后续加载的两个关卡中发送时无法播放流播放的声音。
- **WG-59295** 已修复：Unreal Integration 的 AkRoomComponent.cpp 中存在未使用的变量。
- **WG-59440** 已修复：在 "GenerateSoundBanks" Commandlet 中指定不存在的平台作为参数时没有在日志中显示警告消息。
- **WG-60111** 已修复：在工程中存在 Wwise Convolution Reverb 效果器的情况下通过 WAAPI 生成 Sound Data 会发生崩溃。
- **WG-60162** 已修复：在 Media Asset Data 检查其是否需要在开始加载父级媒体素材前卸载时死机。
- **WG-60165** 已修复：在 Commandlet 中构建 Sound Data 时死机。
- **WG-60208** 已修复：在将 `UAkAssetDataSwitchContainer` 默认对象序列化时，日志中显示 "Event data not up to date" 警告消息。
- **WG-60233** 已修复：无法在 Linux Server build 上进行构建。