# 排查工程的问题

[Wwise 帮助文档](../../00-Wwise-帮助文档.md) > [设置工程](../00-设置工程.md) > [处理工程](00-处理工程.md) > 排查工程的问题

## 排查工程的问题

在 Wwise 中，一般可通过以下两种方式探查工程内出现的问题：

- [“使用 Logs 视图”一节](04-排查工程的问题.md#using_logs_view "使用 Logs 视图")
- [“使用 Integrity Report”一节](04-排查工程的问题.md#using_the_integrity_report "使用 Integrity Report")

### 使用 Logs 视图

通过 [Wwise 工具栏](../../02-入门/03-Wwise-界面基础知识/00-Wwise-界面基础知识.md "Wwise 界面基础知识")的日志标志，可快速查看工程中显示的消息、警告和错误。如需了解更多详细信息，请将鼠标悬停在标志上。

|  |
| --- |
|  |

若要查看所列日志条目的全部信息，请单击标志以便打开 Logs（日志）视图。其中的五个选项卡涵盖了 Wwise 工程中可能遇到的所有问题。

|  |
| --- |
|  |

对于包含日志条目的选项卡，每个都会以图标显示其中最高的严重级别。您必须排除所有 Error（错误），因为其会影响操作的完整性。Fatal Error（严重错误）甚至会导致无法完成操作。Warning（警告）可能会影响操作的完整性，所以要加以评估。Message（消息）应该问题不大，但其提供有宝贵的信息，便于了解 Wwise 工程的运行情况。若日志中没有任何条目，则选项卡不会显示“严重级别”图标。

  

|  |  |
| --- | --- |
| [技巧] | 技巧 |
| Logs 视图选项卡中的所有列标题都可单击排序，以便高效地管理条目。比如，可按严重级别的高低来对 Severity（严重性）列进行排序（从低到高或从高到底）。 |

### 使用 Integrity Report

您可以通过生成完好度报告来检查工程的状态。完好度报告中显示有关平台、音频文件 SoundBank 和插件问题的信息。通过检查此报告，您可以处理许多工程问题，例如：

- 缺失的媒体文件
- 缺少源，例如缺失语言版本
- 插件问题
- SoundBanks 缺少对象
- SoundBanks 的渲染和旁通效果问题
- SoundBanks 的渲染和 RTPC

除了显示工程问题外，完好度报告还提供包括下列问题的信息：

- **Platform**：平台。发生问题的平台。
- **Type**：类型。受影响的对象类型。
- **Object name**：对象名称。受影响的对象或元素的名称。
- **Status**：状态。问题的描述。
- **Comments/Suggestions**：备注/建议。有关如何处理问题的信息和建议。
- **Hierarchy**：层级结构。层级结构中受影响对象的位置。

### 生成 Integrity Report

在 Wwise 工程开发期间，您可以随时生成完好度报告。生成 SoundBank 之前，建议先生成完好度报告。如果您也使用了版本控制软件，则应在提交各 Work Unit 中的重大更改之前生成该报告。

为简化特定问题类型的查找，您还可以通过指定要生成的信息类型来筛选此报告。您可以限制报告显示下列任意或全部内容：

- 音频文件和源
- 层级结构
- 参考源
- 优化

在生成报告后，您可以仔细查看报告中的各个问题，然后双击各个问题来执行建议的修复办法。例如，双击内容为“No group assigned to the Switch Container”（无编组被分配到切换容器）的状态消息，将打开 Property Editor，在此您可以将 Switch Group 或 State Group 分配给 Switch Container。

**生成完好度报告的方法是：**

1. 在 Wwise 菜单栏中，点击 **Views > Integrity Report**。

   此时将打开 Integrity Report。
2. 若要定义要在 Integrity Report 中包含哪些平台问题，请在 **Platforms** 分组框中选择一个或多个工程平台（如 [“Platform Manager”一节](../../09-参考主题/01-工程/09-Platform-Manager/00-Platform-Manager.md "Platform Manager") 中定义）。
3. 若要定义要在 Integrity Report 中包含哪些工程语言问题，请在 **Languages** 分组框中选中 **Languages** 选项并选择相应的语言。
4. 要筛选工程问题类型，则要选择以下若干项内容：

   音频文件和源

   层级结构

   引用失效

   优化
5. 点击 **Generate**。

   此时进度条将显示生成过程的状态。
6. 当 Wwise 完成生成完好度报告时，点击 **Close**（关闭）。

   这时会关闭 Integrity Report - Completed（完好度报告 - 完成）对话框并显示 Integrity Report。

   |  |  |
   | --- | --- |
   | [备注] | 备注 |
   | 在关闭 Integrity Report 对话框时，并不会保存相应的信息。如果您打算以后查看这些信息，则一定要保存该报告。有关使用完好度报告的详细信息，请参阅[“保存 Integrity Report”一节](04-排查工程的问题.md#saving_an_integrity_report "保存 Integrity Report")。 |
7. 双击问题来打开对应的对话框，以便加以修复或修改问题状态。

### Integrity Report 问题

下表列出了工程中检测到的可能问题，以及如何纠正这些问题。

| 问题 | 信息/建议 |
| --- | --- |
| 找不到原始音频文件。 | 执行以下操作之一：  - 将缺失的文件拖到 Originals 文件夹。 - 使用 Audio File Importer（音频文件导入程序）导入缺失的文件。 |
| 音频源缺失。 | 双击消息以在 SFX Project Explorer 的 Audio 选项卡中和语音的 Contents Editor 中查看缺失的源。 |
| 平台上不支持源插件。 | 双击消息以打开 Contents Editor，在此您可以选择当前平台支持的源插件。 |
| 没有安装源插件。 | 安装源插件。 |
| 缺少语言源。 | 使用 Audio File Importer 导入缺少的语言源。 |
| 选定的编解码器不支持此源的声道配置。 | 在转码前，Wwise 将自动下混源。双击消息并更改编解码器（音频格式）或声道设置。 |
| 平台上不支持音频效果插件。 | 双击消息以打开 Property Editor，在此您可以选择当前平台支持的效果插件。 |
| 没有安装音频效果插件。 | 安装缺少的音频效果插件。 |
| Render Effect（将效果器渲染到 SoundBank 中）已经应用于非音频文件的“使用中的”源。 | 源插件不支持渲染效果。双击消息以执行以下操作之一：  在 Property Editor 中，取消选中渲染效果选项。  在 Contents Editor 中，选择所引用音频文件状态为“In Use”（使用中）的音频源。 |
| 必须渲染选定的效果。 | 双击以打开 Property Editor 并执行以下操作之一：  为效果器选择 Render 选项。  更改使用的效果器。 |
| 先对效果做渲染可以节省 CPU，因为在游戏中将不会改变其参数。 | 双击打开 Property Editor 并选择 **Render** 复选框。 |
| 已旁通此对象上的效果。将忽略渲染效果。 | 由于不能同时支持这两个操作，因此请验证渲染效果对您项目的重要性。如果想应用渲染效果选项，则要取消选中 Bypass Effect（旁通效果）。 |
| 已为此对象的 RTPC 指定 Bypass Effect 属性。将忽略渲染效果。 | 由于不能同时支持这两个操作，请验证 Render effect 操作和 RTPC 驱动的 Bypass effect 操作对项目的重要性。如果您想应用 Render 效果器选项，则需取消选中对象上的 RTPC 驱动的 Bypass 效果。 |
| RTPC 已应用于该对象的效果器。将忽略渲染效果。 | 由于不能同时支持这两个操作，因此请验证已经应用的 RTPC 或渲染效果对项目的重要性。如果您要应用渲染效果，则要取消选中 RTPC。 |
| 此虚声部行为需要 Seek Table（文件寻址表）。 | 双击消息来打开 Conversion Settings 对话框并根据需要执行以下操作：  - 在 Vorbis Encoder Parameters 对话框中启用 Seek Table。 - 更改文件格式。 |
| 此虚声部行为不需要 Seek Table。 | 为减少内存占用，您可以弃用 Seek Table。双击消息来打开 Conversion Settings 对话框，并在 Vorbis Encoder Parameters 对话框中禁用 Seek Table。 |
| Vorbis 格式的音乐对象需要 Seek Table。 | 双击消息来打开 Conversion Settings 对话框并根据需要执行以下操作：  在 Vorbis Encoder Parameters 对话框中启用 Seek Table。  更改文件格式。 |
| 此容器中的子对象没有分配给 Switch。 | 双击消息以打开 Project Explorer 和相应 Property Editor，在此您可以执行以下操作之一：  移除未分配的对象。  将对象指派给 Switch。 |
| 没有组指派给 Switch Container。 | 双击以打开 Property Editor，并将 Switch Group 或 State Group 指派给 Switch Container。 |
| Switch Container 中没有对象指派给了 Switch。 | 双击以打开 Contents Editor，并将对象指派给 Switch Container 中的 Switch。 |
| 没有组指派给 Music Switch Container。 | 双击以打开 Property Editor，并将 Switch Group 或 State Group 指派给 Music Switch Container。 |
| 没有音乐对象指派给此容器中的 Switch。 | 双击以打开 Music Switch Association Editor（音乐切换关联编辑器），在此您可以将音乐对象指派给 Switch。 |
| Sequence Container 的播放列表中没有指派好的对象。 | 双击以打开 Contents Editor，在此您可以将对象指派给播放列表。 |
| 音乐播放列表容器的播放列表中没有指派好的对象。 | 双击以打开 Music Playlist Editor（音乐播放编辑器），并将音乐对象指派给播放列表。 |
| Blend Container 中的混合轨没有指派好的对象。 | 双击以打开 Blend Track Editor，在此您可以执行以下操作之一：  添加对象到混合轨中。  移除混合轨。 |
| Music Segment 内的音乐轨中不包含音频文件。 | 双击以打开 Music Segment Editor（音乐段落编辑器），在此您可以执行以下操作之一：  添加片段到音乐轨中。  删除音乐轨。 |
| SoundBank 在引用不复存在的对象。 | 从 SoundBank 中删除事件或对象。 |
| Event Action 中没有指派对象。 | 双击并打开 Event Editor 来执行以下操作之一：  给这些 Action 指派对象。  移除 Event Action。 |
| 在 Dialogue Event 中的路径没有指派对象。 | 双击以打开 Dialogue Event Editor（对白事件编辑器）并执行以下操作之一：  将对象指派给路径。  移除路径。 |
| 此精确到采样点的容器中的部分子对象没有使用与父容器相同的输出属性。 | 父容器采样可能不再精确到采样点。双击以打开 Schematic View（原理图视图），对于精确到采样点的容器中的子对象，当它们有任何不沿用父对象输出的设定时，您可以在此取消这些设定。 |
| 精确到采样点的容器中的部分子对象没有使用与父容器相同的效果属性。 | 父容器采样可能不再精确到采样点。双击以打开 Schematic View，对于精确到采样点的容器中的子对象，当这些对象有任何不沿用父对象效果器的设定时，您可以在此取消这些设定。 |
| 此精确到采样点的容器中的部分子对象没有使用与父容器相同的高级设置属性。 | 父容器采样可能不再精确到采样点。双击以打开 Schematic View，对于精确到采样点的容器中的子对象，当这些对象有任何不沿用父对象的高级设定时，您可以在此取消这些设定。 |
| 此精确到采样点的容器的部分容器没有达到精确到采样点。 | 父容器采样可能不再精确到采样点。双击以打开 Project Explorer，并将精确到采样点的容器中的非精确到采样点的子容器更改为精确到采样点。 |
| 此精确到采样点的容器拥有子 Switch Container。 | 父容器采样可能不再精确到采样点。双击以打开 Project Explorer，从而移除 Switch Container。 |
| 此精确到采样点的容器中的音频源与容器中其它音频源的声道数量不一样。 | 父容器采样可能不再精确到采样点。验证此容器的所有音频源都具有相同数量的声道。 |
| 某些音频文件时间短于 0.05 秒钟。它们不可用于 crossfade（交叉淡变）过渡。 | 双击以打开 Project Explorer，找到由于音频文件过短而不适合交叉淡变过渡的关联声音对象，并执行以下操作之一。  将时长更长的另一个音频文件拖放到声音对象上。  在父对象的 Property Editor 中，选择另一个过渡类型。 |
| 多个 Switch Container 中有多个对象指派给了某个 Switch，这些 Switch Containers 没有正确地进行交叉淡变。 | 双击以打开 Project Explorer，并在相关联的 Property Editor 中确保只有一个对象指派给一个 Switch，以便实现交叉淡变过渡。 |
| 触发速率间隔小于 0.021 秒的容器可能无法按预期播放。 | 双击打开 Property Editor，将触发速率间隔改为 0.021 秒以上。 |
| 此源只包含 LFE 声道。 |  |
| 此源包含 LFE 声道。 |  |

### 保存 Integrity Report

保存完好度报告是一个好办法，这样可以方便您查看报告，从而帮助解决工程中的问题或者为问题保留一份记录。

**保存完好度报告的方法是：**

1. 在完好度报告中，点击 **Save Report**（保存报告）。

   这时会打开 Save As（另存为）对话框。
2. 前往您要保存报告的文件夹。
3. 将默认报告名称替换成最适合此报告内容的名称，然后点击 **Save**（保存）。

   完好度报告将作为文本文件保存在您指定的位置。

---