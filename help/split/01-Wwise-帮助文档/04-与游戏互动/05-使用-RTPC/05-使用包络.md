# 使用包络

[Wwise 帮助文档](../../00-Wwise-帮助文档.md) > [与游戏互动](../00-与游戏互动.md) > [使用 RTPC](00-使用-RTPC.md) > 使用包络

## 使用包络

包络用于将属性值控制在预定义的形状内。包络具有 [ADSR](../../14-词汇表.md#glossary_adsr "ADSR (Attack-Decay-Sustain-Release")") 形状：

| 界面元素 | 描述 |
| --- | --- |
| Attack Time | 起音时间。定义了当琴键第一次被按下时，电平从零值上升至峰值所用的时间。  单位：s  Default value: 0.2  Range: 0 to 10000 |
| Attack Curve | 起音曲线。把起音曲线的斜率从线性的默认斜率（50%）调整到其它形式：  - 指数风格的包络（0%），其变化速率在最开始较慢，随后逐渐变快 - 对数包络（100%），其变化速率在最开始较快，随后逐渐变慢  单位：%  Default value: 50  Range: 0 to 100 |
| Decay Time | 衰减时间。指随后从起音电平下降到指定延音电平所用的时间。  单位：s  Default value: 0.2  Range: 0 to 10000 |
| Sustain Level | 延音电平。指在释放按键前，声音持续期间主序列的电平。  单位：%  Default value: 100  Range: 0 to 100 |
| Release Time | 释音时间。指释放按键后电平从延音电平衰减到零值所用的时间。  单位：s  Default value: 0.5  Range: 0 to 10000 |
| Scope | 作用域。定义如何创建包络实例：  - **Voice**:**Voice**（声部）：为每个声音/对象播放创建的包络实例。 - **Note/Event**:**Note/Event**（音符/事件）：为每个播放实例或在 MIDI 环境中使用时的音符创建一个包络实例。  Default value: Note or Event |
| Trigger On | 可能触发包络（即进入起音段）的 Action/MIDI Event：  - **Play**:Play Action 或 MIDI Note 事件 - **Note-Off**:仅 MIDI Note-Off 事件  Default value: Play |
| Auto Release | 决定是否需要 Action/MIDI Event 才能让包络退出延音段，并进入释音段。如果进行了设置，则该包络将在经过了 **Sustain Time**（延音时间）后退出延音段。如果没有设置，则该包络将在特定情形下退出延音段：  游戏可通过 [Release Envelope](../../09-参考主题/04-Project-Explorer/02-Events-选项卡/01-Event-Editor/01-Event-Action-列表.md#release_envelope) 事件让包络进入释音段。  如果包络是由 MIDI Note-On Event 触发，还可以通过 MIDI Note-Off Event 让其进入释音段。  Default value: false |
| Maximum Sustain Time | 延音时间。定义了该包络在进入释音段之前，在延音段中维持的时间。如果已设置 **Auto Release**，则此值有效。  单位：s  Default value: 0  Range: 0 to 10000 |
| Stop playback after release | 在释音后停止播放。如果进行了设置，则被关联声音的播放将在释音段完成以后终止。  Default value: true |

包络既可用在 MIDI 环境中，也可用在正常播放环境中。

用在 MIDI 环境中时，包络配置成在 Note-On 或 Note-Off（音符停止）的方式下播放声音。如果以 Note-On 的方式播放声音：

- 包络配置成在 Note-On 时触发（**Trigger On** 参数）。
- 包络一直持续到第一次出现以下情况：

  - 收到 **Release Envelope** 事件，
  - 收到 MIDI Note-Off 事件，
  - 出现延音段的最大时长（设置了 **Auto Release**）。

如果以 Note-Off 的方式播放声音：

- 包络配置成在 Note-Off 时触发（**Trigger On** 参数）。
- 包络一直持续到第一次出现以下情况：

  - 收到 **Release Envelope** 事件，
  - 出现延音段的最大时长（设置了 **Auto Release**）。

当用于播放声音的一般环境中时：

- 包络配置成遇到播放动作时触发（**Trigger On** 参数）。
- 包络一直持续到第一次出现以下情况：

  - 收到 **Release Envelope** 事件，
  - 出现延音段的最大时长（设置了 **Auto Release**）。

|  |  |
| --- | --- |
| [注意] | 注意 |
| LFO 和 Envelope（包络）调制器的处理时间取决于其 RTPC 用法。对于大部分属性，将在每个音频控制帧对调制器进行估值。不过，对于 **Voice Volume**（声部音量）属性，将在每个音频采样帧对这些调制器进行估值。请有选择地使用这些调制器，因为它们会占用相当大一部分平台内存和 CPU 资源。 |

|  |  |
| --- | --- |
| [备注] | 备注 |
| LFO 和 Envelope 调制器的 RTPC 光标并不能指示其所在时间点的具体值，因为该值是由调制器的内部属性决定的。 |

### Using envelopes with MIDI objects

包络可用于控制属性值和声音的时长。Release 完成时，包络可以停止声音播放。

**To add a Voice Volume envelope to an Containers hierarchy object (instrument):**

1. In the Project Explorer, select an object in the Containers hierarchy.
2. In the Primary Editor, go to the RTPC tab.
3. 点击 RTPC 列表中的 [>>] 按钮。
4. 从选择器菜单中，选择 **Voice Volume**。
5. 点击 X 轴的 [>>] 按钮
6. 在选择器菜单中，选择 **Envelope > Default (Custom)**
7. 点击 [...] 按钮以编辑包络
8. 编辑曲线以设置调制范围。

---