# 处理 MIDI

[Wwise 帮助文档](../00-Wwise-帮助文档.md) > [创建互动音乐](00-创建互动音乐.md) > 处理 MIDI

## 处理 MIDI

In addition to AMB and WAV files, MIDI files can be used with music objects. These file types, once imported, are used to create clips, contained in one or many Music Segment tracks. 就 WAV 片段而言，各个片段都是独立的声音源。然而，MIDI 片段仅包含要播放的音符；必须使用 MIDI 乐器来解释这些音符。The instrument interprets all MIDI Events generated by one or many MIDI clips targeting it.

By default Wwise displays middle C as C4, but this is configurable. 请参阅 [“Setting the MIDI middle-C mapping”一节](../02-入门/04-个性化您的工作空间/04-设置用户偏好.md#user_prefs_midi "Setting the MIDI middle-C mapping")。

## Importing MIDI files

MIDI files can be imported into Music Clips. MIDI files can't be imported into other objects in the Containers hierarchy.

创建 MIDI 片段的方式与 WAV 片段完全相同。有关如何使用文件创建片段的详细信息，请参阅[“为音轨添加内容”一节](04-使用-Music-Track-和-Music-Segment/04-为音轨添加内容.md "为音轨添加内容")。

**使用拖放方式导入 MIDI 文件的方法是：**

1. Drag a MIDI file from Windows Explorer or Mac Finder to any location in the Containers hierarchy.

   **Audio File Importer** 将打开。
2. 点击 **Import** 以完成导入操作。

|  |  |
| --- | --- |
| [备注] | 备注 |
| 在拖放期间按住 CTRL 可旁通 Audio File Importer 对话框。 |

**使用 Audio File Importer 导入 MIDI 文件的方法是：**

1. 在 Project Explorer 中选择要导入 .mid 的位置。
2. 使用键盘快捷键 **(Shift + I)** 打开 Audio File Importer。
3. Click the **Add Files** button
4. 找到 MIDI 文件，然后点击 OK。
5. 再次点击 OK，以完成导入操作。

## 理解 MIDI 内容和 MIDI 目标

MIDI 文件引用存储在音乐轨和段落中包含的音乐片段内。MIDI 片段只包含源 MIDI 信息：音符、弯音、CC。它们并不定义用于播放的乐器。用于播放的乐器由音乐段落和其它上层音乐对象中的 MIDI 目标（MIDI target）引用定义。

- MIDI playable instruments must be created and stored in sound or motion objects.
- MIDI 可播放乐器使用声音常用的标准对象结构。

**例如：**

- Instrument Work Unit

  - Piano (Blend Container)
  - Drum Kit (Sound SFX)

- Music Work Unit

  - Song (Music Segment)

    - Piano Track (Music Track with MIDI clips)
    - Drum Track (Music Track with MIDI clips)
    - Guitar (Music Track with audio clips)

在前例中：

- The **Piano Track** has a **MIDI
  target** reference to the **Piano** Blend
  Container object.
- The **Drum Track** has a **MIDI
  target** reference to the **Drum Kit** Sound SFX
  object.
- **>Guitar Track** 没有 **MIDI 目标**。

When playing a Music Segment with MIDI clips, the MIDI clip sends MIDI data to the
specified MIDI target. The MIDI target (or instrument), located in a sound or motion object,
receives the MIDI data and plays according to its MIDI settings.

**To specify a MIDI target on a music object:**

1. Select a music object (Music Track, Music Segment, or any parent).
2. In the Property Editor, enable **Override Parent** (if
   applicable).
3. Click browse to browse to a MIDI target instrument.

有关详细信息，请参阅[*创建 MIDI 乐器*](06-创建-MIDI-乐器.md "创建 MIDI 乐器")。

## Mixing MIDI and audio content

When MIDI content is played, the music object sends MIDI data to the MIDI target (the
instrument), located in a sound or motion object. The content played by the MIDI target plays in the
context of the audio structure, not in the context of the MIDI source. This means the voice
properties on music objects do not affect the instrument being played.

For example, the Voice Volume on a Music Segment or Music Track doesn't affect a piano
instrument, located on a Sound SFX object. To modify the voice volume of the piano, you must
modify the Voice volume on the Piano object directly, not on the MIDI source.

为了帮助混音，可创建一个总线层级结构，将乐器内容与音乐音频内容组合起来。Routing the instrument and the music track to the same bus provides a single audio mixing point.

## Understanding MIDI tempo

There is a significant difference between a MIDI clip and a WAV clip. A WAV clip's duration is determined by the content of the source file, while the duration of a MIDI clip depends on the tempo used. The tempo used is determined by the Tempo Source property.

MIDI files typically contain the tempo information for playback at the right speed.
Sometimes this tempo information conflicts with the tempo information found in the music
objects (Music Segment and its parents). You can choose to use either the tempo of the source
MIDI file or the tempo of the MIDI clip's ancestors.

下表列出了可能的速度源：

| 速度源 | 定义 |
| --- | --- |
| 文件 | 使用 MIDI 文件中包含的速度。 |
| Hierarchy | The tempo specified by the MIDI clip's ancestry is used. |

**设置 MIDI 速度源的方法是：**

1. 选择音乐对象。
2. In the Property Editor, go to the **MIDI Clip Tempo**
   group.
3. Select the **Source** to use.

MIDI 片段的速度在创建后可更改，但不会影响时长。时长可通过片段裁剪点进行更改。有关详细信息，请参阅[“使用片段”一节](04-使用-Music-Track-和-Music-Segment/07-使用片段.md "使用片段")。

## Changing the playback speed of MIDI

Music objects don't have a voice pitch property. However, you can change their **Playback Speed**, which affects:

- The pitch of audio clips.
- The rate of playback of MIDI clips.

播放速度 1 将以原始速度播放。播放速度 2 将以 2 倍的原始速度播放。播放速度 0.5 将以一半的速度播放。

|  |  |
| --- | --- |
| [备注] | 备注 |
| The **Playback Speed** property can also be attached to a Game Parameter in the RTPC tab of the Primary Editor. |

**To change the playback speed:**

1. 察看音乐对象（音乐轨除外）。
2. In the Property Editor, set the **Playback
   Speed**.

---