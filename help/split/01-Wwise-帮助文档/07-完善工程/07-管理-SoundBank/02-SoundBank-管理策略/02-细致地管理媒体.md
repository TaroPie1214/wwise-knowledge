# 细致地管理媒体

[Wwise 帮助文档](../../../00-Wwise-帮助文档.md) > [完善工程](../../00-完善工程.md) > [管理 SoundBank](../00-管理-SoundBank.md) > [SoundBank 管理策略](00-SoundBank-管理策略.md) > 细致地管理媒体

### 细致地管理媒体

此方法适用于以下情形：

- 游戏拥有大量驻留内存的媒体素材。
- 声音设计师很难事先预测媒体需求。
- 工程使用切换开关和状态来确定将为特定 Event 播放的声音或振动对象。
- 声音不易于划分成多个确定的部分。

有的游戏非常复杂，可能要按多种因素来触发声音，这些因素包括游戏纹理、时辰、游戏对象的运动，在多人在线游戏中，还可能包括其它玩家的操作。例如在基于 Event 或对象的环境中，声音可以根据其它一些游戏对象的距离加载到内存中。各个游戏对象都可能有一列 SoundBanks 必须加载，要么因为这些 SoundBank 对应的声源处于一个给定距离范围内，要么仅仅因为按规则只要这些声音存在就必须使用。

另外，切换开关和状态可以确定播放对象。当将播放这些对象的 Event 添加到 SoundBank 时，所有可能用到的媒体也会自动添加到 SoundBank。比如，可能会有一个名为 Play\_Footstep 的 Event。此 Event 将根据地面的当前纹理播放相应的声音，当前纹理通过更改切换开关来指定。虽然这种方法效果非常好，但是当游戏场景发生在伦敦的一座建筑内时，如果在内存中将声音"footstep\_sand.wav"或"footstep\_winter.wav"保持随时就绪状态是对内存的一种浪费。

在此情况下，为了避免浪费内存，您可以将 Event 或对象结构添加到 SoundBank，然后指定 SoundBank 中将要包含的相应对象。例如，让我们对不同的纹理使用不同的脚步声。<XXXX CSOFT xxxxx>在此情况下，我们可以创建以下 SoundBank：

- "EventBank"，其中包含"Play\_Footstep"Event 和结构。
- Winter\_Footstep\_bank：其中包含仅在游戏的某些部分（冬天）发生的脚步声所对应的媒体。
- Desert\_Footstep\_bank：其中包含仅在游戏的某些部分（沙漠）发生的脚步声所对应的媒体。
- "Common\_Footstep\_bank"，其中包含可在任何地方（木材、混凝土等）发生的脚步声所对应的媒体。

#### 在 Wwise 中创建 SoundBank 来细致地管理媒体

假设游戏中有三种不同的纹理（雪地、沙地和混凝土地）。在 Wwise 中，有一个切换容器根据切换开关"ground\_texture"播放三个随机容器中的一个。三个随机容器中的每一个在给定纹理上均有四种脚步声版本。

**在 Wwise 中创建用于微管理媒体的 SoundBank 的方法是：**

1. 创建名为"EventBank"的 SoundBank，然后将它加载到 SoundBank Editor。
2. 将"Play\_Footstep"Event 拖入 SoundBank Editor 的“Add”选项卡。
3. 取消选择此 Event 的"Media"复选框，但保持选中 Events 和 Structures 复选框。
4. 创建其它三个 SoundBank，每个纹理各一个。
5. 在各个 SoundBank 中，拖动与此纹理相关的随机容器。

   |  |  |
   | --- | --- |
   | [备注] | 备注 |
   | 如果不拖放随机容器，则分别拖放各个声音也同样有效。但是使用容器的优势是，当容器的内容改变时，容器中的所有声音将自动添加到 SoundBank 中，无需手动完成所有更改。 |
6. 取消选择三个纹理 SoundBank 中的每一个所对应的"Event"和"Structure"复选框，仅保持选中 Media 类型。
7. 生成 SoundBank，并将生成的 SoundBank 文件夹复制到游戏应用程序。

   此时，我们有四个 SoundBank，一个包含与待播放的音频相关的 Event 和结构数据，另外三个仅包含与特定地面纹理相关的媒体。

#### 集成

有关集成的详细信息，请参阅 Wwise SDK 文档中的[细致地管理媒体](https://www.audiokinetic.com/library/edge/?source=SDK&id=sdk_bank_training.html#sdk_bank_training_Method_3)章节。

#### 有关此方法的补充说明

这个例子只是使用此技术可以完成的众多任务之一。由于可以按对象和 Event 逐一决定各个 SoundBank 包含的内容，因此您可以全面控制各个 SoundBank 的内容。虽然您可以为游戏中的每个对象创建单独的 SoundBank，但是这样维护起来会非常困难，因为在游戏中每个新音效和振动效果都需要新的代码才能正确加载 SoundBank。每款游戏应该尝试的目标是在粒度和游戏集成便利性之间找到良好的平衡。

|  |  |
| --- | --- |
| [备注] | 备注 |
| 若想逐个加载声音，最好分别预备 Event 而非加载整个 SoundBank。有关做 Prepare Event 的详细信息，请参阅[“Prepare 动作事件”一节](03-Prepare-动作事件.md "Prepare 动作事件")。 |

下表列出了微管理策略在管理媒体时的优缺点。

| 优点 | 缺点 |
| --- | --- |
| 优化内存占用的最佳选择。  您可以充分控制在游戏任意时刻加载哪些媒体。  为您提供 [“SoundBank 向后兼容性”一节](../08-SoundBank-相关技巧和窍门/02-SoundBank-向后兼容性.md "SoundBank 向后兼容性")，支持加载较大的媒体 SoundBank。 | 需要声音设计师和游戏程序员密切沟通，共同确定必须加载的 SoundBank 和加载的时机。 |

---