# 性能分析技巧和窍门

[Wwise 帮助文档](../../00-Wwise-帮助文档.md) > [完善工程](../00-完善工程.md) > [性能分析](00-性能分析.md) > 性能分析技巧和窍门

## 性能分析技巧和窍门

在 Wwise 中使用 Game Profiler 之前，您可能需要阅读以下章节，其中介绍了一系列可以帮您对游戏各方面进行性能分析和故障排查的技巧和最佳实践。

### Game Profiler 性能

由于传输的数据量可能很大，所以从声音引擎捕获信息可能会影响 Wwise 的性能。为此，最好在 Profiler Settings 对话框中限制 Advanced Profiler 生成的信息类型。通过排除一些信息类型，您可以：

- 节省网络传输带宽。
- 节省 Wwise 中的内存空间。
- 省略数据计算，从而节省游戏中的 CPU 时间。
- 省略数据处理或显示，从而节省 Wwise 中的 CPU 时间。

### 在捕获的同时监控性能

若要在从声音引擎捕获数据的同时监控性能，须单击 Show Live Data（显示实时数据）按钮 ![](../../../../images/btn_live_off.png)。否则一段时间之后，Profiler 中的视图将看似未被更新，如同没有捕获到信息一样。若忘记选择 Show Live Data 选项，可随时将 Performance Monitor（性能监控器）的时间光标拖到坐标图上的特定位置来浏览捕获的数据。拖动时间光标时，Profiler 中的其它视图将自动更新。

### 排查远程连接问题

- 在将 Wwise 连接到游戏时，若 Remote Connections 对话框中未显示电脑/主机，请验证以下信息：

  - 游戏中，Commuication（通信）模块是否正确初始化。详细信息请参阅 [Wwise SDK 文档](https://www.audiokinetic.com/library/?source=SDK&id=workingwithsdks__initialization.html#initialization_comm)的“Initializing Communications”（初始化通信）小节。
  - 确保游戏内初始化通信模块的 AkCommSettings 结构中，“Game Discovery Broadcast Port”（游戏发现广播端口）端口与 Wwise 工程设置中相同。详细信息请参阅[“指定网络端口”一节](../../03-设置工程/01-处理工程/02-定义工程设置/07-指定网络端口.md "指定网络端口")和 [Wwise SDK 文档](https://www.audiokinetic.com/library/?source=SDK&id=workingwithsdks__initialization.html#initialization_comm)的“Initializing Communications”（初始化通信）小节。
  - 计算机／游戏机是否已经正确连接到网络。注意，有些游戏机会有多个网络适配器，其中一个用于调试，还有一个用于常规网络通信，请确保连接所有网络适配器，然后再用 Wwise 重新连接。
  - 运行游戏的计算机／游戏机与运行 Wwise 的计算机位于相同的子网段。
  - 是否有活跃的防火墙正在阻止连接。如果运行 Wwise 的计算机上有活跃的防火墙，请禁用并检验其是否正在阻止连接。如果确实是防火墙阻止了连接，请尝试将 Wwise 应用程序添加到防火墙的例外列表（请参阅防火墙的说明文档）。如果需要更改 Wwise 通信所用的端口（包括将非动态端口改为固定端口），请参阅[“指定网络端口”一节](../../03-设置工程/01-处理工程/02-定义工程设置/07-指定网络端口.md "指定网络端口")和 [Wwise SDK 文档](https://www.audiokinetic.com/library/?source=SDK&id=workingwithsdks__initialization.html#initialization_comm)的“Initializing Communications”（初始化通信）小节。
  - 若知道远程电脑/主机的 IP 地址，则可在 Remote Connections 对话框中单击 **Connect to IP** 并手动输入 IP 地址。如果这样可以连接到游戏，说明仅阻止了自远程计算机／游戏机的广播。只要连接电脑/主机一次，就会自动将其显示在 Remote Connections 对话框的 History 选项卡中。也就是说，再次连接时无需输入 IP 地址。
  - 声音引擎是否在使用 Debug 或 Profile 版本。如果使用 Release 版本将无法连接。
- 如果您正使用很大的工程连接游戏并且 Wwise 停留在连接窗口，请尝试以下操作：

  - 打开工程，清空当前 SoundCaster 和 Mixing Desk（调音台）会话，并移除加载到的 Transport Control（走带控制）的对象，接着选择 **Profile and Edit (Sync Inspected Objects Only)**（分析和编辑(仅同步被检视的对象)）而非 **Profile and Edit (Sync All Modified Objects)**（分析和编辑(同步所有修改的对象)），然后连接到游戏。

    |  |  |
    | --- | --- |
    | [备注] | 备注 |
    | 在将 Wwise 连接到游戏时，若选择 **Profile and Edit (Sync All Modified Objects)**，则 Wwise 将向游戏推送所需全部信息以确保其显示内容与游戏同步。This can take some time and use more memory in the game. 若选择 **Profile and Edit (Sync Inspected Objects Only)**，则 Wwise 只需推送与此相关的信息即可。而仅推送 Property Editor、Transport Control 中选择的内容，以及活跃 Soundcaster Session 和 Mixing Desk Session 里的内容。如果 Wwise 工程中有包含大量数据的活跃 Soundcaster Session 或 Mixing Desk Session ，连接游戏时就可能遇到此问题。  Also, modified media (sounds, MIDI, Convolution IR, etc.) that is currently in use by the game will be transferred to the game too. 这样可能需要更长时间才能启动对游戏的性能分析。  若远程连接只是为了实施性能分析，则还可在连接时选择 **Profile Only**。如此一来，便不会在设计工具和游戏之间进行同步。注意，在选择此项的情况下连接会无法在设计工具中播放声音。 |

---