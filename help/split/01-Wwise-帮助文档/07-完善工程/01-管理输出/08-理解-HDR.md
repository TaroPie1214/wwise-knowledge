# 理解 HDR

[Wwise 帮助文档](../../00-Wwise-帮助文档.md) > [完善工程](../00-完善工程.md) > [管理输出](00-管理输出.md) > 理解 HDR

## 理解 HDR

高动态范围音频（HDR 音频）是一种利用自然声音所跨越的大动态范围电平值来进行混音设计的技术。HDR 也是一个实时系统，可以将宽泛的电平范围动态地映射至更适合于您的声音系统数字输出的范围。

HDR 也是一个实时系统，可以将宽泛的电平范围动态地映射至更适合于您的声音系统数字输出的范围。HDR 系统的任务是把现实中的整个动态范围从约 190 dB 折叠或“压缩”到 96 dB（数字设备允许的动态范围），而且由于基底噪声的存在，这个范围实际会更低。

在 HDR 图像中，色调映射会独立应用至图像的不同区域，以增强各区域内的对比度。HDR 音频采用相同的工作方式；它进行声音电平映射，而非色调映射，并且在本地实时完成。因此，系统随时都会根据构成音频场景的声音电平来自动采用映射。

HDR 词汇表：

| **术语** | **定义** |
| --- | --- |
| **分贝** (dB) | 某声音电平与另一声音电平或任意基准值相比较的对数表示方法。处理振幅时，1 分贝等于 `20 * log10(A/AR)`。+20 dB 的差异表示该声音的振幅比参考声要大 10 倍。 |
| **满量程分贝** (dBFS) | 信号振幅与出现削波前设备可处理的最大振幅相比较的对数表示方法。0 dBFS 值是数字音频输出所能产生的最响的声音。16 位数字音频输出设备范围从 0 dBFS 下至 -96 dBFS。The level of the audio signal coming out of the Main Audio Bus in Wwise should therefore lie between these values. |

### HDR 示例

在 HDR 音频中，您可以为游戏虚拟世界的声音指定音量值，这些声音涵盖的动态范围要远大于标准 96 dB 16 位输出设备，更像在真实世界的声音。HDR 系统的任务是将这些值转化为 dBFS，如下图所示。

**图 10. HDR 系统输入与输出**

|  |
| --- |
| HDR 系统输入与输出 |

  

输入是虚拟世界的声音电平，相对于任意参考值用分贝 (dB) 表示。这些值可以指定任意大小，因此具有高动态范围。而输出电平则是这些声音在 dBFS 中相应的电平。输出电平的范围视输出设备而异，动态范围通常要比输入低。

HDR 系统最简单的形式如下：系统在各个时刻会选择当前虚拟世界中被设置为最高音量的声音，将其自动映射至 0 dBFS 输出值，然后按比例映射其它所有声音。

让我们用一个例子来说明。假设在给定时刻（“时间 1”），虚拟世界中的声音 “blue（蓝）” 以 +30 dB 播放，如[图 11 “HDR 窗口”](08-理解-HDR.md#hdr_window "图 11. HDR 窗口")中左侧所示。参考值（0 dB）为任意设定。因为“blue”是在时间 1 出现的最响的声音，所以它在 HDR 系统的输出端以 0 dBFS 播放。另一个声音“purple（紫）”在虚拟世界中以 0 dB 播放，即比声音“blue”低 30 dB。因此，它在 HDR 系统的输出端将以 -30 dBFS 播放。第三个声音“green（绿）”在虚拟世界中以 -66 dB 播放，因此在 HDR 系统的输出端为 -96 dBFS。由于系统的输出动态范围限制在 96 dB ，因此“green”的电平与响度声音的下界相对应。在时间 1，低于“green”电平的任何声音都无法听到。

在上例中，虚拟世界（输入端）的动态范围 [-66, +30] dB 称为 **HDR 窗口**。它由 [图 11 “HDR 窗口”](08-理解-HDR.md#hdr_window "图 11. HDR 窗口") 左侧的蓝色区域表示。HDR 窗口具有固定宽度，该宽度由输出设备的动态范围决定。对于 16 位设备，最多为 96 dB，但实际上通常要小一些。在时间 1，+30 dB 的声音是虚拟世界中最响的声音，任何低于 -66 dB 的声音都会听不见，因为该声音低于 HDR 窗口下限。

假设之后在时间 2，另一个声音“orange（橙）”在虚拟世界中以 +50 dB 开始播放。为对应这个更响的声音，HDR 系统将窗口向上滑动 20 dB，因此该声音在输入端的范围现在为 [-44, +50] dB。所有声音随后被映射至新的电平值。+50 dB 的声音以 0 dBFS 播放，+30 dB 的声音以 -20 dBFS 播放，-66 dB 的声音现在低于该窗口下限，因此变得完全听不见了。当“orange”声音在时间 3 停止播放时，窗口会缓慢恢复为原始大小，其它声音也恢复之前的音量。

**图 11. HDR 窗口**

|  |
| --- |
| HDR 窗口 |

  

在左侧，声音电平以系统的输入来表示，分贝 (dB) 为任意参考值。HDR 窗口由蓝色区域表示。在时间 1，窗口顶部与当前最响的声音（蓝色）平齐。在时间 2，另一个声音（橙色）以 +50 dB 开始播放，窗口立即向上滑动以满足需求。之后 -66 dB 的声音（绿色）明显低于该窗口，因此将无法听到。系统输出得到的 dBFS 电平显示在右侧。当 HDR 窗口由于橙色声音向上滑动 +20 dB 时，其它声音的音量下降 -20 dB。在此期间，输出信号中将完全排除绿色声音。请注意，橙色声音在时间 1 期间的输出电平与蓝色声音相同。当橙色声音停止播放时，窗口会缓慢向下滑动，恢复至之前的电平，而其它声音的音量则相应增加。

HDR 系统的工作方式与动态范围限幅器/压缩器类似。当播放较响的声音时，较弱的声音会变得听不见，从而影响您的混音，当单独播放时这些声音就又能听见了。HDR 中声音之间的相对电平会保留，以产生更大动态范围的幻觉，但实际上它们会被压缩至输出设备的较低动态范围内。此外，由于在播放较响声音时系统会进行自动音量闪避，因此您的混音将变得更清晰，并重点更明确。下图对该原则进行了说明。

**图 12. HDR 概述，如系统输入端所见**

|  |
| --- |
| HDR 概述，如系统输入端所见 |

  

仅当播放较响的声音时窗口向上滑动当输入端窗口向上滑动时，输出端音量则会下降。当播放枪声时，之前响度的声音（如树叶声）变得完全听不到。系统输出端声音的实际音量取决于当前时刻声音与窗口顶部之间的距离。此时，如果单独播放，则枪声和爆炸声将以相同的电平从系统中输出，但由于爆炸声被认为要比枪声响并会有效降低枪声的音量，因此听者会留下爆炸声更响的印象。

---