# 定义对象的播放行为

[Wwise 帮助文档](../../../00-Wwise-帮助文档.md) > [使用声音和振动来提升游戏体验](../../00-使用声音和振动来提升游戏体验.md) > [定义对象播放行为](../00-定义对象播放行为.md) > 定义对象的播放行为

## 定义对象的播放行为

工程内的每个对象都具有一组特定行为。这些行为决定每次调用对象时的播放次数，以及是在内存中存储对象，还是直接从 DVD、CD 或硬盘进行流播放。

您可以为对象定义以下行为：

- [“创建循环”一节](00-定义对象的播放行为.md#creating_loop "创建循环")
- [“流播放媒体”一节](00-定义对象的播放行为.md#streaming_media "流播放媒体")

### 创建循环

默认情况下，对象从头至尾播放一次。不过，有时可能需要多次播放对象。这种情况下可以创建循环。当您决定循环某个对象时，必须定义循环的次数。可以选择无限循环对象，也可以指定循环次数。

默认情况下将循环整个对象，但如果音频文件中添加了 loop region （循环范围）标记，则可以循环对象的一部分。在完整循环中，整个对象将从头至尾播放。播放到对象结尾后，会返回至开头继续播放。它会重复播放，直至完成指定的次数。

|  |
| --- |
|  |

在特定范围循环中，仅循环标记范围之内的部分。对象从头播放，直至循环范围的结尾。然后返回至标记范围的开头，并重复播放循环范围，直至完成指定的循环次数。循环结束后，将播放对象的最后部分。如果是无限循环，则永远不会播放对象的最后部分。Wwise 仅支持一个循环范围，因此请确保在音频文件中仅定义了一个范围。

|  |
| --- |
|  |

|  |  |
| --- | --- |
| [备注] | 备注 |
| 范围标记（或 Audition 中的 start/end 采样）必须在第三方应用程序中创建，如 Adobe® Audition® 和 Sound Forge®。您也可以使用其他第三方应用程序，不过其不在 Wwise 官方支持范围内。 |

**循环播放声音的方法如下：**

1. 将对象加载到 Property Editor 中。
2. Enable **Loop**.

   Loop 参数变为可用。
3. 选择以下选项之一：

   **Infinite** 无限重复，整个对象或文件中定义的循环范围将无限重复。

   **No. of Loops** 次数，指定整个对象或特定循环范围的播放次数。
4. 如果您选择 No. of Loops 选项，请输入对象或特定循环范围的播放次数。

### 循环播放压缩音频文件

由于压缩文件格式（如 ADPCM）要求文件长度和范围标记与数据块的边界采样对齐，因此转码过程中会添加零本采样来补齐。循环声音时，这些额外的零采样会导致问题。为了避免问题，Wwise 会提示点用户重新转换循环的声音，以确保：

- 补零不会发生在文件结尾。
- 循环范围标记会与数据块边界采样对齐。

Wwise 在重新转码过程中使用变调，以确保这些文件符合压缩格式的要求。循环会精确到采样点，且文件的采样率不会改变。

|  |  |
| --- | --- |
| [备注] | 备注 |
| 音频文件中，如果循环标记短于数据块首尾采样长度，那么在 Wwise 中转换时标记会被移除。 |

### 流播放媒体

您可以决定哪些对象加载至内存中播放，哪些对象从硬盘、CD 或 DVD 进行流播放。当从磁盘或硬盘流播放媒体时，您还可以选择避免播放延迟，方法是创建一个小缓冲区来补偿提取剩余文件所需的时间。您可以指定缓冲区的大小，以满足不同媒体源（如硬盘、CD 和 DVD）的要求。与流播放文件余下的部分不同，这个小缓冲区实际上存储在 SoundBank 内，并与 SoundBank 一起在游戏中适当的时刻加载至内存中。

|  |  |
| --- | --- |
| [备注] | 备注 |
| 无论是否选择了流播放选项，在 Wwise 中播放音频时总是会使用流播放。因此仅当生成 SoundBank（声音包），且从远程平台或游戏播放时，才会应用流播放设置。 |

**流播放声音的方法如下：**

1. 将对象加载到 Property Editor 中。
2. Enable **Stream**.
3. Enable **Zero Latency** to have no delay from the time the object is triggered to when it is actually played. 为实现零延迟，必须将数据文件开头的特定部分存储在内存中，以补偿从媒体提取剩余文件所需的时间。
4. 在 **Prefetch length** 文本框中，输入毫秒数，即需要存储在内存中的文件数据长度。

---