# 性能

[Wwise 帮助文档](../../../00-Wwise-帮助文档.md) > [Wwise 插件](../../00-Wwise-插件.md) > [Audio Device 效果器插件](../00-Audio-Device-效果器插件.md) > [Mastering Suite](00-Mastering-Suite.md) > 性能

### 性能

Mastering Suite 包含多个模块，其占用的处理资源各不相同。各个模块的处理成本取决于其自身配置。以下章节详细介绍了各种 Mastering Suite 配置下的处理成本。

注意，Mastering Suite 处理成本测算结果是使用 Wwise 内 Advanced Profiler 窗口中的 CPU 选项卡获取的。为此，我们把 Wwise 连接到了 Integration Demo 应用程序（随 Wwise SDK 一起提供）。其中只有一个 Mastering Suite 效果器实例。然后，在将 AMD Ryzen 3700X CPU 时钟频率设为 4.0 GHz 的情况下针对 Windows 平台进行了测算。

#### Performance per module

下表列出了 7.1.4 混合输出声道配置（12 个声道）下 Audio Device（音频设备）对应的 Mastering Suite 性能成本。性能成本测算结果表示为 CPU 用量的百分比。效果器由单个 CPU 核心进行处理。当中使用了两种 Mastering Suite 模块配置（如下所列）。先在激活所有模块的情况下测算性能成本，之后又在每次激活一个模块的情况下测定。

如前所述，Audio Device 采用了混合输出配置；也就是说，它不会处理 Audio Object（音频对象）。后面章节会详细介绍基于对象的管线的性能成本。

**配置 1**：Parametric EQ 活跃，6 频段；Multiband Compressor 活跃，4 频段；Master Volume 活跃；Limiter 活跃，Soft 模式。

|  |
| --- |
|  |

**配置 2**：Parametric EQ 活跃，3 频段；Multiband Compressor 活跃，2 频段；Master Volume 活跃；Limiter 活跃，Soft 模式。

|  |
| --- |
|  |

| 活跃模块 | 配置 1 的 CPU 用量 | 配置 2 的 CPU 用量 |
| --- | --- | --- |
| 所有模块 | 1.15% | 0.57% |
| 仅 Parametric EQ | 0.30% | 0.20% |
| 仅 Multiband Compressor | 0.75% | 0.34% |
| 仅 Master Volume | 0.10% | 0.10% |
| 仅 Limiter | 0.23% | 0.23% |

#### Limiter modes

下表列出了不同 Limiter 模式的相对处理成本。测算当中采用了与前述章节相同的条件。

| Limiter Mode | CPU 占用 |
| --- | --- |
| Hard | 0.16% |
| Soft | 0.23% |
| Advanced | 0.23% |

#### Audio Object processing

本节将详细介绍基于对象的管线中 Audio Device 配置下的 Mastering Suite 性能成本。当中 Mastering Suite 需要处理三条音频流：

- **Main mix**（主混音）：最终混音的声道配置。
- **Stereo Passthrough**（立体声直通）：立体声声道配置。
- **Audio Objects**（音频对象）：单独发送到 Audio Device 的各个 Audio Object。

Audio Object 的处理成本较高，其与所支持的最大 Audio Object 数量成正比。下表列出了不同最大 Audio Object 数量配置下的性能成本。

在基于对象的音频管线中进行处理时有个很大的区别，就是在实施性能分析的情况下生成各个 Audio Object 的测算值（Multiband Compressor 和 Limiter）时会执行额外的处理（见下图）。这种额外的处理会影响 Advanced Profiler（高级性能分析器）内 CPU 选项卡中显示的测得性能成本。该值并不代表 Mastering Suite 的真实性能成本；Release 版本的 Mastering Suite 没有包含性能分析代码。为在不执行额外处理时获取真实性能成本，我们使用了 Release 版本的 Mastering Suite。下表列出了各项数值：

|  |
| --- |
|  |

**配置**：Parametric EQ 活跃，6 频段；Multiband Compressor 活跃，4 频段；Master Volume 活跃；Limiter 活跃，Soft 模式。

| 最大 Audio Object 数量 | CPU 用量（启用性能分析） | CPU 用量（禁用性能分析） |
| --- | --- | --- |
| 40 | 5.30% | 4.30% |
| 20 | 3.90% | 2.90% |

**配置**：Parametric EQ 活跃，3 频段；Multiband Compressor 活跃，2 频段；Master Volume 活跃；Limiter 活跃，Soft 模式。

| 最大 Audio Object 数量 | CPU 用量（启用性能分析） | CPU 用量（禁用性能分析） |
| --- | --- | --- |
| 40 | 2.80% | 2.00% |
| 20 | 2.00% | 1.50% |

#### 结论

显然，Parametric EQ 和 Multiband Compressor 占用的处理资源最多，尤其是在启用所有频段的情况下。因此，最好依据自身处理预算来适当减少这些模块的频段数量。

---