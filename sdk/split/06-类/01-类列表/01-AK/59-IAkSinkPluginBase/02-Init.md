# Init

|  |
| --- |
| Wwise SDK 2025.1.4 - Windows |

- [AK](namespace_a_k.html)
- [IAkSinkPluginBase](class_a_k_1_1_i_ak_sink_plugin_base.html)

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| |  | | --- | | [GetSinkPluginType](class_a_k_1_1_i_ak_sink_plugin_base_ad440b6790f9c09050efea27facecba21.html#ad440b6790f9c09050efea27facecba21) | | [Init](class_a_k_1_1_i_ak_sink_plugin_base_ab13c519292782b8e485912cb85506f25.html#ab13c519292782b8e485912cb85506f25) | | [IsDataNeeded](class_a_k_1_1_i_ak_sink_plugin_base_a80d001f02f2c602683951e51a795954e.html#a80d001f02f2c602683951e51a795954e) | | [IsStarved](class_a_k_1_1_i_ak_sink_plugin_base_a857a107760429d52b05741e31967d82f.html#a857a107760429d52b05741e31967d82f) | | [OnFrameEnd](class_a_k_1_1_i_ak_sink_plugin_base_af7035e026261662fb26bc747eaee77af.html#af7035e026261662fb26bc747eaee77af) | | [ResetStarved](class_a_k_1_1_i_ak_sink_plugin_base_ae63b9e00dbba73aaa35912bc82fd0e3f.html#ae63b9e00dbba73aaa35912bc82fd0e3f) | | [◆](#ab13c519292782b8e485912cb85506f25)Init() |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | | |  |  |  |  | | --- | --- | --- | --- | | virtual [AKRESULT](_ak_enums_8h_a64f7d1f79613cc4dcc49a4efba6caa63.html#a64f7d1f79613cc4dcc49a4efba6caa63) AK::IAkSinkPluginBase::Init | ( | [IAkPluginMemAlloc](class_a_k_1_1_i_ak_plugin_mem_alloc.html) \* | *in\_pAllocator*, | |  |  | [IAkSinkPluginContext](class_a_k_1_1_i_ak_sink_plugin_context.html) \* | *in\_pSinkPluginContext*, | |  |  | [IAkPluginParam](class_a_k_1_1_i_ak_plugin_param.html) \* | *in\_pParams*, | |  |  | [AkAudioFormat](struct_ak_audio_format.html) & | *io\_rFormat* | |  | ) |  |  | | pure virtual |  Initialization of the sink plugin.  This method prepares the audio device plug-in for data processing, allocates memory, and sets up initial conditions. The plug-in is passed in a pointer to a memory allocator interface ([AK::IAkPluginMemAlloc](class_a_k_1_1_i_ak_plugin_mem_alloc.html)).You should perform all dynamic memory allocation through this interface using the provided memory allocation macros(see [在音频插件中分配/取消分配内存](soundengine_plugins.html#fx_memory_alloc)).For the most common memory allocation needs, namely allocation at initialization and release at termination, the plug-in does not need to retain a pointer to the allocator.It will also be provided to the plug-in on termination. The [AK::IAkSinkPluginContext](class_a_k_1_1_i_ak_sink_plugin_context.html) interface allows to retrieve information related to the context in which the audio device plug-in is operated. The plug-in also receives a pointer to its associated parameter node interface ([AK::IAkPluginParam](class_a_k_1_1_i_ak_plugin_param.html)).Most plug-ins will want to keep a reference to the associated parameter node to be able to retrieve parameters at runtime. See [参数节点与插件之间的通信。](soundengine_plugins.html#iakeffectparam_communication) for more details. All of these interfaces will remain valid throughout the plug-in's lifespan so it is safe to keep an internal reference to them when necessary. Plug-ins also receive the output audio format(which stays the same during the lifespan of the plug-in) to be able to allocate memory and setup processing for a given channel configuration. Note that the channel configuration is suggestive and may even be specified as not [AkChannelConfig::IsValid()](struct_ak_channel_config_ab68295ed31a6156decb291ab7a6c07f3.html#ab68295ed31a6156decb291ab7a6c07f3 "Returns true if valid, false otherwise (as when it is constructed, or invalidated using Clear()).").The plugin is free to determine the true channel configuration(this is an io parameter).  返回  AK\_Success if successful.  AK\_NotCompatible if the system doesn't support this sink type. Return this if you want to fall back to the default sinks. This sink will never be requested again. Do not return this code if the device is simply unplugged.  AK\_DeviceNotCompatible if the requested output device doesn't support this sink type. Return this if you want to fall back to the dummy audio sink, which will result in no audio for the associated bus hierarchy. This sink will never be requested again. All other return codes will be treated as temporary failures conditions and the sink will be requested again later.  参数  |  |  | | --- | --- | | in\_pAllocator | Interface to memory allocator to be used by the effect. | | in\_pSinkPluginContext | Interface to sink plug-in's context. | | in\_pParams | Interface to plug-in parameters. | | io\_rFormat | Audio data format of the input signal. Note that the channel configuration is suggestive and may even be specified as not [AkChannelConfig::IsValid()](struct_ak_channel_config_ab68295ed31a6156decb291ab7a6c07f3.html#ab68295ed31a6156decb291ab7a6c07f3 "Returns true if valid, false otherwise (as when it is constructed, or invalidated using Clear())."). The plugin is free to determine the true channel configuration. | |