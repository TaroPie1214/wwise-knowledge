# 描述几何构造

|  |
| --- |
| Wwise SDK 2025.1.4 - Windows |

描述几何构造

# 如何将几何构造传给 Wwise Spatial Audio

游戏的几何构造通过 `AK::SpatialAudio::SetGeometry()` 传给 Wwise Spatial Audio，并由 [AkGeometryParams](struct_ak_geometry_params.html "Parameters passed to SetGeometry") 结构进行描述。下面简要介绍了相关要点：

- 顶点 ([AkVertex](struct_ak_vertex.html)) 在独立于三角形的 `AkGeometryParams::Vertices` 数组中定义，而三角形数组中的每个三角形都会引用顶点数组中的索引。
- 每个三角形还会包含 `AkAcousticSurface` 结构索引，便于定义声学材质和描述字符串。
- 声学材质与三角形的对应关系由用户决定。比如，用户可选择为每个三角形指定一个表面，也可将一个表面应用于所有三角形。
- 定义声学表面为可选项。若无需自定义表面的声学属性，则可将三角形设为 AK\_INVALID\_SURFACE，将 NULL 传给 `AkGeometryParams::Surfaces` ，并将 `AkGeometryParams::NumSurfaces` 设为零。

# 其他注意事项

一般来说，任何三角形网格都可用于 Wwise Spatial Audio，不过需要注意一些关键考量因素。

- 网格应尽量简单。声学计算涉及大量射线追踪运算，可能会占用很大一部分资源。最好使用最少数量的三角形来表示场景。
- 所有三角形都具有双面性。三角形的两个面上都会发生声学反射，因此最好创建没有内部体积的网格。比如，将墙壁创建为平面而不是箱体。
- 为了创建连续网格，应将重复顶点融为一体。也就是说，两个相连的三角形应引用顶点数组中相同的两个顶点。这对衍射计算来说非常重要，否则声音可能会从网格渗透过去。
- 所有顶点坐标都采用世界坐标系。
- 为了设置几何构造而通过多个调用发送至 Spatial Audio 的网格不可引用相同的顶点，因此也不会被视为相连或连续。在这种情况下，将不会为跨越多个网格的边缘生成衍射边缘。
- 网格不得包含退化三角形。所有三角形的面积都必须大于零。
- 在结合几何构造使用 Geometric Diffraction（几何衍射）时，注意适用其他规则。请参阅 [使用 Geometry API 模拟衍射和透射](spatial_audio_apigeometry_diffract.html) 了解更多详情。