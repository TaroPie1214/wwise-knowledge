# 版本说明 2017.2.1

|  |
| --- |
| Wwise SDK 2025.1.4 - Windows |

版本说明 2017.2.1

以下各节列举并描述 Wwise 版本 2017.2 和版本 2018.2.1 之间的变化。有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。如果使用联机帮助，您还可以从目录列的顶部选择别的 Wwise 版本。

# 平台 SDK 更新

- 将 Perforce 插件更新至 Perforce SDK 2017.1。
- **Xbox One XDK** 已更新至 XDK 170601 (2017年6月 QFE 3)
- **PS4 SDK：** 已更新至 SDK 5.008.041。
- **Mac, iOS, tvOS：** 已更新至 Xcode 9.1。

# 新功能

- **WG-27339** 利用 Perforce 插件添加了对 SSL 的支持。
- **WG-36178** Spatial Audio – 衍射建模：现在为衍射声音额外应用了距离倍数。在添加此倍数后，可以模拟衍射声波衰减速度快于入射声波的声学现象。为了自定义这种行为，向 `AkSpatialAudioInitSettings` 添加了两个新的参数： `fDiffractionShadowAttenFactor` 和 `fDiffractionShadowDegrees` 。有关更多详细信息，请参阅 API 文档的 `AkSpatialAudioInitSettings` 一节。若此改进不知为何对现有声音设计造成了不良影响，请通过将 `fDiffractionShadowAttenFactor` 设为 1.0 来禁用该功能。
- **WG-36289** Spatial Audio：现在支持将 Spatial Audio 内部注册的“房间”游戏对象用作房间底噪的发声体。为此，向 `AkRoomParams` 添加了以下两个参数：RoomGameObj\_KeepRegistered 和 `RoomGameObj_AuxSendLevelToSelf` 。这对定位多声道房间底噪来说非常有用，因为 Spatial Audio 会自动完成所有定位。通过发布作用于“房间”游戏对象的 Event，可以自动确定“房间”游戏对象的相对方位。在听者位于房间内部时，声音会从听者周围传来；在听者位于房间外部时，声音会从各个门户传来。有关新增字段的详细信息，请参阅 API 文档的 `AkRoomParams` 一节。

# 行为变化

- **WG-36119** 由于 2017.2.0 中出现此漏洞并需要在 2017.2.1 中修复，所以 2017.2.0 和 2017.2.1 版本将无法远程连接。
- **WG-36287** Spatial Audio：之前，在发声体和听者不在同一房间时会忽略 `AK::SpatialAudio::SetEmitterObstruction()` 返回的声障值。现在，会对比 API 函数传递的声障值和衍射系统计算得出的衍射值，并将两者中的最大值传给声音引擎。游戏负责区分发声体与门户之间的声障（应使用 `SetEmitterObstruction()` ）和房间边界的声笼（Spatial Audio 衍射系统的处理效果更好）。比如，在物体十分靠近门户的开口时，发声体和听者之间的射线会碰到附近的墙壁，此时游戏会通过射线检测来计算声障作用，进而报出 100% 的声障值。假如游戏随后将 100% 发送给声音引擎，就会导致错误地改写衍射角计算值，而实际上该值很可能远远小于 180 度，也更贴近预期听觉效果。为了避免发生这种情况，游戏可以先对发声体和门户之间的阻挡物体实施射线检测，并通过 `SetEmitterObstruction()` 传递结果值，然后再对门户和听者之间的阻挡物体实施检测，并通过 `SetPortalObstruction()` 传递结果值。

# 性能变化

- **WG-35738** 大幅提升了旁通输出总线滤波器时的混音性能。
- **WG-36140** (Android & PS4) 大幅提升了 Parametric EQ 的性能。

# 漏洞修复

- **WG-34346** 已修复：在 Wwise 工程路径的目录包含外文字符（相对于操作系统语言）时，无法加载 Convolution Reverb 中的 IR。
- **WG-34842** 已修复：声音速度（speed of sound）剧烈变化会导致 Reflect 产生毛刺噪声。
- **WG-34954** 已修复：坐标图中的 Reflect Effect Editor 光标顺序容易造成混淆。
- **WG-35079** 已修复：在与游戏断开后，Reflect Effect Editor 仍然显示反射静音/独奏状态。
- **WG-35415** 已修复：Obs/Occ 性能分析器选项卡中有可能累积过时的声障/声笼条目。
- **WG-35485** 已修复：在 MultiDirection 模式下，Ambisonics 与多点定位游戏对象不兼容。
- **WG-35803** 已修复：默认的 Audio Device ShareSet (System) 无法再重定父级、重命名或移动。
- **WG-35810** 已修复：对于 (Set/Add/Remove) DefaultListener 消息，在 Capture Log 的 Game Object 列中，名称将保留空白。
- **WG-35850** 已修复：在反射超出 Max Distance 时，Reflect Effect Editor 曲线中不显示光标。
- **WG-35860** 已修复：在同一帧内注销发声体时，`AK::SpatialAudio::SetEmitterAuxSendValues` 不起作用。
- **WG-35894** 已修复：在未勾选 Follow Listener Orientation 时，User-defined 定位不支持发声体沿同一方向连续旋转。
- **WG-35929** 已修复：Switch Music Track 在 Exit Cue 或其之后过渡。
- **WG-36006** 已修复：除 Master Audio Bus 外，所有其他总线都可重定父级。
- **WG-36009** 已修复：在总线初始化时，忽略了 RTPC 驱动的 Auxiliary Bus 上应用的 Effect Bypass。
- **WG-36076** 已修复：在游戏对象数据处理不当时，会在定位代码中注入乱码。
- **WG-36094** 已修复：在未启用 Audio Device 的情况下查看 Audio Preferences 对话框时发生崩溃。
- **WG-36119** 已修复：在因版本不匹配而不允许远程连接时，Remote Connections 的 Status 列中显示不正确的小版本。
- **WG-36130** 已修复：在针对插入的游戏参数调用 `SetRTPCValue()` 之后无法立即调用 `ResetRTPCValue()` 。
- **WG-36138** 已修复：(PS4 & Switch) 在当前平台上单独执行左或右触发曲线时，Wwise Motion Generator 发生崩溃。
- **WG-36141** 已修复：`Ak::SoundEngine::SetBusDevice()` 无法运行。
- **WG-36153** 已修复：在将顶层总线设为父级对象时，新总线的初始名称开头为 New Master Bus 而非 New Audio Bus。
- **WG-36160** 已修复：在 DirectSound Sink 初始化失败时发生崩溃。
- **WG-36169** 已修复：有可能为 Master-Mixer Hierarchy 的顶层 Work Unit 创建子对象（Work Unit 和 Virtual Folder）。
- **WG-36173** 已修复：在极个别情况下发声体朝向与听者的前部矢量完全对齐时，出现 3D 定位不一致情况。
- **WG-36176** 已修复：Reflect 曲线颜色与设计工具不一致。
- **WG-36220** 已修复：对于主设备，`SetSpeakerAngle()` 返回 Device not found。
- **WG-36223** 已修复：在删除 State Group 后查看使用该 State Group 的总线时发生崩溃。
- **WG-36253** 已修复：在镜像声源移动距离在 Max Distance 上下波动时，Reflect Effect Editor 无法正常刷新。
- **WG-36288** 已修复：在启用 Spatial Audio 的情况下，会将与听者所在房间相关的游戏对象定位在距离听者一个单位的位置而非与其保持一致。
- **WG-36293** 已修复：在 Reflect 中，坐标图包含很多光标时出现选择问题。
- **WG-36300** 已修复：在 Voices Graph 中，父级 Auxiliary Bus 的连线显示为虚线。
- **WG-36341** 已修复：无法正确导入 32 位整数 PCM 格式的 WAV 文件。
- **WG-36355** 已修复：SCE Audio3d Object Panner 无法用于多点定位。
- **WG-36394** 已修复：在导入 .../Originals/SFX 的子文件夹中的 WAV 文件时会导入/复制到 .../Originals/SFX 中。
- **WG-36408** 已修复：Event Editor：无法在 Game Parameter Value 中设置小数。

参见
:   - [平台要求 2017.2.1](reference_platform_2017_2_1.html)