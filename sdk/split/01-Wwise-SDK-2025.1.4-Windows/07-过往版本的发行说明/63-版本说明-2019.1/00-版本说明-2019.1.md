# 版本说明 2019.1

|  |
| --- |
| Wwise SDK 2025.1.4 - Windows |

版本说明 2019.1

以下各节列举并描述 Wwise 版本 2018.1 和版本 2019.1 之间的变化。有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。如果使用联机帮助，您还可以从目录列的顶部选择别的 Wwise 版本。

- [平台 SDK 的变化](whatsnew_2019_1.html#sdk_changes_2019_1)
- [新功能](whatsnew_2019_1.html#feature_changes_2019_1)
- [API 变化](whatsnew_2019_1.html#api_changes_2019_1)
- [行为变化](whatsnew_2019_1.html#behavior_changes_2019_1)
- [性能变化](whatsnew_2019_1.html#perf_changes_2019_1)
- [其它更改](whatsnew_2019_1.html#misc_2019_1)
- [漏洞修复](whatsnew_2019_1.html#bugs_2019_1)

# 平台 SDK 的变化

- **Opus**：将编码器和解码器库更新到了 1.3 版本。
- **Switch SDK**：已更新到 SDK 7.3.0。
- **PS4 SDK**：已更新到 SDK 6.008.031。
- **Xbox One XDK**：已更新至 XDK 10.0.17134.5044 (2018年7月 qfe3)。

# 新功能

- **WG-17193** 现在可从 Music Segment 触发 Event。
- **WG-34558** 为 Music Playlist Container 添加了新的 Music Transition Destination 选项。利用 Last Played Segment 和 Next Segment，可在不同 Switch 状态的父级 Music Switch Container 之间恢复音乐播放列表的播放。
- **WG-35746** 为了便于快速复制对象，改进了 Project Explorer，现在允许直接复制对象并将其粘贴到本身所在位置，而不用像之前一样要选择父对象。
- **WG-36703** 创建了新的快捷方式 **Alt + ,** 和 **Alt + .**，方便在 Profiler 视图内快速移动到上一帧和下一帧。
- **WG-36796** 为部分视图添加了可折叠分隔器。
- **WG-37100** 为按钮工具提示添加了关联的键盘快捷键。
- **WG-37229** 改进了属性 RTPC 标志双击行为，可在 RTPC 列表中高亮显示正确的条目。
- **WG-37690** 添加了听者相关 Spatial Audio 计算优化设置：`AkSpatialAudioInitSettings.fMovementThreshold`。
- **WG-37947** 为 RTPC 选项卡添加了新的面板，无需打开相应的编辑器，便可查看和修改所选 RTPC 的设置。另外，该面板还设有用于显示所选 RTPC 被引用次数的图标，只需单击该图标便可打开 Reference View 并查看所有引用。
- **WG-38148** (WAAPI) 添加了 `ak.wwise.core.object.setRandomizer` 函数。
- **WG-38779** 现在 Wwise 会保存最后使用的布局，并在加载工程后自动恢复为该布局。
- **WG-38915** 改进了 Spatial Audio，现在可向游戏引擎的作业计划程序发送各项反射和衍射处理任务，并允许在 CPU 核心之间并行执行任务。通过更好地利用可用 CPU 资源，提升了系统的整体效率。
- **WG-39165** 添加了快捷方式（Ctrl+Number 和 Ctrl+Alt+Number），可在 Property Editor 的分隔面板中快速切换选项卡选择。
- **WG-39203** 扩展了键盘导航，可在编辑对象名称时在 Project Explorer 中使用 Tab 和 Tab + Shift 选项。
- **WG-39332** (WAAPI) 增加了对返回选项的查询语法支持。
- **WG-39557** 创建了新的 Logs 视图，包含了启动、工程加载、SoundBank 生成、转码和 WAAPI 消息。它可以替代原来的 Project Load Log 和 SoundBank Generation Log 视图。
- **WG-39825** (WAAPI) 添加了 `ak.wwise.core.audio.imported` 主题，可发布导入操作的结果。
- **WG-39889** 添加了新的可关联 RTPC 的 Enable Attenuation 属性，方便控制是否要应用 Attenuation ShareSet。
- **WG-40018** (WAAPI) 添加了 `ak.wwise.core.profiler.getVoices` ，允许在设计工具中通过性能分析器检索声部结构。
- **WG-40019** 为开始和停止捕获添加了不同的命令。
- **WG-40021** 替换了 User Preferences 中的 Hue by Color，将其由调节皮肤色调改成了仅影响中性灰界面元素，允许在不影响皮肤颜色主题的情况下更改用户界面的颜色。
- **WG-40054** 为可关联 RTPC 的元素的上下文菜单添加了 Add RTPC 选项，方便直接创建 RTPC。
- **WG-40218** 针对偏爱浅色皮肤但又希望对比度高于 Classic 主题的用户，添加了实验性的 Light 主题。由于目前仍处在实验阶段，因此可能存在部分条目颜色不正确的情况。
- **WG-40262** 为 Mute 和 Solo 创建了默认键盘快捷方式（Alt+M 和 Alt+S）。
- **WG-40274** 为了最大化 WAV 文件编辑窗口，重新调整了 Source Editor 视图布局。
- **WG-40384** 增强了 Performance Monitor，添加了平均曲线。将 CPU 和 Plug-in 计时器设成了高频分辨率，其默认平均曲线大致相当于先前版本中的 200 ms 采样间隔。
- **WG-40422** 现在支持在 SoundSeed Grain 中拖放 WAV 文件。
- **WG-40438** 为 SoundSeed Grain 调制器列表按钮添加了 none 选项，方便解除给定参数与调制器的关联。
- **WG-40546** 为 SoundSeed Grain Conversion Setting 添加了 Vorbis 选项。
- **WG-40744** 为 SoundSeed Grain 中的调制器标志添加了上下文菜单，可用于直接添加调制。
- **WG-40747** 增强了 SoundSeed Grain 中的调制器图标，直接双击便可在列表中显示所有调制条目。
- **WG-40954** 为 `-LoadProject` 添加了 WwiseCLI 支持，允许只加载工程，然后立即退出。在结合使用 `-Save` 时，可通过命令行迁移和保存工程。
- **WG-41009** 改进了 Opus 转码功能，完全支持解码所有 Wwise 声道配置，包括 Ambisonics。

# 性能变化

- **WG-34082** (Android) 针对运行 Android 8.1 或更高版本的设备添加了对 AAudio 后端的支持。
- **WG-37502** 提升了 SoundSeed Grain 在无需重新采样时的性能。
- **WG-39384** 提升了 Game Object Explorer 视图的性能。
- **WG-39763** 优化了 RTPC，减少了 `SetRTPCValue` 调用不产生参数变化时使用的 CPU 周期数。
- **WG-40022** 降低了 Voices Data 性能分析信息收集对性能的影响。
- **WG-40063** 优化了 Wwise Reflect，添加了新的 Output Config 属性。
- **WG-40356** 降低了 SoundSeed Grain 的 Grain Visualizer 的 CPU 用量。
- **WG-40485** 提升了 SoundSeed Grain 中所有包络类型的性能。
- **WG-40486** 利用 SoundSeed Grain 中的瞬态检测，提升了标记的自动生成性能。
- **WG-40734** 缩短了 List View 和 Query View 中排序操作所用的时间。
- **WG-40927** 提升了原始文件分析的性能。
- **WG-41504** 解决了同时粘贴大量条目时的性能问题。
- **WG-41686** 提升了 Voice Monitor 的绘制性能。
- **WG-41897** 减少了 Source Editor 和 Segment Editor 在播放期间占用的 CPU 资源。
- **WG-42035** 减少了 Wwise 设计工具 Segment Editor 在播放 Music Segment 时占用的 CPU 资源。

# API 变化

- **WG-39800** 通过添加 `AK::SoundEngine::ExecuteActionOnPlayingID(AkActionOnEventType in_ActionType, AkPlayingID in_playingID, AkTimeMs in_uTransitionDuration, AkCurveInterpolation in_eFadeCurve)` 函数增强了 API，可针对与播放 ID 关联的活跃内容执行指定的 Action。
- **WG-39919** (UWP) 改进了 Motion sink API。若要正确获取 UWP 手柄的振动设备 ID，必须调用 `AK::GetDeviceIDFromGamepad()` 。
- **WG-40362** 添加了多个新的 API：
  - `AK::SoundEngine::ReplaceOutput` ：允许针对给定输出设备轻松更改设备或活跃 ShareSet（另外还在 IntegrationDemo Sample 中添加了新的示例，使用 Options 菜单即可查看其应用方式）。
  - `AK::SoundEngine::GetDeviceSpatialAudioSupport` ：轻松确定给定 deviceId 是否支持 Spatial Audio。
  - `AK::GetWindowsDeviceCount` 和 `AK::GetWindowsDevice` API：简化常见情况下 Windows 上 IMMDevices 的枚举。
  - (Xbox One) `AkPlatformInitSettings::bEnablespatialAudio` 属性：允许在声音引擎初始化期间在操作系统层面启用 Spatial Audio 服务。
- **WG-40535** 改进了 Spatial Audio 的 API：
  - 移除了 `QuerySoundPropagationPaths` ，因为其返回的信息与 `QueryDiffractionPaths` 基本重复。
  - 为 `AkDiffractionPathInfo` 添加了 Room ID 和 Portal ID，方便通过 `QueryDiffractionPaths` 返回传播路径。
  - 添加了新函数 `QueryWetDiffraction`，方便返回特定门户的衍射相关信息。
- **WG-40716** 采用新方法 `AK::IAkGlobalPluginContext::GetPlatformContext()`，向插件暴露了平台特定信息。

# 行为变化

- **WG-36386** 在 Music Segment Editor 中添加自定义提示时，将根据当前锁定设置（Bars/Beats、Cues、Loops/Clips）锁定提示。
- **WG-37672** 现在在 Wwise 设计工具内会按照播放 ID 停止、暂停和恢复 Play Action。这会直接影响 Soundcaster 环境下的行为。在通过多个 Soundcaster 模块播放声音时，特定模块所应用的 Pause、Resume 或 Stop Action 仅会影响与该模块关联的声音实例。
- **WG-38218** 对于通过 Tab Delimited Import 创建的 Event Action，若已经指派了同样的 Action，则不会将其添加到现有 Event。
- **WG-38720** 在转码期间使用 ADPCM 对文件进行编码时，现在会使用 Platinum Games 编解码器。
- **WG-39067** 为命令行消息添加了与日志对应的声道前缀（适用时）。
- **WG-39435** 标题栏包含了用于显示应用程序是否处于自动模式的标志；若为调试版本，则禁用断言。若启用自动模式，则将同时偏置皮肤颜色。
- **WG-39692** 提升了执行中断动作后精确到采样点的过渡的精度。
- **WG-39787** Randomizer Min Offset 和 Max Offset 属性显示范围现在基于随机化属性的显示范围。
- **WG-39842** 现在默认使用深色皮肤而非经典皮肤。
- **WG-39899** (WAAPI) 函数 `ak.wwise.core.audio.import` 和 `ak.wwise.core.audio.importTabDelimited` 现在会返回日志条目列表，并可在发生错误时通过细节对象的 `log` 属性以数组形式进行检索。另外 `ak.wwise.core.audio.importTabDelimited` 现在会在导入成功时返回被导入对象列表。
- **WG-40053** 现在只有在至少有一项 RTPC 设置时，才会自动选择 RTPC 列表的第一行。
- **WG-40069** 在 Project Explorer 中复制粘贴条目时，将自动选择待粘贴条目。
- **WG-40073** (Android) Wwise 将自动增大其内部缓冲区大小，尽量避免出现声部匮乏情况。
- **WG-40213** 在未正确保存或撤消工程时，Wwise 设计工具会阻止 Windows 关闭。
- **WG-40240** 按下 **Ctrl+Mouse Wheel** 将垂直缩放，按下 **Ctrl+Shift+Mouse Wheel** 则水平缩放。
- **WG-40572** 在存在多个 SoundSeed Grain 实例时，Wwise 会筛选调制旁通和文件转码通知。
- **WG-40614** 只有在针对 SoundBank Editor 的 Add 选项卡中的相应工程元素选中 Structures 启用选项时，Music Event Cue 引用的 Event 才会包含在 SoundBank 中。
- **WG-40628** 现在可根据列值对参数-调制器属性列表中的行进行排序。排序操作对应有撤消/重做事件。
- **WG-40694** 现在可在连接情况下编辑 State 过渡。
- **WG-40845** 不再可以使用 **Alt+Click** 将对象自动锁定到 Transport。不过，为 Toggle Pin 和 Pin Selected Object 添加了新的快捷方式（Ctrl+P 和 Ctrl+Alt+P）。
- **WG-41643** 现在将默认通信监控队列内存池大小从 64 KB 调到了 256 KB，方便在工程较大且包含大量同时播放的声部时提供有效的性能分析信息。

# 其它更改

- **WG-33347** 在 SoundBank 生成期间无法写入内存 stat 文件时会显示相应警告。
- **WG-36918** 将 Open Containing Folder 上下文菜单条目移到了子菜单。
- **WG-37340** 将 Note/Event 调制器属性重命名成了 Note or Event。
- **WG-37797** 增强了对象图标的可读性，减轻了视觉混乱程度。
- **WG-37799** 增强了视图和皮肤之间占位符文本颜色的一致性和可读性。
- **WG-39230** 改进了 SoundBank Log 条目，现在使用字符串标识符而非整数标识符。这会影响 SoundBank 生成期间的命名行输出以及 WAAPI 日志函数和主题。
- **WG-39242** (WAAPI) 为了避免与 waapi-client 库发生冲突，使用 waapi-client 库添加了 Python 示例，并将 waapi.py 包含文件重命名成了 waapi\_uri.py。
- **WG-39254** 将插件 CPU 统计信息报告间隔由平均 ~200 ms 以上改成了每一音频帧。
- **WG-39289** 将 Cube 迁移到了 Visual Studio 2015。
- **WG-39591** 更正了将不兼容对象拖入 Contents Editor 时的错误，现在可以正常更新光标图标。
- **WG-40114** 更新了 SoundSeed Grain 界面的布局。
- **WG-40395** 为了避免在开始播放时输出音量太低，缩短了新的 SoundSeed Grain 和 SynthOne 源的默认包络起音时间。
- **WG-40842** 改进了 User Preferences 的 User Interface 选项，现在不仅会显示 User Preferences 对话框，还会显示整个 Wwise 界面的预览。
- **WG-40889** (macOS) 将已保存配置文件的位置改成了 ~/Library/Application Support/Audiokinetic。
- **WG-40975** 将 Destination Jump Position Preset 属性重命名成了 Destination Sync To。
- **WG-41240** (WAAPI) 将 State 对象分成了两种不同的类型：CustomState（用户自定义的 State）和 State（State Group 的子级 State）。
- **WG-41250** 不再将 Voice Monitor 中点选的对象发送到 Transport，以免在执行性能分析时中断播放。

# 漏洞修复

- **WG-22636** 已修复：在 Project Explorer 中编辑对象名称时，Select All 无法精确聚焦。
- **WG-30329** 已修复：在修改工程时，Batch Rename 有时会发生崩溃。
- **WG-33846** 已修复：Multi Editor 允许为 Audio Source 设置无效的淡变值。
- **WG-34254** 已修复：假如 Random Container 和 Sequence Container 的过渡类型为 Trigger Rate，会将 Play Event 过渡应用于所有子对象而非容器本身。
- **WG-35046** 已修复：假如未在 Actor-Mixer Hierarchy 中引用，SoundBank 元数据 (TXT) 文件便不会列出 Switch/State Group。
- **WG-35102** 已修复：Advanced Profiler 的 Sends 选项卡中的 Solo/Mute 按钮不能正常影响 Game Object。
- **WG-36198** 已修复：假如在 Wwise 设计工具中播放 Event 时将其删除，会导致无法停止 Event，而且会保持锁定 UI 中的部分条目。
- **WG-36591** 已修复：在使用键盘打开有些上下文菜单时，其会显示在鼠标光标旁边。
- **WG-36671** 已修复：对于已卸载的 Work Unit，Property Editor 的 MIDI 选项卡中不显示 MIDI Target 引用。
- **WG-36672** 已修复：在更改已卸载的引用后重新加载 Work Unit 时会发生警告误报。
- **WG-36910** 已修复：在使用鼠标滚动 Project Explorer 的垂直滚动条时，滚动条忽隐忽现。
- **WG-37193** 已修复：在高分辨率显示器上，Multi Editor 中 Link 和 Unlink 图标的大小异常。
- **WG-37353** 已修复：排序操作进度对话框中的 Stop 按钮不起作用。
- **WG-37660** 已修复：只有聚焦在 Project Explorer 上，Audio Files Importer 键盘快捷方式才起作用。
- **WG-37828** 已修复：无法使用箭头键在视图中更改选项卡的分隔类型。
- **WG-38104** 已修复：损坏的 SoundBank 可能会导致 Profile 和 Release 配置故障。
- **WG-38316** 已修复：Capture Log 上下文菜单 Add Game Object to Game Object Watch List - By Name 有时无法添加正确的名称。
- **WG-38797** 已修复：在针对 DirectInput 振动设备调用 AddOutput 时出现声部匮乏问题。
- **WG-39005** 已修复：在初始化后无法马上通过 `DeviceStatusCallback` 获取主设备。
- **WG-39079** 已修复：“复制粘贴”快捷方式在 Event Viewer 中不起作用。
- **WG-39498** 已修复：在 Wwise 设计工具中切换工程时，XAudio2 发生崩溃。
- **WG-39562** 已修复：在编辑 Note 时变换视图会引发崩溃。
- **WG-39683** 已修复：在没有冲激响应文件的情况下尝试通过 Wwise Convolution Reverb 播放声音时显示的错误消息太过笼统。
- **WG-39708** 已修复：在 Watch 包含通配符的情况下执行性能分析时，Wwise 会挂起。
- **WG-39764** 已修复：(WAAPI) 在目标父对象不支持要导入的音频源所用的语言时发生崩溃。
- **WG-39782** 已修复：无法在选中时正确显示 RTPC 编辑器的 S-Curve 图标。
- **WG-40196** 已修复：在应用 125% DPI 缩放时出现缩放问题。
- **WG-40231** 已修复：SoundSeed Grain 包络编辑器存在渲染问题。
- **WG-40266** 已修复：在拖动 Attack 或 Release 时，有时会导致 SoundSeed Grain 出现视觉混乱问题。
- **WG-40390** 已修复：SoundSeed Grain 中的反馈滑杆上不显示 Negative Amplitude。
- **WG-40411** 已修复：在存在很多粒子时，SoundSeed Grain 包络编辑器无响应。
- **WG-40418** 已修复：在 SoundSeed Grain 中调整 Grain Visualizer 的大小时出现渲染问题。
- **WG-40427** 已修复：在 Project Explorer 中重命名新条目时发生崩溃。
- **WG-40428** 已修复：在 SoundBank Generation 日志中排序时有时会发生崩溃。
- **WG-40441** 已修复：在 SoundSeed Grain 中缩放和滚动 Grain Visualizer 时出现渲染问题。
- **WG-40469** 已修复：在 SoundSeed Grain 中滚动、缩放和调整 Grain Visualizer 大小时出现显示问题。
- **WG-40480** 已修复：在滤波器类型为 HPF6 或 LPF6 时，SoundSeed Grain 的 Q 滑杆被禁用。
- **WG-40511** 已修复：(Windows) Integration Demo 示例代码中缺少 \*.filter 文件。
- **WG-40512** 已修复：无法使用键盘激活 SoundSeed Grain 旁通按钮。
- **WG-40638** 已修复：(WAAPI) 在为对象设置 `BypassEffects` 属性时返回错误。
- **WG-40646** 已修复：在调整 SoundSeed Grain Source Editor 窗口大小时，分隔器区域消失。
- **WG-40656** 已修复：SoundSeed Grain 出厂素材中缺少 Conversion Settings。
- **WG-40660** 已修复：Capture Log 中的 SetRTPCValue 和 SetRTPCValueWIthTransition 消息颠倒。
- **WG-40748** 已修复：(Windows) 在快速断开/重连 DirectInput 设备时，假如正在播放包含振动反馈的声音，进入调试模式会触发断言。
- **WG-40752** 已修复：在从 Source Editor 向后导航到包含可检视 RTPC 对象（如 Modulator）的声音时，会弹出编辑器而非返回到该声音。
- **WG-40761** 已修复：在通过 Event Viewer 删除 Event 时，会将其标记为“缺失”而非从列表中移除。
- **WG-40779** 已修复：即便只是将自定义标记添加到 SoundSeed Grain 源一次，也要多次才能撤消。
- **WG-40784** 已修复：在存在很多 SoundSeed Grain 实例时，更改 SoundSeed Grain 源属性或 Conversion Settings 会导致界面卡顿。
- **WG-40836** 已修复：SoundSeed Grain 中的旁通图标有误。
- **WG-40857** 已修复：在 Advanced Profiler 的 Listeners 选项卡中对 Volumes 列进行排序时发生崩溃。
- **WG-40862** 已修复：在 Wwise 转入后台运行时，无法使用标题栏菜单打开模式窗口。
- **WG-40946** 已修复：无法在源插件之间正确共享活跃选项卡和分隔器位置。
- **WG-40971** 已修复：在关闭视图时无法正确保持 Multi-Editor View Mode。
- **WG-41004** 已修复：突然无法正确迁移 Project Settings。
- **WG-41008** 已修复：在 SoundSeed Grain 设置中的 Pitch 值不是零时出现粒子可视化问题。
- **WG-41021** 已修复：在将源文件加载到新的 SoundSeed Grain 实例后执行撤消操作会引发崩溃。
- **WG-41030** 已修复：对于 `ak.wwise.core.object.postDeleted` 和 `ak.wwise.core.object.childRemoved` 主题，有些返回选项会引发崩溃。
- **WG-41159** 已修复：突然无法使用向左键和向右键展开/折叠树结构中的节点。
- **WG-41214** 已修复：在关闭 Wwise 设计工具时，Transport Control 发生崩溃。
- **WG-41340** 已修复：（macOS）无法构建使用 wp.py 为 Mac 目标创建的源插件。
- **WG-41555** 已修复：Opus 中报告的转码后采样率有误。
- **WG-41725** 已修复：在未选择任何路径点的情况下，假如使用鼠标滚轮调节 Positioning Automation 或其他属性的随机值，会发生崩溃。
- **WG-41756** 已修复：有时会在循环或跳转后意外停止 Opus 播放。
- **WG-41814** 已修复：在 Event Editor 中单击 Add Exception...（添加例外…）按钮后，假如未在 Project Explorer Browser 中选择任何对象，可能会发生崩溃。
- **WG-41823** 已修复：在针对 Auxiliary Bus 选择 Show All References 和 Schematic View 时，不显示来自 User-Defined Auxiliary Sends 的引用。
- **WG-41899** 已修复：在快速地重新注册已经注销的游戏对象时，Profiler 的 Emitter-Listener 选项卡中的列表可能会无限增大。
- **WG-41939** 已修复：在内存不足的情况下，部分 Effect 插件发生崩溃。
- **WG-42026** 已修复：在包含 `NULL` 参数或选项的插件中调用 `AK::Wwise::IPluginPropertySet::WaapiCall` 时发生崩溃。
- **WG-42046** 已修复：在实时编辑 RTPC 曲线时，没有更新 Panning vs 3D Spatialization Mix 值。
- **WG-42132** 已修复：(iOS) 在 iPhone 5 和更老机型的设备上播放 Vorbis 音频时，应用程序发生崩溃。
- **WG-42148** 已修复：在将对象拖放到 SoundBank Manager 的列表时，不再重置滚动位置。
- **WG-42201** 已修复：(macOS) 在辅助监视器上显示 About 对话框时，应用程序出现卡顿。
- **WG-42202** 已修复：在加载的性能分析会话中包含未安装的 Effect 插件时发生崩溃。
- **WG-42204** 已修复：在选择非 Windows 平台时，设计工具中不显示 SoundSeed Grain 粒子。

参见
:   - [新功能概述2019.1](whatsnew_2019_1_new_features.html)
    - [重要的迁移说明2019.1](whatsnew_2019_1_migration.html)
    - [平台要求 2019.1](reference_platform_2019_1.html)