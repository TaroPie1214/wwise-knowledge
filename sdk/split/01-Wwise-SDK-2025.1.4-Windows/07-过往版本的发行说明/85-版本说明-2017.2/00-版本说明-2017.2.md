# 版本说明 2017.2

|  |
| --- |
| Wwise SDK 2025.1.4 - Windows |

版本说明 2017.2

以下各节列举并描述Wwise版本2017.1与版本2017.2之间的变化。有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。如果使用联机帮助，您还可以从目录列的顶部选择别的 Wwise 版本。

|  |  |
| --- | --- |
|  | **备注:** **插件开发人员：** 此 Wwise 版本支持通过 Wwise 2017.2 构建的插件。对于通过旧版 Wwise 构建的插件，开发人员必须使用兼容版本重新编译并重新打包。 |

- [平台 SDK 的变化](whatsnew_2017_2.html#platformsdk_changes_2017_2)
- [新功能](whatsnew_2017_2.html#feature_changes_2017_2)
- [API 变化](whatsnew_2017_2.html#api_changes_2017_2)
- [行为变化](whatsnew_2017_2.html#behavior_changes_2017_2)
- [其它更改](whatsnew_2017_2.html#misc_2017_2)
- [漏洞修复](whatsnew_2017_2.html#bugs_2017_2)
- [WAAPI 专项版本说明](whatsnew_2017_2.html#waapi_specific_2017_2)
  - [新增 WAAPI 功能](whatsnew_2017_2.html#feature_changes_waapi_2017_2)
  - [其他 WAAPI 改进](whatsnew_2017_2.html#misc_waapi_2017_2)

# 平台 SDK 的变化

- **Switch SDK:** 已更新至 SDK 3.5.1.
- **Android：**对于 32 位应用程序，已将 Android 所需最低 SDK 级别由 API 9 更改为 API 14。另外，为了去掉文件夹名称中不必要的 API 级别，重命名了 Android 库文件夹。因此，Android 库目录也随之发生了变化：
  - SDK\android-9\_armeabi-v7a **>** SDK\Android\_armeabi-v7a
  - SDK\android-9\_x86 **>** SDK\Android\_x86
  - SDK\android-21\_arm64-v8a **>** SDK\Android\_arm64-v8a
  - SDK\android-21\_x86\_64 **>** SDK\Android\_x86\_64

# 新功能

- **WG-32391** 在设为 Resume 或 Play-From-Beginning 的虚声部数超出具体工程限值时，在 Capture Log 中添加了新的性能分析警告。
- **WG-32758** 扩展了 State 系统，现在可应用于大部分支持 RTPC 的属性 – Wwise 对象和插件。
- **WG-32999** 现在支持使用 WwiseCLI 以制表符分割文件格式导入本地化语音素材。
- **WG-33396** 添加了内置参数 Listener Cone，并将 Object to Listener Angle 重命名为了 Emitter Cone。
- **WG-33758**  **[重大改进！](whatsnew_2017_2_migration.html#motion_migration_what_changes)**合并了 Motion 功能集和音频功能集。现在会将振动设备视为普通的 *Audio Device* 和 *Secondary Output*。如需进一步了解此功能改进对游戏产生的影响，请参阅“ref motion\_migration\_what\_changes”。
- **WG-33884** 现在支持 SCE Audio3d 中新增的散布设置。
- **WG-34123** 在 Property Editor 的 RTPC 选项卡中，将第一条曲线设为默认选项。
- **WG-34174** 为总线添加了 Output Bus Volume、Output Bus LPF 和 Output Bus HPF 控件，方便利用内置 LPF/HPF 对混音总线的输出进行滤波。
- **WG-34198** 全面调整了 2017.1 中引入的 Room 和 Portal 机制，将其打造成了一套完善的声音传播建模解决方案。请参阅 [使用房间和门户](using_rooms_and_portals.html) 了解更多详情。
- **WG-34209** 添加了 SDK 版本和音频包 Load bank failed 错误消息，现在允许指定 SDK 版本和音频包，可以更加轻松地排除故障。
- **WG-34473** 向 Wwise Compressor 插件添加了输入、输出和增益衰减电平表。
- **WG-34650**  **[重大改进！](whatsnew_2017_2_migration.html#secondary_output_migration)**简化了 Secondary Output 管理。通过作用于 Master Bus 的 *Audio Device* 属性在设计程序中整合了 Secondary Output。现在允许根据需要在 Master Mixer Hierarchy 中添加任意数量的 Master Bus。如需进一步了解此功能对游戏产生的影响，请参阅“ [音频输出管理、二路输出和 Sink 插件的重大更改](whatsnew_2017_2_migration.html#secondary_output_migration) ”。
- **WG-35243** 现在允许折叠和展开 Mixing Desk 分区。
- **WG-35313** 改进了 Shift+X (Show Source Editor) 快捷方式，现在会在 Source Editor 中自动显示当前选项。
- **WG-35529** 为了允许弃用 3D 定位中的发声体朝向，将 Enable Spatialization 复选框替换成了具有三种状态的 Spatialization Mode 菜单。

**请参阅 [新功能概述 2017.2](whatsnew_2017_2_new_features.html) 了解更多详情。**

# API 变化

- **WG-34172** 规范了大部分插件名称。比如，AudioInput、Sine 和 ToneGen 现在分别为 AkAudioInput、AkSineTone 和 AkToneGen。
- **WG-34172** 向源插件库添加了 *Source* 后缀。比如，AkSynthOne 现在为 AkSynthOneSource。
- **WG-34172** 重命名了设计插件的 Visual Studio 属性表：由 PropertySheets\AuthoringRelease.props 改为 PropertySheets\Win32\NDebug\_vc120Auth.props；由 PropertySheets\AuthoringDebug.props 改为 PropertySheets\Win32\Debug\_vc120Auth.props。
- **WG-34198** 全面调整了 Spatial Audio：
  - 移除了 `Term`。
  - 移除了 `CalcOcclusionAndVirtualPositions`，并将其功能嵌入到了 `AK::SpatialAudio::SetPosition` 中。
  - 将 `SetEmitterPosition` 重命名为了 `AK::SpatialAudio::SetPosition`，并使用了新的参数。
  - 将 `AddGeometrySet` 重命名为了 `SetGeometry`。
  - 将 `AddImageSource` 重命名为了 `SetImageSource`，并使用了新的帮助类 `AkImageSourceSettings` 封装 `AkReflectImageSource`。
  - 将 `AddRoom` 和 `AddPortal` 分别重命名为了 `SetRoom` 和 `SetPortal`，并使用了新的参数 `AkRoomParams` 和 `AkPortalParams`。
- **WG-34337** 在重新设计 Motion 的过程中，移除了以下条目：
  - 函数 `AK::SoundEngine::SetListenerPipeline`
  - 类 `IAkMotionMixBus`
  - 命名空间 `AK::MotionEngine`，包括函数 `AddPlayerMotionDevice、` `RemovePlayerMotionDevice、` `SetPlayerListener` 和 `SetPlayerVolume` 。
- **WG-34541** 修改了 `AkReflectImageSource` 结构，将其所含字段转移到了子结构 `AkImageSourceParams`、`AkImageSourceTexture` 和 `AkImageSourceName`。
- **WG-34650** 在重新设计 Output Management 的过程中，将 `AddSecondaryOutput` 和 `RemoveSecondaryOutput` 分别重命名为了 `AddOutput` 和 `RemoveOutput`，并使用了不同的参数。`GetSpeakerConfiguration、` `GetPanningRule、` `SetPanningRule、` `GetSpeakerAngles、` `GetSpeakerAngles` 和 `SetSpeakerAngles` 改用了其他参数。从 [AkPlatformInitSettings](struct_ak_platform_init_settings.html) 中移除了 idAudioDevice，替换成了 [AkInitSettings](struct_ak_init_settings.html) 中的 AkOutputSettings.idDevice。彻底移除了 AkAudioOutputType。请参阅 [音频输出管理、二路输出和 Sink 插件的重大更改](whatsnew_2017_2_migration.html#secondary_output_migration) 了解更多信息。

**如需进一步了解有关升级至 2017.2 时对游戏代码所做必要更改的信息，请仔细参阅“ [重要的迁移说明 2017.2](whatsnew_2017_2_migration.html) ”。**

# 行为变化

- **WG-34784** 解除了将声障/声笼强制设为 Game-defined 定位的条件限制。现在声障和声笼驱动的音量和滤波同样适用于采用 3D User-defined 定位的声音。
- **WG-35160** 解除了每个游戏对象最多只能设置 4 个游戏定义的辅助发送这一限制。
- **WG-35338** 改进了 Import Conflict Manager，现在允许多重选择，并支持针对错误列表内选中的所有行统一更改解决操作。

# 其它更改

- **WG-33407** 将 WObjects.xml 从应用程序 bin 文件夹转移到了 Data/WObjects 文件夹。
- **WG-34369** 停用了 32 位 Wwise 设计工具，现在只提供 64 位配置版本。
- **WG-35448** 改进了 Effects 选项卡的选择器列表，现在会显示所有 Effect，而不受活跃平台影响。
- **WG-35704** 移除了 CarSim SDK 示例。

# 漏洞修复

- **WG-20084** 已修复：(Android) 现在可以在任何目标设备上编译源代码。
- **WG-30217** (Mac) 设计工具现在可以连接不止一个 Sound Engine 实例。
- **WG-32885** (Xbox One) 不能像预期那样单独执行默认的左/右触发器。
- **WG-33748** 已修复：(Switch) 在 Switch 上运行某些插件时出现性能问题（缺少 fast-math 编译标记）。只达到 10% 左右。
- **WG-34013** 已修复：在实时编辑 Limit 的范围参数值时，导致限值临时失效。
- **WG-34197** 已修复：在应用修剪和淡变曲线时，XMA 文件的播放行为无效。
- **WG-34491** 已修复：在使用 `excludedFilesInBanks` 选项时，File Packager 停止运行，并显示 *The specified method is not supported*。
- **WG-34573** 已修复：在 Wwise 设计工具中，对于包含无效循环点的声音，无论是否启用了循环，在播放时都会把循环点设在声音范围内。
- **WG-34853** 已修复：波形查看器中的标尺不显示 1 小时之后的时间。
- **WG-34886** 在 Mixing Desk 中，现在只显示 State Group 作用对象正在使用的 State Property。
- **WG-34953** 已修复：Spatial Audio：几何反射有时会从三角形之间或通过边角渗透。
- **WG-34956** 已修复：Spatial Audio Portal 朝向行为异常。
- **WG-34957** 已修复：在发声体启用 Reflect 后，会忽略室外区域的声障。
- **WG-34962** 已修复：在远程捕获后实施本地捕获时，会转储 PROF 文件。
- **WG-34968** 已修复：假如 WwiseCLI 包含空的生成前/后命令 (`-CustomPre/PostGenCmd`)，就会导致不执行任何生成前/后步骤。
- **WG-35070** 已修复：在打开包含选中对象的视图时发生崩溃。
- **WG-35073** 已修复：在列表中显示 Event Action 时，不显示 Event 名称。
- **WG-35111** 已修复：在同时使用 `-Save` 和 `–ConvertExternalSources` 时，WwiseCLI 发生崩溃。
- **WG-35250** 已修复：SoundBank 中没有打包作用于总线的用户辅助发送电平。
- **WG-35261** 已修复：在更改平台后不会更新引用；由于没有更新属性链接，导致出现差异。
- **WG-35291** 已修复：Wwise Profiler 的声像摆位音量中只报告多点定位声音的衰减专有音量，导致其很难识别。
- **WG-35364** 已修复：Obs/Occ 不区分同一游戏对象的多个位置。
- **WG-35577** 已修复：Multi-Edit 视图隐藏了部分 Event Action 属性的控件。
- **WG-35781** 已修复：PluginInfo.xml 包含平台不支持的插件。

# WAAPI 专项版本说明

为了给 Wwise 设计工具提供更为全面的支持，添加并改进了很多 WAAPI 函数和主题或关联参数。有关更多详细信息，请参阅下面的“ [新增 WAAPI 功能](whatsnew_2017_2.html#feature_changes_waapi_2017_2) ”、“ [其他 WAAPI 改进](whatsnew_2017_2.html#misc_waapi_2017_2) ”和“ [WAAPI 漏洞修复](whatsnew_2017_2.html#waapi_bugs_2017_2) ”章节。

## 新增 WAAPI 功能

- **WG-34405** 添加了 API 反射函数 ak.wwise.waapi.getFunctions、ak.wwise.waapi.getTopics, ak.wwise.waapi.getSchema 和 ak.wwise.ui.commands.getCommands。
- **WG-34565** 现在可以利用 WAAPI 在 Switch Container 中添加、移除和订阅指派对象。相当于把子对象拖放到 Switch/State。
- **WG-34589** 为 Get 函数添加了与 Switch Container 子对象关联的上下文对象。
- **WG-34591** 为 Get/Set/Subscribe 函数添加了 Switch Container 和 Music Track 的 Group 和 Default Switch/State。
- **WG-34594** 添加了可以订阅的 Switch Container Assigned Object 主题。
- **WG-34817** 现在可以使用 ak.wwise.core.audio.importTabDelimited 和 ak.wwise.core.audio.import 导入 base64 编码的 WAV 文件。
- **WG-34863** 添加了可以订阅的 ak.wwise.core.object.referenceChanged 主题。

**请参阅 [新功能概述 2017.2](whatsnew_2017_2_new_features.html) 了解更多详情。**

## 其他 WAAPI 改进

- **WG-33144** 将 C++ SampleClient 拆分成了 AkAutobahn 静态链接库和 SampleClient 可执行程序。您可以直接使用 AkAutobahn 静态链接库，无需参考示例代码。
- **WG-33381** 向 WAAPI C++ SampleClient 中的 `Client` 类添加了 `Disconnect()` 方法。
- **WG-33766** 将 C++ SampleClient 中的 CivetWeb 版本升级到了 1.9.1。
- **WG-33794** 已解决：在调用 WAAPI 时退出 Wwise 有时会导致即使关闭主窗口之后 Wwise.exe 进程依然在运行。
- **WG-34285** 在 `ak.wwise.core.getInfo` 中整合了进程 ID 和进程路径。
- **WG-34285** 为了将 Wwise 主窗口调至前台，添加了 `ak.wwise.ui.bringToForeground` 。
- **WG-34291** 在 WwiseCLI 中使用 WAAPI 服务器时，现在可以使用 `ak.wwise.core.object.get` 的 search 变换。
- **WG-34464** `ak.wwise.core.object.get` 的 where 变换现在支持按对象类型和类别筛选。
- **WG-34822** 现在支持为 C++ SampleClient 的 `Client` 类中的每项调用设置不同的超时时间。
- **WG-34898** 现在可以通过 `@` 设置制表符分隔文件中的引用（就像属性一样），弃用了 `~。另外，还可按照与` `ak.wwise.core.audio.import` 相同的语法来设置引用。
- **WG-34939** 向 `ak.wwise.core.object.propertyChanged` 订阅主题添加了平台。
- **WG-35365** 为 Project 对象整合了 `workUnit::isDirty` 。
- **WG-35366** 向 SoundBank 的生成前和生成后步骤添加了 `WaapiWampPort` 和 `WaapiHttpPort` 宏。
- **WG-35382** 向 `ak.wwise.core.object.getPropertyInfo` 返回结果添加了 Wwise 对象引用限制。

## WAAPI 漏洞修复

- **WG-33876** 已修复： `setName` 不能避免 Auxiliary Bus 与现有 Audio Bus 重名。
- **WG-34785** 已修复：在使用 WAAPI 打开工程时，Wwise 不会很快聚焦。
- **WG-34935** 已修复：有可能把属性值设到 Restriction 范围以外。
- **WG-34965** 已修复：文档显示不正确的 WAAPI 模式值。
- **WG-35015** 已修复：在出现 WAAPI 错误时，有时会发生内存泄漏。
- **WG-35381** 现在在已经连接的情况下调用 `ak.wwise.core.connect` 时会返回错误，但不会影响到 Wwise。

参见
:   - [新功能概述 2017.2](whatsnew_2017_2_new_features.html)
    - [重要的迁移说明 2017.2](whatsnew_2017_2_migration.html)
    - [平台要求 2017.2](reference_platform_2017_2.html)