# 版本说明 2022.1

|  |
| --- |
| Wwise SDK 2025.1.4 - Windows |

版本说明 2022.1

以下各节列举并阐述了 2021.1.10 和 2022.1 版本之间针对 Wwise 所作的改进。  
此处提供了有关平台的特定信息：

[Windows 和 Windows UWP 2022.1](windows_releasenotes_2022_1.html)

有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。

- [新增功能](whatsnew_2022_1.html#generic_feature_changes_2022_1)
- [API 改进](whatsnew_2022_1.html#generic_api_changes_2022_1)
- [行为改进](whatsnew_2022_1.html#generic_behavior_changes_2022_1)
- [性能改进](whatsnew_2022_1.html#generic_perf_changes_2022_1)
- [其他改进](whatsnew_2022_1.html#generic_misc_2022_1)
- [漏洞修复](whatsnew_2022_1.html#generic_bugs_2022_1)
- [社区报告的漏洞修复](whatsnew_2022_1.html#generic_community_bugs_2022_1)

# 新增功能

- **WG-21449** 添加了 `AK::SpatialAudio::SetDistanceProbe` API。为了增强第三人称游戏的灵活性，现在允许根据相对于单独游戏对象的距离对声音实施衰减，同时保持相对于“听者”游戏对象的声像摆位和空间化处理。
- **WG-32283** (WAAPI) 添加了 convertExternalSource，其允许根据 wsources 文件中指定的设置对 Wwise 工程以外的音频文件进行转码。
- **WG-32577** (WAAPI) 添加了查询函数 getSwitch 和 getState。getSwitch 可返回有关给定游戏对象 Switch Group 当前状态的信息，getState 可返回有关 State Group 当前状态的信息。
- **WG-38235** (WAAPI) 现在可使用 [ak.wwise.core.object.set](ak_wwise_core_object_set.html) 在 WAAPI 中设置 RTPC。
- **WG-39514** (WAAPI) 现在可使用 [ak.wwise.core.object.set](ak_wwise_core_object_set.html) 来创建或设置源插件和效果器插件。
- **WG-42569** (WAAPI) 添加了远程程序调用 [ak.wwise.core.transport.prepare](ak_wwise_core_transport_prepare.html) 以将对象加载到声音引擎中而不进行播放。
- **WG-45413** 向 `AK::IAkGlobalPluginContext` 添加了 Random Number Generator 服务。
- **WG-49287** 对 Time Stretch 效果器进行了更新：
  - 添加了新的 "Transient Preserving" Stretch Mode、附带 Quality Level 滑杆和 Stereo Processing 模式。
  - 为两种模式添加了音高变换功能，并配置了 Pitch Shift 滑杆和随机化参数。
- **WG-50451** (WAAPI) 现在允许使用 isExplicitSolo、isExplicitMute、isImplicitMute、isImplicitSolo 来获取 Mute 和 Solo 状态。
- **WG-51539** 向 Advanced Profiler 视图添加了 Audio Devices 选项卡，其会列出声音引擎中当前活跃的所有 Audio Device。
- **WG-52323** (WAAPI) 添加了函数 processSounbankDefinitions，其允许导入 SoundBank Defintion 文件。
- **WG-52461** 向 Project Settings 添加了新的 Filter Behavior 选项。现在可选用以下两种方式来将 Voice Low-pass Filter 和 Voice High-pass Filter 属性值结合起来：
  - Sum All Values（默认设置，典型行为）
  - Use Highest Value（新增设置，非累积行为）
- **WG-52686** (WAAPI) 向 Mute 和 Solo 命令添加了可选参数以便指定状态。
- **WG-52767** Reflect 现在提供新的简化模式。在该模式下，其会使用各个声音的衰减曲线对声音的早期反射实施衰减。前提假设是应当按照声音本身所应用的相同曲线来对声音的早期反射实施衰减。该模式称为简化模式。因为用户只需将声音与 Simplified Early Reflection Auxiliary Bus 关联，便可自动对声音的早期反射进行合理的设计。鉴于每个声音都可单独应用衰减，简化模式还允许同一 Reflect Effect ShareSet 对多个音频源的早期反射声实施不同的衰减。为了允许在 Reflect 中对声音的衰减曲线实施一些自定义，还引入了两项属性：距离和衍射扭曲。藉此，可针对来自镜像声源的声音分别突显或弱化距离和衍射产生的效果。若要进一步对 Reflect 曲线进行自定义，仍可选择像之前一样应用自定义曲线。
- **WG-52979** (Spatial Audio) 现在将共线的边缘合并为了单个衍射边缘，以降低对多个边缘进行处理所带来的成本。
- **WG-53001** 现在的 Spatial Audio 反射路径发现更加稳健，能够在使用更少的初级射线的情况下发现更多反射路径。
- **WG-53597** 现在可通过将 PROF 文件拖放到 Capture Log 视图上来打开保存的 Profiler 捕获会话。
- **WG-53796** (WAAPI) 添加了 [ak.wwise.core.object.set](ak_wwise_core_object_set.html) 以批量设置属性和创建对象。
- **WG-53899** 调试控制台中的错误报告或其他各种日志记录机制现在可将所有数字标识符转换为用户可读的名称和标签。我们可以通过读取 Soundbanks.xml 文件或建立对 Wwise 工程的 WAAPI 连接来实现这一点。有关详细信息，请参阅 `AK::Monitor::AddTranslator` 函数以及 [AkXMLErrorMessageTranslator](class_ak_x_m_l_error_message_translator.html) 和 AkWAAPIErrorMessageTranslator 类。对于较大工程，在出现错误时可能会产生延迟。在这种情况下，可选择禁用 XML 和/或 WAAPI 转换器。两种转换器都设有超时参数，用以限制搜索标识符所花的时间。
- **WG-54118** 现在可将对 Spatial Audio 路径的计算和验证分散到若干帧中以避免 CPU 用量达到峰值。
- **WG-54310** 添加了一个 Auto-defined SoundBank 选项。若启用，Wwise 会在可能的情况下针对每个 Event 和 Aux Bus 自动定义 SoundBank。Refer to [Automatically Defining SoundBanks](https://www.audiokinetic.com/library/edge/?source=Help&id=auto_defining_soundbank) for more details.

用户可通过 SoundBank Settings 启用 Auto-defined SoundBank。有关更多详细信息，请参阅 [SoundBank Settings](https://www.audiokinetic.com/library/edge/?source=Help&id=project_settings_soundbanks_tab)。

- **WG-54420** 现在会在单击 User Preferences 对话框的 OK 按钮时应用字体大小更改。
- **WG-54953** 现在支持针对执行 Audio Object 处理的总线计量 Loudness 和 True Peak 值。
- **WG-55073** Game Sync Monitor 现在会针对各种 RTPC 作用域（游戏对象、播放 ID 和 MIDI）显示所有属性的 RTPC 值，而无论 RTPC 是否与当前播放的声部关联。
- **WG-55094** 当可在 WAAPI 函数或 WAQL 查询中指定限定对象名称时，现在还可以 "Global:123456" 格式指定全局 Short ID。
- **WG-55349** Effect Settings 视图的 Metering Bar 现在会列出在运行时插入了效果器的对象。藉此，可对以编程方式指派的 Mastering Suite ShareSet 实施性能分析。
- **WG-55428** 向 WwiseConsole 添加了 "verify" 操作。这样就可在不保存或迁移的情况下加载工程以验证加载日志。之前仅可在 WwiseCLI 中实现，无法在 WwiseConsole 中实现。
- **WG-55757** Attenuation ShareSet 提供新的 Obstruction、Occlusion、Diffraction 和 Transmission 曲线。用户可针对每个声音加以禁用或自定义。
- **WG-56146** 现在可使用感叹号或减号来在 Project Explorer、List View 和 Schematic View 中执行的搜索中排除特定的字符串。比如，若在搜索时输入 boy -running，便会查找包含单词 "boy" 但不含单词 "running" 的对象。
- **WG-56344** 针对生成 SoundBank 时生成的文件自动更新版本控制系统。有关更多详细信息，请参阅 [SoundBank Settings](https://www.audiokinetic.com/library/edge/?source=Help&id=project_settings_soundbanks_tab)。版本控制系统中更新的文件包括：
  - 生成的 SoundBank (.bnk) 文件。
  - SoundBank 元数据文件（.xml 和/或.json）。
  - 复制的媒体文件。
- **WG-56567** 现在声音引擎中提供 CPU 性能分析的外部挂钩。这样就可使用平台专用性能分析工具或其他应用程序来更好地了解声音引擎的 CPU 用量：
  - `AkInitSettings::fnProfilerPushTimer`
  - `AkInitSettings::fnProfilerPopTimer`
  - `AkInitSettings::fnProfilerPostMarker`
- **WG-56797** 现在可在按下 Shift 的同时将对象拖到 Schematic View 中来选择附加对象。
- **WG-56896** Game Sync Monitor 现在会显示 Switch Group 和 Switch 值。
- **WG-57049** 现在可在 WAQL 和 WAAPI 返回选项中使用点号语法来直接访问所返回 JSON 对象的成员。比如，您可以直接针对 maxDurationSource.trimmedDuration、maxRadiusAttenuation.radius 或其他类似情形使用 WAQL 关键字 "where"。
- **WG-57075** 移除了 SoundBank 生成工具 CopyStreamedFiles.exe。该功能已替换为新的 SoundBank 设置 Copy Loose/Streamed Media。有关更多详细信息，请参阅 [SoundBank Settings](https://www.audiokinetic.com/library/edge/?source=Help&id=project_settings_soundbanks_tab)。
- **WG-57189** (Spatial Audio) 现在可通过传递 AK\_INVALID\_AUX\_ID 来使用 `AK::SpatialAudio::SetImageSource`，并在 Wwise 设计工具中指派 Early Reflections Auxiliary Bus。`AK::SpatialAudio::SetImageSource` API 不再接收 Room 参数。您可以通过过滤镜像声源来确保只有所关联 Room 与发声体和听者所在 Room 匹配的镜像声源才会限制该功能的使用。用户需从游戏端逻辑添加和移除镜像声源来获取所需行为。
- **WG-57192** 现在可在 Game Object 3D Viewer 中显示来自 SetImageSource API 的 Spot Reflector。
- **WG-57261** 添加了 Set Effect Event 动作。这样就可在运行时覆盖效果器。
- **WG-57299** 简化了 Transport Control 以使界面更加简洁。现在通过 Play 按钮右侧的走带播放选项按钮来访问 **Original** 和 **Inc. Only** 。现在会在属性因静音或音量变化等事件而发生更改时高亮显示 Reset 按钮。
- **WG-57551** Game Object 3D Viewer 中的 Portal 现在会显示与其关联的 Front Room 和 Back Room 的 ID 和名称。
- **WG-57870** Wwise Spatial Audio 及 Wwise 声音引擎现在支持设定大世界坐标。空间内的所有位置均以 64 位浮点数的形式传给 Wwise。几何构造现在传给 Spatial Audio，其顶点位置与局部坐标空间相对。为了在几何构造的世界坐标系和局部坐标系之间转换，可创建 Geometry Instance 来定义转换。您可以针对同一 Geometry Set 创建多个实例，以此减少传给 Wwise 的数据并降低内存用量。
- **WG-57936** 对 SoundBank 生成元数据文件进行了重大更改：
  - 新增了包含全局工程信息的元数据文件：ProjectInfo.(xml,json)
  - 新增了包含平台特定信息的元数据文件：PlatformInfo.(xml,json)
  - 对包含所有和单个 SoundBank 信息的元数据文件（SoundBankInfo.(xml,json) 等）的内容的语法进行了大幅修改。
  - 为了减小元数据文件的大小，将一些共同信息从包含所有和单个 SoundBank 信息的元数据文件移到了工程和平台元数据文件。
- **WG-57940** 将 Property Help 视图重命名为了 Contextual Help 视图，并将其添加到了 Profiler 布局。除了提供选定属性的详细信息，该视图现在还提供 Capture Log 中所选错误的详细信息。
- **WG-57983** 添加了新的设置 `AkSpatialAudioInitSettings::uDiffractionOnReflectionsOrder`，来替代 bEnableDiffractionOnReflections。之前，若设为 true，则只计算反射路径上的一个衍射点。现在，允许根据需要自行设定衍射点数。
- **WG-58052** 现在允许在 AK Convolution Reverb Effect Editor 中更改 Block Size 属性（之前其值固定设为 1024）。这样的话便可在音频信号延迟和效果器的摊销性能之间加以权衡。有关详细信息，请参阅 [AK Convolution](https://www.audiokinetic.com/library/edge/?source=Help&id=wwise_convolution_reverb_plug_in) 文档。
- **WG-58078** 添加了新的函数 [ak.wwise.core.getProjectInfo](ak_wwise_core_getprojectinfo.html) 以便检索有关当前工程的信息。
- **WG-58433** 添加了新的 3D Audio Bed Mixer 插件，其可用于控制通过总线发送的 Audio Object 数量。
- **WG-58682** 添加了新的 SoundBank 设置以便管理输出文件夹。有关更多详细信息，请参阅 [SoundBank Settings](https://www.audiokinetic.com/library/edge/?source=Help&id=project_settings_soundbanks_tab)。
  - Copy Loose/Streamed Media：将所需媒体文件从 .cache 文件夹复制到输出文件夹。
  - Remove Unused Generated Files：移除之前生成/复制但现已不再需要的文件。
  - Use Source Control for Generated Files：根据对输出文件夹执行的操作更新版本控制系统。
- **WG-58751** 将 Reflect 的 Effect Editor 中的 Smooth Distance 列替换为了 Delay 列。
- **WG-59217** 向 Meter Effect Editor 添加了新的 Infinite Hold 选项。藉此，可无限期保持输出值。这在暂停游戏的情况下实施旁链压缩时会很有用。
- **WG-59491** 添加了新的 3D Audio Bed Mixer 插件，其可用于控制通过总线发送的 Audio Object 数量。
- **WG-59606** 现在可让声音穿过路径到某一 Room，然后再通过别的 Portal 返回听者所在 Room。
- **WG-60494** 现在会通过 `AkInitSettings::fnProfilerPostMarker` 报告新的性能书签，以此指示声音引擎检测到设备发生了 "Voice Starvation" 事件。
- **WG-60679** SoundBank 生成：为方便进行调试，在生成日志中添加了传给用户的信息。
- **WG-61081** 现在可链接平台并在 AK Convolution Reverb 效果器中定义 Channel Mixdown 设置而无需创建单独的 ShareSet。比如，您可以在某个平台上指定冲激响应的单声道下混，同时针对 CPU 强劲且内存充足的其他平台指定立体声下混。

# API 改进

- **WG-52324** (WAAPI) 添加了主题 ak.wwise.core.profiler.stateChanged 和 ak.wwise.core.profiler.switchChanged，以便订阅有关 State Group 和 Switch Group 变化的通知。
- **WG-55694** (WAAPI) 添加了 [ak.wwise.core.sound.setActiveSource](ak_wwise_core_sound_setactivesource.html) 函数和 activeSource 访问器。
- **WG-55975** 负责控制 AkSemaphores 的函数（如 AkCreateSemaphore）现在接收 AkSemaphore& 而非 AkSemaphore\* 作为自己的参数。
- **WG-56507** TryUnsetMedia 现在会发布异步停止命令并将媒体标记为不可用，以确保最终能够成功实现对 TryUnsetMedia 的重复调用。
- **WG-56825** 插件 API 和回调：将 `AK::IAkMetering` 接口转换为了普通结构 `AK::AkMetering`。
- **WG-57085** 示例库：`CAkFileHelpers::CloseFile` 现在接收 [AkFileDesc](struct_ak_file_desc.html) 而非 AkFileHandle 作为所有平台的输入参数。
- **WG-57285** 向 `AK::ISourceControl::PluginInfo` 添加了新的命令，以便支持更多没有用户界面的操作。用户可在版本控制系统下更新输出文件（生成的 SoundBank 和复制的媒体文件）时使用这些命令。
- **WG-57835** 原来的 Mixer 插件 API `IAkMixerInputContext::GetInputParam()` 需要新的参数来允许针对发送到混音器插件的 Wwise 对象使用元数据插件。
- **WG-58049** Wwise 声音引擎现在支持在定位时使用双精度值来为游戏对象设定大世界坐标。即便对于数十亿单位大小的世界，也可按预期设置声音的定位行为。为此，我们对处理游戏对象位置的 API 进行了更新，以便使用两个新的类型 [AkWorldTransform](struct_ak_world_transform.html "Position and orientation of game objects in the world (i.e. supports 64-bit-precision position)") 和 [AkVector64](struct_ak_vector64.html "3D 64-bit vector. Intended as storage for world positions of sounds and objects, benefiting from 64-b...") 来提供附加数据。其中包括将 AkSoundPosition 和 AkListenerPosition 的 typedef 由 [AkTransform](struct_ak_transform.html "Position and orientation of objects in a \"local\" space") 改为了 AkWorldTransform。有关详细信息，请参阅迁移说明中的 [为 Game Object 设定大世界坐标](whatsnew_2022_1_migration.html#large_world_coordinates_for_game_objects) 章节。
- **WG-58395** 添加了 `AkMemSettings::bUseDeviceMemAlways` 初始化参数，以便仅为设备和非设备内存实例化一个内存堆，而非为两者分别实例化一个内存堆，以此降低特定平台的内存用量。
- **WG-58561** `AK::Wwise::SourceControlContainers::IAkList` 现在每次管理一个 AkPos 实例。也就是说，负责返回 AkPos 实例的方法现在会使所有之前获取的 AkPos 失效，并且在迭代列表时不得再调用这些方法。有关更多详细信息，请参阅代码内的 SDK 文档。
- **WG-59164** 移除了 `AkCommSettings::uNotification` 初始化参数：现在只有一个用于与 Wwise 设计工具进行通信的动态端口。
- **WG-59243** (WAAPI) 对函数 [ak.wwise.core.soundbank.generated](ak_wwise_core_soundbank_generated.html) 所返回信息的内容和格式进行了修改。
- **WG-59258** 将函数 `AK::Wwise::Plugin::IProgress::IsCancelled` 设为了常量。
- **WG-59775** (WAAPI) 添加了新的错误 URI `ak.wwise.unknown_class_id`。现在会在错误 ak.wwise.invalid\_language、ak.wwise.unknown\_language、ak.wwise.unknown\_platform 和 ak.wwise.invalid\_type 中提供更多详细信息。
- **WG-60226** 与 IAkPluginServiceRNG 绑定用来获取声音引擎的随机数生成器所用种子值的函数现在会同时增大种子值。

# 行为改进

- **WG-47808** 为了方便使用，对鼠标滚轮的缩放和滚动修改器做了改进。大部分基于图形的视图（如 RTPC 编辑器、Music Segment Editor 和 Source Editor）具有以下新的鼠标滚轮行为。注意，在鼠标位于纵轴之上时，所有输入都会影响对立平面。比如，在按住 Ctrl 的同时滚动鼠标滚轮会垂直缩放而非水平缩放。
  - 鼠标滚轮：水平滚动
  - Ctrl+鼠标滚轮：水平缩放
  - Shift+鼠标滚轮：垂直滚动
  - Ctrl+Shift+鼠标滚轮：垂直缩放
- **WG-52328** (WAAPI) 添加了主题 ak.wwise.core.profiler.gameObjectRegistered、ak.wwise.core.profiler.gameObjectUnregistered 和 ak.wwise.core.profiler.gameObjectReset，以便订阅有关游戏对象状态的通知。
- **WG-52778** Mute 和 Solo 按钮现在使用非粗体文本图标，以使隐式静音/独奏状态更加易于辨识。
- **WG-53884** 监控队列不会再在队列满的时候删除监控消息。现在队列会等待读取器为新的消息腾出空间。这可能会在实施性能分析时导致一定的声部匮乏。倘若在 Profiler Settings 中选择了很多数据类型，在启动 Profiler 的过程中容易出现声部匮乏问题。
- **WG-54026** 移除了命令 "Profiler/Set Keyboard Focus to Text Filter"。现已替换为更加通用的 "View/Search in Current View"，两者作用是相同的。除了 Profiler 视图，这个新命令还支持在 RTPC 和 Attenuation 选项卡中应用 Text Filter 功能。另外，其还可用在 Project Explorer、List View 和 Schematic View 中。
- **WG-54052** 在 List View 和 Schematic View 中，在对象的快捷菜单中选择 **Show in List View**/**Show in Schematic View** 现在会为 Search 字段中的这些对象创建 WAQL 查询。另外，现在还可将对象从 List View 或 Schematic View 拖到 Search 字段上来仅以 WAQL 查询的形式搜索这些对象。
- **WG-54205** 之前无法保存已卸载 Work Unit 的新颜色。为了避免这一问题，现在针对已卸载的 Work Unit 禁用了 SetColor 命令。
- **WG-54703** 通用的 Multi Editor 属性（如 Color 和 Inclusion）现在被放在了 Common 分组中。声部属性和总线属性现在被放在了与之对应的分组内。
- **WG-54820** 在 WAAPI [ak.wwise.core.object.create](ak_wwise_core_object_create.html) 操作失败时，将撤消在执行期间对工程所作的全部更改。
- **WG-55850** 在低通滤波器处于活跃的状态下，声音播完不再会出现毛刺噪声或断续问题。在此之前，低通滤波器的尾音可能会导致出现所述问题。
- **WG-56382** 现在可在光标处在“编辑”字段（如“搜索”字段）中时使用键盘快捷方式来运行命令。注意，不会执行涉及编辑控制按键的命令（如向左键和 Insert）：仍会赋予编辑功能以键位映射优先级。
- **WG-56404** 现在可叠加应用声障和衍射，而非每次只能应用两者之一。
- **WG-56612** 现在在对象的快捷菜单中选择 **Show in List View** 会将键盘聚焦于打开的 List View 中的 Search 字段。
- **WG-56816** 文本和数值字段中的编辑操作现在更加连贯了。在将键盘聚焦于某个字段时，会自动选中该字段中的文本。您可以通过按下 Enter 来进入或退出字段编辑模式。按下 Ctrl+Enter 可退出 Notes 字段。
- **WG-57307** 对 Meter 插件输出值计算进行了修改。在 Peak 模式下，现在所有声道使用统一的峰值。在 RMS 模式下，对于给定的源信号，各种声道配置的结果现在更加一致了。在使用 Meter 实施旁链压缩时，电平差异可能会影响现有工程的混音。
- **WG-57355** 插件 DataWriter 的 WriteString 函数不再在字符串末尾附加 4 个字节。
- **WG-57394** "Balance-Fade" Speaker Panning 的响度现在与 Direct Assignment 保持一致。也就是说，对于具有不止 1 个声道的声音，音量比之前更高了。请参阅 [响度改进](whatsnew_2022_1_migration.html#loudness_changes_2022_1) 了解更多详情。
- **WG-57686** 现在可同时打开多个 Control Surface Binding 视图。另外，现在还可在这些视图中激活/停用 Control Surface Session，并通过 Control Surface Toolbar 来停用它们。
- **WG-57857** 对 Compressor 和 Expander 增益衰减值计算进行了修改：对于给定的源信号，各种声道配置的结果现在更加一致了。电平差异可能会影响现有工程的混音。
- **WG-58042** 现在会针对源文件和生成的文件在 File Manager 中显示版本控制状态。
- **WG-58603** (Spatial Audio) 不再将超出 100% 衍射的衍射路径或超出所有当前在播声音的最大衰减距离的路径传给声音引擎来实施渲染。另外，除非启用调试显示选项，否则不会在 Game Object 3D Viewer 中显示它们。注意，距离衰减和衍射曲线都要设计为逐渐减弱直到没有声音以免出现断续问题。
- **WG-58711** 在 Multi Editor 为当前视图且包含多个对象的情况下执行命令（如 Show in List View）时，命令现在使用 Multi Editor 中所含的对象。
- **WG-60241** 为了方便使用，对鼠标滚轮的缩放和滚动修改器做了改进。Mixing Desk 现在具有以下行为：
  - 鼠标滚轮：垂直滚动
  - Ctrl+鼠标滚轮：水平缩放
  - Shift+鼠标滚轮：水平滚动
- **WG-60288** (Spatial Audio) Spatial Audio API 中不再使用 `AK::SpatialAudio::String`，现在替换为了标准的 C 字符串，避免通过外部代码在声音引擎内分配内存。另外，为了方便直接传到对应函数中，还从 [AkRoomParams](struct_ak_room_params.html "Parameters passed to SetRoom") 和 [AkPortalParams](struct_ak_portal_params.html "Parameters passed to SetPortal") 结构中移除了相应字符串。这样便无需在参数结构中使用构造函数、复制构造函数及析构函数方法，从而简化客户端代码。
- **WG-60440** 针对所有平台将 `AkInitSettings::uNumSamplesPerFrame` 的默认值改为了 512。这样会略微增加 Wwise 中的即时可用 CPU 用量，但可以大幅缩短声音引擎中的总计音频延迟。为了实现游戏的总计音频延迟和可用计算资源之间的平衡，仍建议对 "Samples Per Frame" 和 "Number of Refills In Voice" 进行适当调节。
- **WG-60762** (Spatial Audio) 使用 `AK::SpatialAudio::SetEarlyReflectionsVolume` 的早期反射音量设置现在适用于使用 `AK::SpatialAudio::SetImageSource` 的镜像声源以及通过几何构造计算的反射。
- **WG-60985** Time To First Reflection 变量的单位由秒改为了毫秒。之前映射到此变量的 Game Parameter 现在必须以毫秒而非秒为单位。
- **WG-61126** 为了使低振幅样本不再有嘶嘶声，对 Crankcase Audio REV 2 ADPCM Decoder 做了改进。
- **WG-61755** Event Action 无法再修改没有指定效果器的对象上应用的的 Effect Bypass。若对象没有父对象或其以显式方式覆盖效果器列表，则会有对象指定效果器。

# 性能改进

- **WG-47020** 大幅提升了对声部和总线混音通路应用 LPF 和 HPF 效果器时的性能。将 LPF 和 HPF 效果器的吞吐量性能提升了 1.5-5.0 倍（具体取决于 CPU 架构和正在处理的声部数）。对于采用 AVX2 指令集的高端 ARM CPU 和 x86 CPU，效果应该最为明显。
- **WG-53573** 在游戏中同时使用大量 RTPC 或 Switch 并以此驱动多个结构的情况下大幅提升了运行时性能。
- **WG-55298** 对于基于声道的效果器，将 Peak 模式下 Meter 插件的性能提升了近 4 倍。
- **WG-57259** 提升了 Clear Audio File Cache 的性能。
- **WG-58106** 通过确保每次分配的缓冲区长于一帧，减少了由 `AkPipelineBufferBase::GetCachedBuffer` 产生的短时内存分配数。
- **WG-59293** 在 `AkSpatialAudioInitSettings::uMaxReflectionOrder` 设为 0 时禁用了反射射线投射。
- **WG-60536**针对具有高度声道的扬声器配置提升了 3D 声像摆位的性能。
- **WG-60982** 提升了 Classic 模式下并未实际进行拉伸处理时 Time Stretch 的性能。
- **WG-61053** 在连接 Wwise Profiler 并激活部分 Profiler Settings（如 Voice Inspector Data）时，大幅降低了运行时声音引擎和 `AK::Monitor`  线程的 CPU 开销。这应当会大大提高 Wwise 中报告的 CPU 测算结果的精度。

# 其他改进

- **WG-42520** 增大了 Mixing Desk 中所用的字体大小。其现在与其他视图中所用的大小匹配。
- **WG-43348** 为了与 Property Editor 中 RTPC 选项卡的布局协调一致，对 Attenuation Editor 内的各项元素进行了调整。调换了列表视图和坐标图的位置，新的分隔条方便对空间进行管理。
- **WG-44906** 对 Project 菜单进行了调整，确保一段为基于工程的条目，一段为用户设置。最近打开的工程现在被放在了 Open Recent 子菜单中（就在 Open 菜单项下面）。
- **WG-46458** References 按钮现在会针对 0、1 和一项以上引用显示不同的彩色图标。这样便可轻松识别 ShareSet 被多个对象使用而需要特别注意的情形。
- **WG-53565** 移除了 Visual Studio 2015 对库的分发。
- **WG-54749** 将 rpmalloc 更新到了 1.4.3 版本。
- **WG-54761** 将 Default User Settings 对话框重命名为了 Default Object Values 以更清晰地反映其功能。
- **WG-54854** (Mac Authoring) 将 Contextual Help 标志移到了 Wwise 工具栏中 Log 标志的左侧。
- **WG-55196** 将 ShowUserProjectSettings WAAPI 命令重命名为了 ShowDefaultObjectValues。同时，将 Show User Project Settings 键盘快捷命令重命名为了 Show Default Object Values。
- **WG-55385** 移除了 SoundFrame。有关 WAAPI（替代 SoundFrame）的详细信息，请参阅 [使用 Wwise Authoring API（WAAPI）](waapi.html) 章节。
- **WG-55853** 对 [AK\Tools\Common\AkVectors.h](_ak_vectors_8h.html) 中的结构做了一些小的改动：
  - 通过赋值运算符返回引用。
  - 向不修改对象的成员函数添加常量。
  - 通过 Normalize() 函数返回引用而不是常量引用。
- **WG-56251** 对线程本地存储的使用进行了调整，确保声音引擎不再消耗 TLS 槽或其他平台特定对应项（如 pthread\_key）。
- **WG-57475** 在新建工程时所用的工程模板中添加了 WAQL 示例。
- **WG-57497** 移除了 Wwise SoundSeed Impact 效果器插件。可考虑改用 [Impacter](https://www.audiokinetic.com/library/edge/?source=Help&id=impacter_plug_in_source) 源插件。
- **WG-57578** Wwise Level 3 Source Code (L3) 构建现在会将警告视为错误。
- **WG-58130** 对版本控制处理操作进行了诸多性能改进，以让 File Manager 的使用更加顺畅。对 Source Control API 所用容器实施了优化，现在可批量处理来最大限度地提高吞吐量。
- **WG-58202** AkVariant 不再使用被弃用的 std::codecvt 辅助程序。
- **WG-58232** (WAAPI) 从 [ak.wwise.core.getInfo](ak_wwise_core_getinfo.html) 函数返回的目录结果对象移除了 "log" 属性。
- **WG-58779** 提高了文件系统路径表示的内存效率。
- **WG-58921** 在执行操作后，仅从 File Manager 重新加载 Source Control 图标。
- **WG-59903** 添加了对采用 Windows Common Runtime Language 构建的设计工具插件的支持。
- **WG-59935** 更正了所有源代码文件中的版权年份，并移除了动态构建号及版本号。在 Visual Studio 中调试 Wwise 声音引擎代码时，不会再在文件实际相同时报告源文件不同。
- **WG-59996** 针对 WAAPI 和 wp.py 将 Python 的最低版本提高到了 3.7。不再对 Python 2 提供官方支持。
- **WG-61085** 将 Unity Addressables Package 依赖项更新到了 1.18.19。
- **WG-62612** Wwise 设计工具现在会提示系统针对 AMD 和 Nvidia GPU 使用高性能图形模式。

# 漏洞修复

- **WG-47645** 已修复：在用户没有通过选择第一个单元格来选中当前行时，向上键和向下键无法正确更改行选择。向上键和向下键现在可在 Edit 模式下在列表中的字段之间上下移动焦点。Enter 键现在可同时用来进入和退出 Edit 模式。
- **WG-48738** 已修复：Time Stretch 插件会减小初始瞬态的振幅。
- **WG-49144** 已修复：在 Source Control 插件向 User Preferences 提交无效参数时发生崩溃。
- **WG-52204** 已修复：Audio File Conversion 对话框的标题被裁剪。
- **WG-52631** 已修复：在 Profiler Statistics 视图中更改模式时显示日志消息。
- **WG-52675** 已修复：在工程加载过程中，Wwise 菜单栏处于可用状态，并可能导致发生崩溃。
- **WG-54476** 已修复：有时无法正确报告键盘快捷键冲突。
- **WG-54546** 已修复：在删除或取消链接 Blend Container 的子对象时可能会发生崩溃。
- **WG-54817** 已修复：在声音引擎运行数小时或更长时间时，自动定位可能会出现精度错误。
- **WG-55005** 已修复：既没有报告超出范围的 State 值，也没有在加载工程时加以修正。
- **WG-55028** 已修复：在连接 Wwise 的同时游戏加载 SoundBank 可能会引发崩溃。
- **WG-55439** 已修复：在监控超过 255 个位置的游戏对象时出现问题。
- **WG-55466** 已修复：(WAAPI) 头文件生成脚本与 Python 3 不兼容。
- **WG-55505** 已修复：(Spatial Audio) 在 Game Object 3D Viewer 中启用 **Show Portal Info Text** 时，Portal 声障值的显示不一致。
- **WG-55559** 已修复：在 Work Unit 的 PluginData 段为空时没有调用插件的 `AK::Wwise::Plugin::CustomData::InitFromWorkunit()` 函数。
- **WG-55950** 已修复：在播放已经移到另一文件夹的音频文件时发生崩溃。
- **WG-55978** 已修复：在向多个具有不同采样率的设备播放音频时，Wwise 设计工具经常发生匮乏问题。
- **WG-55984** 已修复：在调用的 WAAPI 函数 [ak.wwise.core.object.get](ak_wwise_core_object_get.html) 包含仅由 GUID 组成而无双引号和美元符号的 WAQL 查询时发生崩溃。
- **WG-56470** 已修复：在多个线程中并发执行 Spatial Audio 作业时，随机射线投射给出略不相同的结果。
- **WG-56551** 已修复：没有指示 Performance Monitor 中禁用的性能分析数据类型。
- **WG-56692** 已修复：在通过调用 `StartProfilerCapture()` 启动性能分析时没有显示 Output Peak。
- **WG-56826** 已修复：在打开 Attenuation Editor 时，若已经启用 Cone Use，Cone Preview 会没有响应。
- **WG-56835** 已修复：在减小窗口宽度后，Voice Monitor 坐标图被裁剪。
- **WG-57036** 已修复：在采用 High DPI 监视器设置和较大字体大小时，Music Segment Editor 内 Voice Volume 文本框中的数值被裁剪。
- **WG-57048** 已修复：在将 Work Unit 重命名为接近 260 个字符的名称时发生崩溃。
- **WG-57198** 已修复：在 List View 中将鼠标悬停在带有滑杆的文本框之上时，文本对齐发生变动。
- **WG-57371** 已修复：在特定采样率下初始化声音引擎时，音频重采样发生无限循环。
- **WG-57379** 已修复：在生成包含 Impacter 插件实例的 SoundBank 时可能会发生崩溃。
- **WG-57389** 已修复：Game Sync Monitor 在工具提示中显示来自同一行的重复值。
- **WG-57720** 已修复：(Mac Authoring) 浮动视图被裁剪。
- **WG-58047** 已修复：在更改工程的语言后生成 SoundBank 时发生崩溃。
- **WG-58463** 已修复：仅按下 Alt 键就会从用户界面移除键盘焦点。
- **WG-58959** 已修复：在 Perforce 配置无效时没有相应地生成错误消息。
- **WG-59166** 已修复：在打开工程或更改音频设置时，Wwise 设计工具频频停止运行。
- **WG-59356** 已修复：在连续生成 SoundBank 时可能会产生不同的 SoundBank 内容。SoundBank 包含相同的条目，但顺序有所不同。
- **WG-59389** 已修复：Wwise 报告的属性具有未知平台的值。在保存工程时不会移除所述值。
- **WG-59471** 已修复：在结合多点定位 Game Object 使用内置 RTPC 时，Voice Inspector 监控数据损坏。
- **WG-59496** 已修复：在执行复制粘贴操作后，Wwise 用户界面有时反应迟钝。
- **WG-60024** 已修复：只要加载包含 AK Convolution ShareSet 的工程，就会导致工程变为未同步状态。
- **WG-60212** 已修复：在首次成功加载会话后尝试加载不兼容的性能分析器会话时发生崩溃。
- **WG-60406** 已修复：在显示与 Crankcase Audio REV 2 插件对应的 Source Editor 时，工程变为未同步状态。
- **WG-60692** 已修复：(Spatial Audio) 在播放新的声音时，Room 游戏对象直到听者移动才更新其声音路径。
- **WG-61079** 已修复：在活跃平台发生更改时，AK Convolution Reverb 插件没有更新可用控制信息或统计数据。
- **WG-61209** 已修复：(Spatial Audio) 在单条路径中将房间底噪的 Portal 声笼值应用了两次。
- **WG-61328** 已修复：(Spatial Audio) SetGameObjectRadius 直到听者移动才更新路径。
- **WG-61397** 已修复：(Spatial Audio) 在穿过宽度较大的 Portal 时，衍射路径可能会在声音的衰减半径末端之前被切断。
- **WG-61595** 已修复：在将 Wwise 连接到游戏时会改写游戏中由 Event Action 设置的 Effect Bypass 值。
- **WG-61684** 已修复：(wp.py) 在发现 Visual Studio 2015 的安装目录时发生崩溃。
- **WG-61691** 已修复：在将性能分析器连接到远程平台时可能会发生崩溃。
- **WG-61781** 已修复：在 Wwise 中播放原始文件时可能会忽略 WAV 标记。
- **WG-62116** 已修复：Audio Device 电平表中有时不显示 System Audio Object。
- **WG-62353** 已修复：有时无法正确恢复 Project Explorer 中展开和折叠的节点。
- **WG-62433** 已修复：Low-pass filter 标签与控件重叠。

# 社区报告的漏洞修复

- **WG-26295** 已修复：File Manager 对话框中存在 GetFileStatus 性能问题。
- **WG-39471** 已修复：将 Wwise 设计工具对象 "AudioSource" 重命名为了 "AudioFileSource"，以避免 [ak.wwise.core.object.get](ak_wwise_core_object_get.html) 返回的错误。
- **WG-42166** 已修复：在单击已经选中的对象时没有在 Transport Control 或 Property Editor 中予以加载。
- **WG-44005** 已修复：(WAAPI) [ak.wwise.core.audio.import](ak_wwise_core_audio_import.html) 没有遵从所有 importLocation 参数。
- **WG-46888** 已修复：每次单击曲线都会重置对 RTPC 选项卡坐标图的缩放。
- **WG-47131** 已修复：无法将 State 从某一对象复制到另一对象。
- **WG-52612** 已修复：没有自动展开 Command Add-on 中的 Environment Variable。
- **WG-54050** 已修复：Music Track 和声音对象的 "IsZeroLantency" 属性的名称拼写有误。现已更正为 "IsZeroLatency"。
- **WG-54582** 已修复：Event Editor 的 Target 列不显示 State 和 Switch 的父对象名称。
- **WG-54746** 已修复：File Manager 中无法将名称里带有点号的文件夹识别为文件夹。
- **WG-55001** 已修复：(WAAPI) JavaScript 和 TypeScript 的 WAAPI 头文件中缺少 [ak.wwise.core.object.delete](ak_wwise_core_object_delete.html) 和 [ak.wwise.core.audio.import](ak_wwise_core_audio_import.html) 。
- **WG-55033** 已修复：在加载的 Music Track 包含没有 Audio Source 的 Music Clip 时未报告错误。
- **WG-55669** 已修复：Loudness Meter 的布局使得很难确保在保留常用区域的情况下减小视图的大小。
- **WG-56405** 已修复：在将内容从 Project Explorer 复制粘贴到外部编辑器时，无法保持与 Project Explorer 中的排序顺序相同。
- **WG-56408** 已修复：在另一应用程序意外连接到其网络端口时，Wwise 声音引擎通信代码可能会过度分配内存。
- **WG-57212** 已修复：在指定 Audio Device ShareSet 但使用默认硬件 ID (0) 时，即便有相应设备，`AK::SoundEngine::SetOutputDeviceEffect` 也会产生 "Device not found error"。
- **WG-57251** 已修复：(WAAPI) 在使用 base64 内容和 Perforce 时导入失败。
- **WG-57838** 已修复：在具有高度声道的总线上插入有 AK Convolution Reverb 时，输出电平降低。
- **WG-57840** 已修复：在 List View 和 Contents Editor 中，在父对象当前不可见时，按下向左键有时无法将其收起。
- **WG-58452** 已修复：完善了之前在尝试设置并使用 Default Switch 值没有提供的无效或未指定的 Switch 时返回的 "No Valid Switch" 错误消息。
- **WG-58464** 已修复：在启动新的捕获时，Voice Monitor 坐标图的缩放被重置。
- **WG-59203** 已修复：Wwise 无法连接到启用了图形支持的 Perforce 服务器。现已在 Perforce 设置中添加新的选项。
- **WG-59422** 已修复：在将具有 Trigger rate 过渡的有限 Sequence Container 与具有 Initial Delay 的 Blend Container 结合时发生崩溃。
- **WG-60369** 已修复：(Mac Authoring) 无法运行 External Editor 和 Command Add-on。
- **WG-60410** 已修复：在缺少 Crankcase Audio REV 2 插件依赖项时，设计工具发生崩溃。
- **WG-60577** 已修复：在 Volume 滑杆处于活跃状态时删除对应 Music Track 会引发崩溃。
- **WG-60602** 已修复：在以 WEM Opus 格式对非常小（< 960 个采样）的音频源进行编码时越界访问内存。
- **WG-60821** 已修复：在录音开始时与 UI 进行交互可能会导致 Recorder 插件发生崩溃。
- **WG-60863** 已修复：在 Metadata Editor 中按下 Help 或 F1 按钮时无法打开 Help。
- **WG-60945** 已修复：Game-Defined Auxiliary Sends 没有获得来自总线上的 RTPC 的定期更新。
- **WG-60959** 已修复：对于 AMD 和 Intel CPU，WEM Opus 媒体的编码产生略不相同的结果。注意，虽然新生成的媒体会跟之前有所不同，但仍支持 WEM Opus 媒体的原有编码。
- **WG-60969** 已修复：(Spatial Audio) 在听者位置与 Portal 重叠时，使用衍射的发声体可能会变得不可闻。
- **WG-61127** 已修复：在内存不足的情况下，`CAkListener::MultiDirectionGainCorrectionForObjects` 发生崩溃。
- **WG-61508** 已修复：Event 的 SoundBank 元数据 Max attenuation 没有计入 Post Event 动作。
- **WG-61634** 已修复：在通过 Multi Editor 或默认插件属性列表检视 RTPC 或 State 时发生崩溃。
- **WG-61655** 已修复：在旧的输出音频设备与多个 Audio Bus 相连时，通过值为 0 的 Audio Device ShareSet 调用 `AK::SoundEngine::ReplaceOutput` 可能会导致音频丢失。
- **WG-61682** 已修复：在 Blend Container 及其子对象中使用相同的 RTPC 时出现声音音量变为几百 dB 的问题。
- **WG-61706** 已修复：在被归入虚声部的情况下播放 Opus 声音时发生崩溃。
- **WG-61727** 已修复：在父级 Switch Container 具有 Offset 值为正的活跃 Transition 时，嵌套 Music Switch Container 无法切换到正确的子对象。
- **WG-62014** 已修复：在启用 `AkInitSettings::bDebugOutOfRangeCheckEnabled` 的情况下播放 External Source 和部分媒体流时误报音频数据无效错误。

参见
:   - [新功能概述 2022.1](whatsnew_2022_1_new_features.html)
    - [重要迁移说明 2022.1](whatsnew_2022_1_migration.html)