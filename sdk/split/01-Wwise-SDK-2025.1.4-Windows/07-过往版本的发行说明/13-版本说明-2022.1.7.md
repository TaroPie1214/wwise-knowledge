# 版本说明 2022.1.7

|  |
| --- |
| Wwise SDK 2025.1.4 - Windows |

版本说明 2022.1.7

以下各节列举并阐述了 2022.1.6 和 2022.1.7 版本之间针对 Wwise 所作的改进。  
此处提供了有关平台的特定信息：

[Windows 和 Windows UWP 2022.1.7](windows_releasenotes_2022_1_7.html)

有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。

- [性能改进](whatsnew_2022_1_7.html#generic_perf_changes_2022_1_7)
- [漏洞修复](whatsnew_2022_1_7.html#generic_bugs_2022_1_7)
- [社区报告的漏洞修复](whatsnew_2022_1_7.html#generic_community_bugs_2022_1_7)
- [文档改进](whatsnew_2022_1_7.html#generic_documentation_improvements_2022_1_7)

# 性能改进

- **WG-65225** 在使用 Wwise 的默认内存分配器时，现在所有分配都会转到单个全局内存堆而非依赖于线程本地内存堆。这样应可显著降低 Wwise 在进程当中预留的内存量，确保整个过程中预留的内存更加稳定且可预测。

  若发现由于 Wwise 中存在大量多线程活动而导致全局内存堆出现严重的 CPU 争用情况，现在可以使用为 Wwise 默认内存分配器新增的配置设置 `AkMemSettings::uMaxThreadLocalHeapAllocSize`。您可以利用该设置来配置在怎样的阈值下由线程本地内存堆而非全局内存堆承担内存分配。该值默认设为 0。

  注意，即便 `AkMemSettings::uMaxThreadLocalHeapAllocSize` 被设为非零值，未执行 `AK::MemoryMgr::InitForThread` 的线程上出现的内存分配也会使用全局内存堆。这样是为了避免在未执行 `AK::MemoryMgr::InitForThread` 或 `AK::MemoryMgr::TermForThread` 的非 Wwise 线程上与有些声音引擎 API 交互时意外创建线程本地内存堆。

  另外，现在所有平台上通过调用 `AkMemSettings::pfAllocVM` 来预留新内存块的默认大小均为 2MiB。这样可以更好地利用 2MiB 页映射。藉此，可减少声音引擎执行期间的转译后备缓冲区 (TLB) 缺失，进而略微提升性能。另外，现在的 rpmalloc 经过配置可缓存更少的未用内存，确保在内存用量较低的时候更加及时地释放内存。

# 漏洞修复

- **WG-61028** 已修复：在与 Source Editor 交互时更改 WAV 文件可能会引发崩溃。
- **WG-65000** 已修复：(Spatial Audio) 在多个重合表面上反射时，反射不稳定，有时甚至会通过封闭的几何构造渗透。
- **WG-65525** 已修复：声音上应用了两次 RTPC 时，只移除其中一个会导致两个 RTPC 全部禁用。
- **WG-65860** 已修复：在曲线被固定的情况下撤消操作可能会导致 RTPC 选项卡发生崩溃。
- **WG-66084** 已修复：Audiokinetic 对内存分配调试函数（AkMemSettings 中提供）的默认实现会导致线程不安全。
- **WG-66085** 已修复：监控代码 `AkDataCreatorBase::Grow()` 可能会发生崩溃。
- **WG-66813** 已修复：有些后台任务存在延迟。
- **WG-66842** 已修复：无法正确同步新添加到活跃插件的 RTPC。
- **WG-66987** 已修复：在设计工具中对 RTPC 默认值的更改没有与活跃插件同步。

# 社区报告的漏洞修复

- **WG-63861** 已修复：Unreal "Generated Sound Banks Folder User Override" 设置名称与 Wwise 设计工具名称 "Root Output Path" 不匹配。
- **WG-65198** 已修复：在发生文件转码错误或版本控制错误后，Vorbis 转码发生崩溃。
- **WG-65300** 已修复：在 SoundBank 生成过程中对版本控制操作进行验证会导致误报签出错误。
- **WG-65918** 已修复：在设置了 Attenuation 并在 Project Settings 中启用了该选项时，Audio Bus 和 Aux Bus 的 SoundBank 元数据没有 MaxAttenuation 属性。
- **WG-65947** 已修复：对于处于版本控制之下的工程，Submit Changes/Commit 对话框中不显示有些 SoundBank 文件。
- **WG-66058** 已修复：在为 `AkInitSettings::uNumSamplesPerFrame` 设置非二次方值的情况下运行声音引擎时，AK Convolution 挂起。
- **WG-66609** 已修复：在启用和禁用 Background Analysis 选项的情况下进行转码时，WEM 文件差异会导致元数据出现差异。对此，可通过在重新生成前删除所有 .akd 文件来加以解决。
- **WG-66806** 已修复：在本地调制器仍处于活跃状态的情况下调用 `UnregisterGameObj` 会导致 `AkGameSyncValueTreeItem::Term` 触发断言。

# 文档改进

- **WG-65268** 添加了 [音频输入源插件](referencematerial_audioinput.html) 集成详情。
- **WG-65270** 在[设置音频输出设备](https://www.audiokinetic.com/library/edge/?source=Help&id=audio_preferences#setting_output_devices)中添加了 macOS 的相关信息。
- **WG-65274** 改进了[管理不可恢复错误](https://www.audiokinetic.com/library/edge/?source=Help&id=managing_file_import_issues#managing_non_recoverable_errors)的故障排除。
- **WG-65642** 添加了关于使用 Mac 键盘进行[删除控制点](https://www.audiokinetic.com/library/edge/?source=Help&id=working_with_control_points_in_graph_view#deleting_control_points)和[删除时间线中的控制点](https://www.audiokinetic.com/library/edge/?source=Help&id=working_with_points_in_timeline#deleting_control_points_in_timeline)的信息。