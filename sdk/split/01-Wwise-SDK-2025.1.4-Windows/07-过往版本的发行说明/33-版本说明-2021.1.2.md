# 版本说明 2021.1.2

|  |
| --- |
| Wwise SDK 2025.1.4 - Windows |

版本说明 2021.1.2

以下各节列举并阐述了 2021.1.1 和 2021.1.2 版本之间针对 Wwise 所作的改进。  
此处提供了有关平台的特定信息：

[Windows 和 Windows UWP 2021.1.2](windows_releasenotes_2021_1_2.html)

有关早期版本的信息，请参阅 [过往版本的发行说明](previousreleases.html) 章节。

- [新增功能](whatsnew_2021_1_2.html#generic_feature_changes_2021_1_2)
- [API 改进](whatsnew_2021_1_2.html#generic_api_changes_2021_1_2)
- [行为改进](whatsnew_2021_1_2.html#generic_behavior_changes_2021_1_2)
- [性能改进](whatsnew_2021_1_2.html#generic_perf_changes_2021_1_2)
- [漏洞修复](whatsnew_2021_1_2.html#generic_bugs_2021_1_2)
- [社区报告的漏洞修复](whatsnew_2021_1_2.html#generic_community_bugs_2021_1_2)

# 新增功能

- **WG-52085** 添加了 `AK::SoundEngine::TryUnsetMedia` API，可用来替代 `AK::SoundEngine::UnsetMedia`，并且使用起来更加安全。
- **WG-53816** 现在将 2021.1 新增 Spatial Audio 功能整合到了 Wwise Audio Lab 中。比如，Radial Emitter、Spatial Audio Emitter 多点定位、房间底噪（替代某些环境声）。

# API 改进

- **WG-53273** `AK::SoundEngine::RegisterPluginDLL` 现在会返回更为明晰的错误代码。
- **WG-54297** 在 [AkMemSettings::uMemoryDebugLevel](struct_ak_mem_settings_ae97967db68ec10e8410af9f776f89e0d.html#ae97967db68ec10e8410af9f776f89e0d "Default 0 disabled. 1 debug enabled. 2 stomp allocator enabled. 3 stomp allocator and debug enabled....") 级别 2 中禁用了额外的调试信息以专注于内存 stomp 检测，并新增了级别 3 来结合级别 1 和级别 2 的功能。
- **WG-54342** 添加了 `AkChannelConfig::SetSameAsMainMix` 和  `AkChannelConfig::SetSameAsPassthrough` 辅助函数，来与 `AK::SoundEngine::SetBusConfig` 结合使用。

# 行为改进

- **WG-54465** Error Reporting 工具现在需要用户填写相应字段以提供附加信息。
- **WG-54605** 在声音引擎采用 Debug、Profile 和 Release 二进制配置的情况下将数值（如 NaN 或 Inf）作为参数传递时，`AK::SoundEngine::SetRTPCValue` 和 `AK::SoundEngine::SetGameObjectAuxSendValues` 等 SDK 函数现在会返回 AK\_InvalidFloatValue 并跳过函数的执行。之前，只有 Debug 和 Profile 二进制配置可以如此，而 Release 无法做到这一点。

# 性能改进

- **WG-54125** Spatial Audio - 优化了 Portal 和游戏对象之间的路径计算，以便设法计算最短的路径。
- **WG-54472** 对使用双二阶滤波器的效果器（如 Low-pass Filter、Parametric EQ 和 Reflect）做了性能提升。成效如下：
  - 将单声道处理的吞吐量性能提升了高达 2.5 倍。
  - 将立体声处理的吞吐量性能提升了高达 1.3 倍。
  - 将 7.1 和 Ambisonics 处理的吞吐量性能提升了高达 2.2 倍。
- **WG-54505** 提升了声音引擎在启用 `AkInitSettings::bDebugOutOfRangeCheckEnabled` 时的性能。现在启用此功能时 CPU 用量只会增加 1.05-1.10 倍而不是像之前的 1.50-3.00 倍。如此一来，在很多场景下都可以使用这一功能了。

# 漏洞修复

- **WG-53415** 已修复：在 Performance Monitor 显示 Loudness Meter 数据而未打开 Loudness Meter 视图的情况下实施捕获会导致 Wwise 的 CPU 用量达到峰值。
- **WG-53606** 已修复：在选择 Open Containing Folder 时打开了多个 Windows 资源管理器窗口。
- **WG-53734** 已修复：在内存不足的情况下，CAkMultiBandEQ 和 CAkPitchShifterFX 可能会引发崩溃。
- **WG-53739** 已修复：在内存不足的情况下使用 Audio Device 效果器会引发崩溃。
- **WG-53751** 已修复：在 Init.bnk 加载失败的情况下调用 `AK::SoundEngine::GetSpeakerConfiguration` 会死机。
- **WG-54053** 已修复：在使用 Remote Desktop Connection 的情况下更改远程音频设置可能会引发崩溃。
- **WG-54061** 已修复：在实施性能分析的情况下加载已经加载的 SoundBank 会引发崩溃。
- **WG-54062** 已修复：在使用 Ambisonics 声道配置的情况下终止声音引擎可能会引发崩溃。
- **WG-54075** 已修复：在内存不足的情况下使用 `AK::SoundEngine::PostMIDIOnEvent` 会引发内存泄漏。
- **WG-54200** 已修复：AKSIMD\_TESTZERO\_V8F32 没有检查所提供的整个矢量是否等于零。
- **WG-54375** 已修复：在传给 `AK::SoundEngine` API 调用的用户数据过大时没有报告错误。
- **WG-54408** 已修复：在使用 Profile Only 选项连接到游戏时，Wwise 设计工具可能会发生崩溃。
- **WG-54500** 已修复：在 Geometry 与 Room 关联的情况下，Room 的边界仅代表该 Geometry 的 Volume。
- **WG-54513** 已修复：在删除其中一个关联的 Blend Track 后播放 Blend Container 会导致 Wwise 发生崩溃。
- **WG-54555** 已修复：报告的 Spatial Audio - Portal Path Validation CPU 和 Spatial Audio - Path Validation CPU 值有时比 Spatial Audio - CPU 还高。
- **WG-54570** 已修复：(Spatial Audio) 在从 Portal 过渡到 Room 而其带有多个与同一 Room 相连的其他 Portal 时检测到了不相关的路径和声音位置。
- **WG-54584** 已修复：(Spatial Audio) Game Object 3D Viewer 中有时不会显示由 Room/Portal 到听者的声音路径。
- **WG-54603** 已修复：由于使用的文件过多，导致 WwiseConsole 速度减慢。
- **WG-54621** 已修复：启动画面上没有显示 Wwise 版本名称。
- **WG-54661** 已修复：在视图中没有显示任何效果器的情况下通过 Effect Editor 打开 Help 会引发崩溃。
- **WG-54670** 已修复：有时不会更新 Voice Inspector 报告的数值（Volume、LPF 和 HPF）。
- **WG-54671** 已修复：Project Explorer 内 ShareSets 选项卡的 Effects 列表中无法正常显示 & 号。
- **WG-54831** 已修复：在未运行 Spatial Audio 时没有将 Performance Monitor 中的 Spatial Audio 计数器重置为 0。
- **WG-54840** 已修复：Speaker Panner 视图中缺少 Z 滑杆。

# 社区报告的漏洞修复

- **WG-48424** 已修复：在保存处于版本控制之下的工程时可能会发生崩溃。
- **WG-54269** 已修复：在 [AkAudioBuffer](class_ak_audio_buffer.html) 无效的情况下调用 `AkAudioBuffer::ZeroPadToMaxFrames` 会引发崩溃。
- **WG-54399** 已修复：在双击电平表时发生崩溃。
- **WG-54663** 已修复：(Mac Authoring) 无法运行 External Editor 和 Command Add-on。
- **WG-54745** 已修复：在使用存在异常的自定义 Sink 插件时发生崩溃。
- **WG-54838** 已修复：在使用 WAAPI 时关机可能会引发崩溃。